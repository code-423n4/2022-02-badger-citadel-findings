Handle:
IllIllI

Email:
IllIllI000@protonmail.com

Polygon address:
0xCC6B0a35481EA40b60780B7c0294c6c29061038f

Risk rating:
Gas Optimizations

Vulnerability details:
# Table of contents
+ [\[G-00\] - Use `!= 0` rather than `> 0` for unsigned integers in `require()` statements](#g00)
+ [\[G-01\] - Use local variables to cache results of storage reads](#g01)
+ [\[G-02\] - Pre-calculate repeatedly-checked offsets](#g02)
+ [\[G-03\] - Use `unchecked` for operations not expected to overflow](#g03)
+ [\[G-04\] - Pull tokens rather than pushing them](#g04)

The baseline against which these results were verified came from the following command:
```
$ forge test --optimize --gas-report --optimize-runs 200 --match-contract TokenSaleUpgradeableTest
compiling...
success.
Running 45 tests for TokenSaleUpgradeableTest.json:TokenSaleUpgradeableTest
[32m[PASS][0m testAmountOut(uint128) (runs: 256, μ: 5040, ~: 5041)
[32m[PASS][0m testBuyAfterTokenInLimitUpdated() (gas: 324150)
[32m[PASS][0m testBuyFailsAfterEnd() (gas: 7771)
[32m[PASS][0m testBuyFailsBeforeStart() (gas: 10304)
[32m[PASS][0m testBuyFailsIfLimitExceeded() (gas: 290925)
[32m[PASS][0m testBuyFailsIfMoreThanLimit() (gas: 82652)
[32m[PASS][0m testBuyFailsIfNotInGuestlist() (gas: 15392)
[32m[PASS][0m testBuyFailsWhenPaused() (gas: 29824)
[32m[PASS][0m testBuyMultipleBuyers() (gas: 324089)
[32m[PASS][0m testBuyOnce() (gas: 219681)
[32m[PASS][0m testBuyTwice() (gas: 318143)
[32m[PASS][0m testBuyTwiceFailsForDifferentDaos() (gas: 226480)
[32m[PASS][0m testBuyWhenNoGuestlist() (gas: 200536)
[32m[PASS][0m testBuyZero() (gas: 6216)
[32m[PASS][0m testClaim() (gas: 368861)
[32m[PASS][0m testClaimAfterMultipleBuys() (gas: 467216)
[32m[PASS][0m testClaimFailsBeforeFinalize() (gas: 5179)
[32m[PASS][0m testClaimFailsIfCalledAgain() (gas: 371463)
[32m[PASS][0m testClaimFailsWhenNothingToClaim() (gas: 93860)
[32m[PASS][0m testClaimFailsWhenPaused() (gas: 28101)
[32m[PASS][0m testClaimMultipleBuyers() (gas: 538522)
[32m[PASS][0m testExtendSaleDuration() (gas: 15922)
[32m[PASS][0m testFinalize() (gas: 301754)
[32m[PASS][0m testFinalizeFailsBeforeSaleEnds() (gas: 8526)
[32m[PASS][0m testFinalizeFailsIfCalledAgain() (gas: 89215)
[32m[PASS][0m testFinalizeFailsIfNotEnoughTokenIn() (gas: 226257)
[32m[PASS][0m testGuestlistUpdate() (gas: 0)
[32m[PASS][0m testInitializeMultiple() (gas: 6409)
[32m[PASS][0m testOwner() (gas: 2227)
[32m[PASS][0m testPause() (gas: 25065)
[32m[PASS][0m testPermissions() (gas: 29124)
[32m[PASS][0m testSaleEndedAfterDuration() (gas: 9653)
[32m[PASS][0m testSaleEndedAfterLimit() (gas: 221010)
[32m[PASS][0m testSaleRecipientChangedDuringSale() (gas: 342108)
[32m[PASS][0m testSetSaleDuration() (gas: 9491)
[32m[PASS][0m testSetSaleRecipient() (gas: 9593)
[32m[PASS][0m testSetSaleStart() (gas: 9644)
[32m[PASS][0m testSetTokenInLimit() (gas: 10257)
[32m[PASS][0m testSetTokenOutPrice() (gas: 9593)
[32m[PASS][0m testSweepExceptTokenOut() (gas: 96558)
[32m[PASS][0m testSweepTokenOut() (gas: 330925)
[32m[PASS][0m testTokenInLimitLeft(uint256) (runs: 256, μ: 221304, ~: 221305)
[32m[PASS][0m testTokenOutPriceDoubledDuringSale() (gas: 320103)
[32m[PASS][0m testTransferOwnership() (gas: 5881)
[32m[PASS][0m testUnpause() (gas: 8384)
╭─────────────────┬─────────────────┬───────┬────────┬───────┬─────────╮
│ CTDL contract   ┆                 ┆       ┆        ┆       ┆         │
╞═════════════════╪═════════════════╪═══════╪════════╪═══════╪═════════╡
│ Deployment Cost ┆ Deployment Size ┆       ┆        ┆       ┆         │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ 0               ┆ 0               ┆       ┆        ┆       ┆         │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ Function Name   ┆ min             ┆ avg   ┆ median ┆ max   ┆ # calls │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ approve         ┆ 22519           ┆ 24181 ┆ 24619  ┆ 24619 ┆ 24      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ balanceOf       ┆ 540             ┆ 1070  ┆ 540    ┆ 2540  ┆ 200     │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ decimals        ┆ 378             ┆ 378   ┆ 378    ┆ 378   ┆ 160     │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ totalSupply     ┆ 326             ┆ 840   ┆ 326    ┆ 2326  ┆ 105     │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ transfer        ┆ 18523           ┆ 20130 ┆ 18523  ┆ 25153 ┆ 8       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ transferFrom    ┆ 4659            ┆ 16599 ┆ 20579  ┆ 20579 ┆ 24      │
╰─────────────────┴─────────────────┴───────┴────────┴───────┴─────────╯
╭───────────────────────────────┬─────────────────┬────────┬────────┬────────┬─────────╮
│ TokenSaleUpgradeable contract ┆                 ┆        ┆        ┆        ┆         │
╞═══════════════════════════════╪═════════════════╪════════╪════════╪════════╪═════════╡
│ Deployment Cost               ┆ Deployment Size ┆        ┆        ┆        ┆         │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ 1714599                       ┆ 8596            ┆        ┆        ┆        ┆         │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ Function Name                 ┆ min             ┆ avg    ┆ median ┆ max    ┆ # calls │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ boughtAmounts                 ┆ 608             ┆ 1399   ┆ 608    ┆ 2608   ┆ 48      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ buy                           ┆ 851             ┆ 55606  ┆ 93149  ┆ 95131  ┆ 32      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ claim                         ┆ 468             ┆ 31463  ┆ 39754  ┆ 69592  ┆ 9       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ daoCommitments                ┆ 633             ┆ 1341   ┆ 633    ┆ 2633   ┆ 48      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ daoVotedFor                   ┆ 636             ┆ 636    ┆ 636    ┆ 636    ┆ 24      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ finalize                      ┆ 543             ┆ 3180   ┆ 3164   ┆ 5164   ┆ 11      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ finalized                     ┆ 394             ┆ 394    ┆ 394    ┆ 394    ┆ 7       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ getTokenInLimitLeft           ┆ 566             ┆ 704    ┆ 704    ┆ 843    ┆ 2       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ guestlist                     ┆ 427             ┆ 427    ┆ 427    ┆ 427    ┆ 1       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ hasClaimed                    ┆ 577             ┆ 577    ┆ 577    ┆ 577    ┆ 5       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ initialize                    ┆ 1359            ┆ 179527 ┆ 183671 ┆ 183671 ┆ 44      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ owner                         ┆ 443             ┆ 443    ┆ 443    ┆ 443    ┆ 2       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ pause                         ┆ 477             ┆ 17469  ┆ 21718  ┆ 21718  ┆ 5       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ paused                        ┆ 338             ┆ 338    ┆ 338    ┆ 338    ┆ 2       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ saleDuration                  ┆ 405             ┆ 405    ┆ 405    ┆ 405    ┆ 1       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ saleEnded                     ┆ 677             ┆ 1450   ┆ 784    ┆ 2891   ┆ 6       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ saleRecipient                 ┆ 444             ┆ 444    ┆ 444    ┆ 444    ┆ 1       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ saleStart                     ┆ 443             ┆ 443    ┆ 443    ┆ 443    ┆ 1       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ setGuestlist                  ┆ 636             ┆ 1356   ┆ 1536   ┆ 1536   ┆ 5       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ setSaleDuration               ┆ 679             ┆ 1592   ┆ 2049   ┆ 2049   ┆ 3       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ setSaleRecipient              ┆ 658             ┆ 1552   ┆ 1999   ┆ 1999   ┆ 3       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ setSaleStart                  ┆ 612             ┆ 1553   ┆ 2024   ┆ 2024   ┆ 3       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ setTokenInLimit               ┆ 574             ┆ 1372   ┆ 1772   ┆ 1772   ┆ 3       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ setTokenOutPrice              ┆ 596             ┆ 1314   ┆ 1674   ┆ 1674   ┆ 3       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ sweep                         ┆ 614             ┆ 18337  ┆ 22242  ┆ 32157  ┆ 3       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ tokenInLimit                  ┆ 341             ┆ 341    ┆ 341    ┆ 341    ┆ 1       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ tokenOutPrice                 ┆ 406             ┆ 406    ┆ 406    ┆ 406    ┆ 1       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ totalTokenIn                  ┆ 339             ┆ 1047   ┆ 339    ┆ 2339   ┆ 48      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ totalTokenOutBought           ┆ 362             ┆ 1070   ┆ 362    ┆ 2362   ┆ 48      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ totalTokenOutClaimed          ┆ 363             ┆ 1163   ┆ 363    ┆ 2363   ┆ 10      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ transferOwnership             ┆ 633             ┆ 1505   ┆ 1505   ┆ 2378   ┆ 2       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ unpause                       ┆ 499             ┆ 976    ┆ 976    ┆ 1454   ┆ 2       │
╰───────────────────────────────┴─────────────────┴────────┴────────┴────────┴─────────╯
╭──────────────────────────────────────┬─────────────────┬─────┬────────┬─────┬─────────╮
│ TransparentUpgradeableProxy contract ┆                 ┆     ┆        ┆     ┆         │
╞══════════════════════════════════════╪═════════════════╪═════╪════════╪═════╪═════════╡
│ Deployment Cost                      ┆ Deployment Size ┆     ┆        ┆     ┆         │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ 659571                               ┆ 4313            ┆     ┆        ┆     ┆         │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ Function Name                        ┆ min             ┆ avg ┆ median ┆ max ┆ # calls │
╰──────────────────────────────────────┴─────────────────┴─────┴────────┴─────┴─────────╯
╭──────────────────────────────────┬─────────────────┬───────┬────────┬───────┬─────────╮
│ VipGuestListUpgradeable contract ┆                 ┆       ┆        ┆       ┆         │
╞══════════════════════════════════╪═════════════════╪═══════╪════════╪═══════╪═════════╡
│ Deployment Cost                  ┆ Deployment Size ┆       ┆        ┆       ┆         │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ 548181                           ┆ 2770            ┆       ┆        ┆       ┆         │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ Function Name                    ┆ min             ┆ avg   ┆ median ┆ max   ┆ # calls │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ authorized                       ┆ 936             ┆ 1069  ┆ 936    ┆ 3741  ┆ 21      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ initialize                       ┆ 47128           ┆ 47128 ┆ 47128  ┆ 47128 ┆ 43      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ setGuestRoot                     ┆ 23644           ┆ 23644 ┆ 23644  ┆ 23644 ┆ 43      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ setGuests                        ┆ 23896           ┆ 23896 ┆ 23896  ┆ 23896 ┆ 43      │
╰──────────────────────────────────┴─────────────────┴───────┴────────┴───────┴─────────╯

```


# [G-00] - Use `!= 0` rather than `> 0` for unsigned integers in `require()` statements
## Impact
When the optimizer is enabled, gas is wasted by doing a greater-than operation, rather than a not-equals operation inside `require()` statements. When Using `!=`, the optimizer is able to avoid the `EQ`, `ISZERO`, and associated operations, by relying on the `JUMPI` that comes afterwards, which itself checks for zero.


## Examples

### 1. [TokenSaleUpgradeable.sol:L110-113](https://github.com/code-423n4/2022-02-badger-citadel/blob/84596551d62f243d13fcb2d486346dde08002f7b/contracts/TokenSaleUpgradeable.sol#L110-L113)
```solidity
        require(
            _saleDuration > 0,
            "TokenSale: the sale duration must not be zero"
        );
```

This is the diff of the original version of `contracts/TokenSaleUpgradeable.sol` and a new, optimized version
```solidity
111c111
<             _saleDuration > 0,
---
>             _saleDuration != 0,
```
These are the original byte code followed by the byte code compiled from the new version
```
608060405234801561001057600080fd5b506004361061021c5760003560e01c806373b2e80e11610125578063b3a891c9116100ad578063e9a2f2e01161007c578063e9a2f2e01461048e578063f2fde38b14610497578063f49af3fa146104aa578063fd7e60a9146104bd578063fee839c6146104d057600080fd5b8063b3a891c914610441578063b3f05b9714610454578063d0202d3b14610468578063dacec66e1461047b57600080fd5b80639b8906ae116100f45780639b8906ae146103fb578063a1d9eecf14610403578063ab0bcc4114610416578063abf017e914610430578063afb8a52e1461043957600080fd5b806373b2e80e146103ac5780638456cb59146103cf5780638b234215146103d75780638da5cb5b146103ea57600080fd5b80634e71d92d116101a85780635c975abb116101775780635c975abb14610351578063618426fc1461036857806368c91d8f146103715780636daf390b14610391578063715018a6146103a457600080fd5b80634e71d92d146102fb578063564f0848146103035780635b019b761461030c5780635c1952171461033e57600080fd5b806324f3dd2f116101ef57806324f3dd2f146102965780633711d9fb146102ad5780633f4ba83a146102d857806346afbc1b146102e05780634bb278f3146102f357600080fd5b806301681a62146102215780630d4ec845146102365780631c908d9814610249578063240877101461025c575b600080fd5b61023461022f366004611ac9565b6104f0565b005b610234610244366004611ac9565b610667565b610234610257366004611ac9565b6106db565b61027f61026a366004611ac9565b60a36020526000908152604090205460ff1681565b60405160ff90911681526020015b60405180910390f35b61029f60a05481565b60405190815260200161028d565b6099546102c0906001600160401b031681565b6040516001600160401b03909116815260200161028d565b610234610786565b6102346102ee366004611afb565b6107ba565b61023461088d565b61029f610a30565b61029f609f5481565b60995461032690600160401b90046001600160a01b031681565b6040516001600160a01b03909116815260200161028d565b61029f61034c366004611b16565b610bcc565b60655460ff165b604051901515815260200161028d565b61029f609e5481565b61029f61037f366004611ac9565b609b6020526000908152604090205481565b609854610326906001600160a01b031681565b610234610c63565b6103586103ba366004611ac9565b609c6020526000908152604090205460ff1681565b610234610c97565b60a154610326906001600160a01b031681565b6033546001600160a01b0316610326565b610358610cc9565b61029f610411366004611b3e565b610d10565b6098546102c090600160a01b90046001600160401b031681565b61029f609a5481565b61029f611105565b61023461044f366004611afb565b611126565b60995461035890600160e01b900460ff1681565b609754610326906001600160a01b031681565b610234610489366004611bc9565b6111fe565b61029f609d5481565b6102346104a5366004611ac9565b6113e3565b6102346104b8366004611b16565b61147e565b6102346104cb366004611b16565b611507565b61029f6104de366004611c52565b60a26020526000908152604090205481565b6033546001600160a01b031633146105235760405162461bcd60e51b815260040161051a90611c6f565b60405180910390fd5b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a0823190602401602060405180830381865afa15801561056a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061058e9190611ca4565b6097549091506001600160a01b03838116911614156105c9576000609f54609e546105b99190611cd3565b90506105c58183611cd3565b9150505b6000811161060c5760405162461bcd60e51b815260206004820152601060248201526f06e6f7468696e6720746f2073776565760841b604482015260640161051a565b6106206001600160a01b0383163383611586565b816001600160a01b03167f1b94d65e3a03a98b13e90142a41884547fdd622b7f14a4daf94f6338e2e85cf08260405161065b91815260200190565b60405180910390a25050565b6033546001600160a01b031633146106915760405162461bcd60e51b815260040161051a90611c6f565b60a180546001600160a01b0319166001600160a01b0383169081179091556040517f650070ede2ab0ad22a57e15b88d668804b8f7c361a1ee8560093705f4d78abdd90600090a250565b6033546001600160a01b031633146107055760405162461bcd60e51b815260040161051a90611c6f565b6001600160a01b03811661072b5760405162461bcd60e51b815260040161051a90611cea565b6099805468010000000000000000600160e01b031916600160401b6001600160a01b038416908102919091179091556040517f22fcd0f303ce9972cac865bf07f264510ba86521618196591c01ad233f97826690600090a250565b6033546001600160a01b031633146107b05760405162461bcd60e51b815260040161051a90611c6f565b6107b86115ee565b565b6033546001600160a01b031633146107e45760405162461bcd60e51b815260040161051a90611c6f565b6000816001600160401b03161161080d5760405162461bcd60e51b815260040161051a90611d36565b609954600160e01b900460ff16156108375760405162461bcd60e51b815260040161051a90611d83565b6099805467ffffffffffffffff19166001600160401b0383169081179091556040519081527f63d2e06731cd563c7ce4ee2e4227ead624e21cfb8bde59079d343e63ec3baf5f906020015b60405180910390a150565b6033546001600160a01b031633146108b75760405162461bcd60e51b815260040161051a90611c6f565b609954600160e01b900460ff16156108e15760405162461bcd60e51b815260040161051a90611d83565b6108e9610cc9565b6109355760405162461bcd60e51b815260206004820152601760248201527f546f6b656e53616c653a206e6f742066696e6973686564000000000000000000604482015260640161051a565b609e546097546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015610980573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a49190611ca4565b10156109f25760405162461bcd60e51b815260206004820152601d60248201527f546f6b656e53616c653a206e6f7420656e6f7567682062616c616e6365000000604482015260640161051a565b6099805460ff60e01b1916600160e01b1790556040517f6823b073d48d6e3a7d385eeb601452d680e74bb46afe3255a7d778f3a9b1768190600090a1565b6000610a3e60655460ff1690565b15610a5b5760405162461bcd60e51b815260040161051a90611dba565b609954600160e01b900460ff16610aa95760405162461bcd60e51b81526020600482015260126024820152711cd85b19481b9bdd08199a5b985b1a5e995960721b604482015260640161051a565b336000908152609c602052604090205460ff1615610afb5760405162461bcd60e51b815260206004820152600f60248201526e185b1c9958591e4818db185a5b5959608a1b604482015260640161051a565b50336000908152609b602052604090205480610b4c5760405162461bcd60e51b815260206004820152601060248201526f6e6f7468696e6720746f20636c61696d60801b604482015260640161051a565b336000908152609c60205260408120805460ff19166001179055609f8054839290610b78908490611de4565b9091555050609754610b94906001600160a01b03163383611586565b60405181815233907f47cee97cb7acd717b3c0aa1435d004cd5b3c8c57d70dbceb4e4458bbd60e39d49060200160405180910390a290565b609a546097546040805163313ce56760e01b81529051600093926001600160a01b03169163313ce5679160048083019260209291908290030181865afa158015610c1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3e9190611dfc565b610c4990600a611efd565b610c539084611f0c565b610c5d9190611f2b565b92915050565b6033546001600160a01b03163314610c8d5760405162461bcd60e51b815260040161051a90611c6f565b6107b86000611681565b6033546001600160a01b03163314610cc15760405162461bcd60e51b815260040161051a90611c6f565b6107b86116d3565b609954609854600091610cf0916001600160401b0391821691600160a01b90910416611f4d565b6001600160401b031642101580610d0b575060a054609d5410155b905090565b6000610d1e60655460ff1690565b15610d3b5760405162461bcd60e51b815260040161051a90611dba565b60985442600160a01b9091046001600160401b03161115610d975760405162461bcd60e51b8152602060048201526016602482015275151bdad95b94d85b194e881b9bdd081cdd185c9d195960521b604482015260640161051a565b609954609854610dba916001600160401b0390811691600160a01b900416611f4d565b6001600160401b03164210610e115760405162461bcd60e51b815260206004820152601860248201527f546f6b656e53616c653a20616c726561647920656e6465640000000000000000604482015260640161051a565b60008511610e615760405162461bcd60e51b815260206004820152601c60248201527f5f746f6b656e496e416d6f756e742073686f756c64206265203e203000000000604482015260640161051a565b60a05485609d54610e729190611de4565b1115610eb85760405162461bcd60e51b81526020600482015260156024820152741d1bdd185b08185b5bdd5b9d08195e18d959591959605a1b604482015260640161051a565b60a1546001600160a01b031615610f7b5760a154604051631849250160e21b81526001600160a01b0390911690636124940490610efd90339087908790600401611f78565b602060405180830381865afa158015610f1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f3e9190611fc5565b610f7b5760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08185d5d1a1bdc9a5e995960921b604482015260640161051a565b336000908152609b60205260409020548015610ffa5733600090815260a3602052604090205460ff868116911614610ff55760405162461bcd60e51b815260206004820152601c60248201527f63616e277420766f746520666f72206d756c7469706c652064616f7300000000604482015260640161051a565b611017565b33600090815260a360205260409020805460ff191660ff87161790555b61102086610bcc565b915061102c8282611de4565b336000908152609b602090815260408083209390935560ff8816825260a29052908120805484929061105f908490611de4565b9250508190555085609d60008282546110789190611de4565b9250508190555081609e60008282546110919190611de4565b90915550506099546098546110bc916001600160a01b03918216913391600160401b9004168961172b565b604080518781526020810184905260ff87169133917f1ec0c95078c890035e941915909bcfe875eca2b01352f0caaf74680fe1d297ce910160405180910390a350949350505050565b600060a054609d54101561112357609d5460a054610d0b9190611cd3565b90565b6033546001600160a01b031633146111505760405162461bcd60e51b815260040161051a90611c6f565b42816001600160401b031610156111795760405162461bcd60e51b815260040161051a90611fe7565b609954600160e01b900460ff16156111a35760405162461bcd60e51b815260040161051a90611d83565b6098805467ffffffffffffffff60a01b1916600160a01b6001600160401b038416908102919091179091556040519081527fe91b422c48d1f63476e86148f126e887ed21d449f2881a51c364f3519e73a89490602001610882565b600054610100900460ff166112195760005460ff161561121d565b303b155b6112805760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161051a565b600054610100900460ff161580156112a2576000805461ffff19166101011790555b42876001600160401b031610156112cb5760405162461bcd60e51b815260040161051a90611fe7565b6000866001600160401b0316116112f45760405162461bcd60e51b815260040161051a90611d36565b600085116113145760405162461bcd60e51b815260040161051a90612033565b6001600160a01b03841661133a5760405162461bcd60e51b815260040161051a90611cea565b611342611769565b61134a6117a0565b609780546001600160a01b03808c166001600160a01b031992831617909255609880546001600160401b03808c16600160a01b026001600160e01b03199283168e8716171790925560998054609a8b9055898616600160401b029216928b169290921717905560a180549286169290911691909117905560a082905580156113d8576000805461ff00191690555b505050505050505050565b6033546001600160a01b0316331461140d5760405162461bcd60e51b815260040161051a90611c6f565b6001600160a01b0381166114725760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161051a565b61147b81611681565b50565b6033546001600160a01b031633146114a85760405162461bcd60e51b815260040161051a90611c6f565b609954600160e01b900460ff16156114d25760405162461bcd60e51b815260040161051a90611d83565b60a08190556040518181527fc03e813ac3c72b419d55e3347033254b7730e1c13579c72e3b0258faa1c228a790602001610882565b6033546001600160a01b031633146115315760405162461bcd60e51b815260040161051a90611c6f565b600081116115515760405162461bcd60e51b815260040161051a90612033565b609a8190556040518181527f1547cf4f4e088a233f379adf2a2ca21d8007a1a0273ac91fa1ec95d0c8e8414b90602001610882565b6040516001600160a01b0383166024820152604481018290526115e990849063a9059cbb60e01b906064015b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526117d7565b505050565b60655460ff166116375760405162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604482015260640161051a565b6065805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b60655460ff16156116f65760405162461bcd60e51b815260040161051a90611dba565b6065805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586116643390565b6040516001600160a01b03808516602483015283166044820152606481018290526117639085906323b872dd60e01b906084016115b2565b50505050565b600054610100900460ff166117905760405162461bcd60e51b815260040161051a90612078565b6117986118a9565b6107b86118d0565b600054610100900460ff166117c75760405162461bcd60e51b815260040161051a90612078565b6117cf6118a9565b6107b8611900565b600061182c826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166119339092919063ffffffff16565b8051909150156115e9578080602001905181019061184a9190611fc5565b6115e95760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161051a565b600054610100900460ff166107b85760405162461bcd60e51b815260040161051a90612078565b600054610100900460ff166118f75760405162461bcd60e51b815260040161051a90612078565b6107b833611681565b600054610100900460ff166119275760405162461bcd60e51b815260040161051a90612078565b6065805460ff19169055565b6060611942848460008561194c565b90505b9392505050565b6060824710156119ad5760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b606482015260840161051a565b843b6119fb5760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161051a565b600080866001600160a01b03168587604051611a1791906120ef565b60006040518083038185875af1925050503d8060008114611a54576040519150601f19603f3d011682016040523d82523d6000602084013e611a59565b606091505b5091509150611a69828286611a74565b979650505050505050565b60608315611a83575081611945565b825115611a935782518084602001fd5b8160405162461bcd60e51b815260040161051a919061210b565b80356001600160a01b0381168114611ac457600080fd5b919050565b600060208284031215611adb57600080fd5b61194582611aad565b80356001600160401b0381168114611ac457600080fd5b600060208284031215611b0d57600080fd5b61194582611ae4565b600060208284031215611b2857600080fd5b5035919050565b60ff8116811461147b57600080fd5b60008060008060608587031215611b5457600080fd5b843593506020850135611b6681611b2f565b925060408501356001600160401b0380821115611b8257600080fd5b818701915087601f830112611b9657600080fd5b813581811115611ba557600080fd5b8860208260051b8501011115611bba57600080fd5b95989497505060200194505050565b600080600080600080600080610100898b031215611be657600080fd5b611bef89611aad565b9750611bfd60208a01611aad565b9650611c0b60408a01611ae4565b9550611c1960608a01611ae4565b945060808901359350611c2e60a08a01611aad565b9250611c3c60c08a01611aad565b915060e089013590509295985092959890939650565b600060208284031215611c6457600080fd5b813561194581611b2f565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b600060208284031215611cb657600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b600082821015611ce557611ce5611cbd565b500390565b6020808252602c908201527f546f6b656e53616c653a2073616c6520726563697069656e742073686f756c6460408201526b206e6f74206265207a65726f60a01b606082015260800190565b6020808252602d908201527f546f6b656e53616c653a207468652073616c65206475726174696f6e206d757360408201526c74206e6f74206265207a65726f60981b606082015260800190565b6020808252601c908201527f546f6b656e53616c653a20616c72656164792066696e616c697a656400000000604082015260600190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b60008219821115611df757611df7611cbd565b500190565b600060208284031215611e0e57600080fd5b815161194581611b2f565b600181815b80851115611e54578160001904821115611e3a57611e3a611cbd565b80851615611e4757918102915b93841c9390800290611e1e565b509250929050565b600082611e6b57506001610c5d565b81611e7857506000610c5d565b8160018114611e8e5760028114611e9857611eb4565b6001915050610c5d565b60ff841115611ea957611ea9611cbd565b50506001821b610c5d565b5060208310610133831016604e8410600b8410161715611ed7575081810a610c5d565b611ee18383611e19565b8060001904821115611ef557611ef5611cbd565b029392505050565b600061194560ff841683611e5c565b6000816000190483118215151615611f2657611f26611cbd565b500290565b600082611f4857634e487b7160e01b600052601260045260246000fd5b500490565b60006001600160401b03808316818516808303821115611f6f57611f6f611cbd565b01949350505050565b6001600160a01b0384168152604060208201819052810182905260006001600160fb1b03831115611fa857600080fd5b8260051b8085606085013760009201606001918252509392505050565b600060208284031215611fd757600080fd5b8151801515811461194557600080fd5b6020808252602c908201527f546f6b656e53616c653a2073746172742064617465206d6179206e6f7420626560408201526b081a5b881d1a19481c185cdd60a21b606082015260800190565b60208082526025908201527f546f6b656e53616c653a20746865207072696365206d757374206e6f74206265604082015264207a65726f60d81b606082015260800190565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b60005b838110156120de5781810151838201526020016120c6565b838111156117635750506000910152565b600082516121018184602087016120c3565b9190910192915050565b602081526000825180602084015261212a8160408501602087016120c3565b601f01601f1916919091016040019291505056fea26469706673582212203187f9de1bc94f6ba8ca6ffb7e2438ccb59c8790bd234e8f23ce26e6bff8088664736f6c634300080b0033
```
```
608060405234801561001057600080fd5b506004361061021c5760003560e01c806373b2e80e11610125578063b3a891c9116100ad578063e9a2f2e01161007c578063e9a2f2e01461048e578063f2fde38b14610497578063f49af3fa146104aa578063fd7e60a9146104bd578063fee839c6146104d057600080fd5b8063b3a891c914610441578063b3f05b9714610454578063d0202d3b14610468578063dacec66e1461047b57600080fd5b80639b8906ae116100f45780639b8906ae146103fb578063a1d9eecf14610403578063ab0bcc4114610416578063abf017e914610430578063afb8a52e1461043957600080fd5b806373b2e80e146103ac5780638456cb59146103cf5780638b234215146103d75780638da5cb5b146103ea57600080fd5b80634e71d92d116101a85780635c975abb116101775780635c975abb14610351578063618426fc1461036857806368c91d8f146103715780636daf390b14610391578063715018a6146103a457600080fd5b80634e71d92d146102fb578063564f0848146103035780635b019b761461030c5780635c1952171461033e57600080fd5b806324f3dd2f116101ef57806324f3dd2f146102965780633711d9fb146102ad5780633f4ba83a146102d857806346afbc1b146102e05780634bb278f3146102f357600080fd5b806301681a62146102215780630d4ec845146102365780631c908d9814610249578063240877101461025c575b600080fd5b61023461022f366004611ac6565b6104f0565b005b610234610244366004611ac6565b610667565b610234610257366004611ac6565b6106db565b61027f61026a366004611ac6565b60a36020526000908152604090205460ff1681565b60405160ff90911681526020015b60405180910390f35b61029f60a05481565b60405190815260200161028d565b6099546102c0906001600160401b031681565b6040516001600160401b03909116815260200161028d565b610234610786565b6102346102ee366004611af8565b6107ba565b61023461088d565b61029f610a30565b61029f609f5481565b60995461032690600160401b90046001600160a01b031681565b6040516001600160a01b03909116815260200161028d565b61029f61034c366004611b13565b610bcc565b60655460ff165b604051901515815260200161028d565b61029f609e5481565b61029f61037f366004611ac6565b609b6020526000908152604090205481565b609854610326906001600160a01b031681565b610234610c63565b6103586103ba366004611ac6565b609c6020526000908152604090205460ff1681565b610234610c97565b60a154610326906001600160a01b031681565b6033546001600160a01b0316610326565b610358610cc9565b61029f610411366004611b3b565b610d10565b6098546102c090600160a01b90046001600160401b031681565b61029f609a5481565b61029f611105565b61023461044f366004611af8565b611126565b60995461035890600160e01b900460ff1681565b609754610326906001600160a01b031681565b610234610489366004611bc6565b6111fe565b61029f609d5481565b6102346104a5366004611ac6565b6113e0565b6102346104b8366004611b13565b61147b565b6102346104cb366004611b13565b611504565b61029f6104de366004611c4f565b60a26020526000908152604090205481565b6033546001600160a01b031633146105235760405162461bcd60e51b815260040161051a90611c6c565b60405180910390fd5b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a0823190602401602060405180830381865afa15801561056a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061058e9190611ca1565b6097549091506001600160a01b03838116911614156105c9576000609f54609e546105b99190611cd0565b90506105c58183611cd0565b9150505b6000811161060c5760405162461bcd60e51b815260206004820152601060248201526f06e6f7468696e6720746f2073776565760841b604482015260640161051a565b6106206001600160a01b0383163383611583565b816001600160a01b03167f1b94d65e3a03a98b13e90142a41884547fdd622b7f14a4daf94f6338e2e85cf08260405161065b91815260200190565b60405180910390a25050565b6033546001600160a01b031633146106915760405162461bcd60e51b815260040161051a90611c6c565b60a180546001600160a01b0319166001600160a01b0383169081179091556040517f650070ede2ab0ad22a57e15b88d668804b8f7c361a1ee8560093705f4d78abdd90600090a250565b6033546001600160a01b031633146107055760405162461bcd60e51b815260040161051a90611c6c565b6001600160a01b03811661072b5760405162461bcd60e51b815260040161051a90611ce7565b6099805468010000000000000000600160e01b031916600160401b6001600160a01b038416908102919091179091556040517f22fcd0f303ce9972cac865bf07f264510ba86521618196591c01ad233f97826690600090a250565b6033546001600160a01b031633146107b05760405162461bcd60e51b815260040161051a90611c6c565b6107b86115eb565b565b6033546001600160a01b031633146107e45760405162461bcd60e51b815260040161051a90611c6c565b6000816001600160401b03161161080d5760405162461bcd60e51b815260040161051a90611d33565b609954600160e01b900460ff16156108375760405162461bcd60e51b815260040161051a90611d80565b6099805467ffffffffffffffff19166001600160401b0383169081179091556040519081527f63d2e06731cd563c7ce4ee2e4227ead624e21cfb8bde59079d343e63ec3baf5f906020015b60405180910390a150565b6033546001600160a01b031633146108b75760405162461bcd60e51b815260040161051a90611c6c565b609954600160e01b900460ff16156108e15760405162461bcd60e51b815260040161051a90611d80565b6108e9610cc9565b6109355760405162461bcd60e51b815260206004820152601760248201527f546f6b656e53616c653a206e6f742066696e6973686564000000000000000000604482015260640161051a565b609e546097546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015610980573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a49190611ca1565b10156109f25760405162461bcd60e51b815260206004820152601d60248201527f546f6b656e53616c653a206e6f7420656e6f7567682062616c616e6365000000604482015260640161051a565b6099805460ff60e01b1916600160e01b1790556040517f6823b073d48d6e3a7d385eeb601452d680e74bb46afe3255a7d778f3a9b1768190600090a1565b6000610a3e60655460ff1690565b15610a5b5760405162461bcd60e51b815260040161051a90611db7565b609954600160e01b900460ff16610aa95760405162461bcd60e51b81526020600482015260126024820152711cd85b19481b9bdd08199a5b985b1a5e995960721b604482015260640161051a565b336000908152609c602052604090205460ff1615610afb5760405162461bcd60e51b815260206004820152600f60248201526e185b1c9958591e4818db185a5b5959608a1b604482015260640161051a565b50336000908152609b602052604090205480610b4c5760405162461bcd60e51b815260206004820152601060248201526f6e6f7468696e6720746f20636c61696d60801b604482015260640161051a565b336000908152609c60205260408120805460ff19166001179055609f8054839290610b78908490611de1565b9091555050609754610b94906001600160a01b03163383611583565b60405181815233907f47cee97cb7acd717b3c0aa1435d004cd5b3c8c57d70dbceb4e4458bbd60e39d49060200160405180910390a290565b609a546097546040805163313ce56760e01b81529051600093926001600160a01b03169163313ce5679160048083019260209291908290030181865afa158015610c1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3e9190611df9565b610c4990600a611efa565b610c539084611f09565b610c5d9190611f28565b92915050565b6033546001600160a01b03163314610c8d5760405162461bcd60e51b815260040161051a90611c6c565b6107b8600061167e565b6033546001600160a01b03163314610cc15760405162461bcd60e51b815260040161051a90611c6c565b6107b86116d0565b609954609854600091610cf0916001600160401b0391821691600160a01b90910416611f4a565b6001600160401b031642101580610d0b575060a054609d5410155b905090565b6000610d1e60655460ff1690565b15610d3b5760405162461bcd60e51b815260040161051a90611db7565b60985442600160a01b9091046001600160401b03161115610d975760405162461bcd60e51b8152602060048201526016602482015275151bdad95b94d85b194e881b9bdd081cdd185c9d195960521b604482015260640161051a565b609954609854610dba916001600160401b0390811691600160a01b900416611f4a565b6001600160401b03164210610e115760405162461bcd60e51b815260206004820152601860248201527f546f6b656e53616c653a20616c726561647920656e6465640000000000000000604482015260640161051a565b60008511610e615760405162461bcd60e51b815260206004820152601c60248201527f5f746f6b656e496e416d6f756e742073686f756c64206265203e203000000000604482015260640161051a565b60a05485609d54610e729190611de1565b1115610eb85760405162461bcd60e51b81526020600482015260156024820152741d1bdd185b08185b5bdd5b9d08195e18d959591959605a1b604482015260640161051a565b60a1546001600160a01b031615610f7b5760a154604051631849250160e21b81526001600160a01b0390911690636124940490610efd90339087908790600401611f75565b602060405180830381865afa158015610f1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f3e9190611fc2565b610f7b5760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08185d5d1a1bdc9a5e995960921b604482015260640161051a565b336000908152609b60205260409020548015610ffa5733600090815260a3602052604090205460ff868116911614610ff55760405162461bcd60e51b815260206004820152601c60248201527f63616e277420766f746520666f72206d756c7469706c652064616f7300000000604482015260640161051a565b611017565b33600090815260a360205260409020805460ff191660ff87161790555b61102086610bcc565b915061102c8282611de1565b336000908152609b602090815260408083209390935560ff8816825260a29052908120805484929061105f908490611de1565b9250508190555085609d60008282546110789190611de1565b9250508190555081609e60008282546110919190611de1565b90915550506099546098546110bc916001600160a01b03918216913391600160401b90041689611728565b604080518781526020810184905260ff87169133917f1ec0c95078c890035e941915909bcfe875eca2b01352f0caaf74680fe1d297ce910160405180910390a350949350505050565b600060a054609d54101561112357609d5460a054610d0b9190611cd0565b90565b6033546001600160a01b031633146111505760405162461bcd60e51b815260040161051a90611c6c565b42816001600160401b031610156111795760405162461bcd60e51b815260040161051a90611fe4565b609954600160e01b900460ff16156111a35760405162461bcd60e51b815260040161051a90611d80565b6098805467ffffffffffffffff60a01b1916600160a01b6001600160401b038416908102919091179091556040519081527fe91b422c48d1f63476e86148f126e887ed21d449f2881a51c364f3519e73a89490602001610882565b600054610100900460ff166112195760005460ff161561121d565b303b155b6112805760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161051a565b600054610100900460ff161580156112a2576000805461ffff19166101011790555b42876001600160401b031610156112cb5760405162461bcd60e51b815260040161051a90611fe4565b6001600160401b0386166112f15760405162461bcd60e51b815260040161051a90611d33565b600085116113115760405162461bcd60e51b815260040161051a90612030565b6001600160a01b0384166113375760405162461bcd60e51b815260040161051a90611ce7565b61133f611766565b61134761179d565b609780546001600160a01b03808c166001600160a01b031992831617909255609880546001600160401b03808c16600160a01b026001600160e01b03199283168e8716171790925560998054609a8b9055898616600160401b029216928b169290921717905560a180549286169290911691909117905560a082905580156113d5576000805461ff00191690555b505050505050505050565b6033546001600160a01b0316331461140a5760405162461bcd60e51b815260040161051a90611c6c565b6001600160a01b03811661146f5760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161051a565b6114788161167e565b50565b6033546001600160a01b031633146114a55760405162461bcd60e51b815260040161051a90611c6c565b609954600160e01b900460ff16156114cf5760405162461bcd60e51b815260040161051a90611d80565b60a08190556040518181527fc03e813ac3c72b419d55e3347033254b7730e1c13579c72e3b0258faa1c228a790602001610882565b6033546001600160a01b0316331461152e5760405162461bcd60e51b815260040161051a90611c6c565b6000811161154e5760405162461bcd60e51b815260040161051a90612030565b609a8190556040518181527f1547cf4f4e088a233f379adf2a2ca21d8007a1a0273ac91fa1ec95d0c8e8414b90602001610882565b6040516001600160a01b0383166024820152604481018290526115e690849063a9059cbb60e01b906064015b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526117d4565b505050565b60655460ff166116345760405162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604482015260640161051a565b6065805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b60655460ff16156116f35760405162461bcd60e51b815260040161051a90611db7565b6065805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586116613390565b6040516001600160a01b03808516602483015283166044820152606481018290526117609085906323b872dd60e01b906084016115af565b50505050565b600054610100900460ff1661178d5760405162461bcd60e51b815260040161051a90612075565b6117956118a6565b6107b86118cd565b600054610100900460ff166117c45760405162461bcd60e51b815260040161051a90612075565b6117cc6118a6565b6107b86118fd565b6000611829826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166119309092919063ffffffff16565b8051909150156115e657808060200190518101906118479190611fc2565b6115e65760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161051a565b600054610100900460ff166107b85760405162461bcd60e51b815260040161051a90612075565b600054610100900460ff166118f45760405162461bcd60e51b815260040161051a90612075565b6107b83361167e565b600054610100900460ff166119245760405162461bcd60e51b815260040161051a90612075565b6065805460ff19169055565b606061193f8484600085611949565b90505b9392505050565b6060824710156119aa5760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b606482015260840161051a565b843b6119f85760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161051a565b600080866001600160a01b03168587604051611a1491906120ec565b60006040518083038185875af1925050503d8060008114611a51576040519150601f19603f3d011682016040523d82523d6000602084013e611a56565b606091505b5091509150611a66828286611a71565b979650505050505050565b60608315611a80575081611942565b825115611a905782518084602001fd5b8160405162461bcd60e51b815260040161051a9190612108565b80356001600160a01b0381168114611ac157600080fd5b919050565b600060208284031215611ad857600080fd5b61194282611aaa565b80356001600160401b0381168114611ac157600080fd5b600060208284031215611b0a57600080fd5b61194282611ae1565b600060208284031215611b2557600080fd5b5035919050565b60ff8116811461147857600080fd5b60008060008060608587031215611b5157600080fd5b843593506020850135611b6381611b2c565b925060408501356001600160401b0380821115611b7f57600080fd5b818701915087601f830112611b9357600080fd5b813581811115611ba257600080fd5b8860208260051b8501011115611bb757600080fd5b95989497505060200194505050565b600080600080600080600080610100898b031215611be357600080fd5b611bec89611aaa565b9750611bfa60208a01611aaa565b9650611c0860408a01611ae1565b9550611c1660608a01611ae1565b945060808901359350611c2b60a08a01611aaa565b9250611c3960c08a01611aaa565b915060e089013590509295985092959890939650565b600060208284031215611c6157600080fd5b813561194281611b2c565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b600060208284031215611cb357600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b600082821015611ce257611ce2611cba565b500390565b6020808252602c908201527f546f6b656e53616c653a2073616c6520726563697069656e742073686f756c6460408201526b206e6f74206265207a65726f60a01b606082015260800190565b6020808252602d908201527f546f6b656e53616c653a207468652073616c65206475726174696f6e206d757360408201526c74206e6f74206265207a65726f60981b606082015260800190565b6020808252601c908201527f546f6b656e53616c653a20616c72656164792066696e616c697a656400000000604082015260600190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b60008219821115611df457611df4611cba565b500190565b600060208284031215611e0b57600080fd5b815161194281611b2c565b600181815b80851115611e51578160001904821115611e3757611e37611cba565b80851615611e4457918102915b93841c9390800290611e1b565b509250929050565b600082611e6857506001610c5d565b81611e7557506000610c5d565b8160018114611e8b5760028114611e9557611eb1565b6001915050610c5d565b60ff841115611ea657611ea6611cba565b50506001821b610c5d565b5060208310610133831016604e8410600b8410161715611ed4575081810a610c5d565b611ede8383611e16565b8060001904821115611ef257611ef2611cba565b029392505050565b600061194260ff841683611e59565b6000816000190483118215151615611f2357611f23611cba565b500290565b600082611f4557634e487b7160e01b600052601260045260246000fd5b500490565b60006001600160401b03808316818516808303821115611f6c57611f6c611cba565b01949350505050565b6001600160a01b0384168152604060208201819052810182905260006001600160fb1b03831115611fa557600080fd5b8260051b8085606085013760009201606001918252509392505050565b600060208284031215611fd457600080fd5b8151801515811461194257600080fd5b6020808252602c908201527f546f6b656e53616c653a2073746172742064617465206d6179206e6f7420626560408201526b081a5b881d1a19481c185cdd60a21b606082015260800190565b60208082526025908201527f546f6b656e53616c653a20746865207072696365206d757374206e6f74206265604082015264207a65726f60d81b606082015260800190565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b60005b838110156120db5781810151838201526020016120c3565b838111156117605750506000910152565b600082516120fe8184602087016120c0565b9190910192915050565b60208152600082518060208401526121278160408501602087016120c0565b601f01601f1916919091016040019291505056fea264697066735822122000722931bc781ffb6ddb159ebabd4e4dcbcd156eb4b659ddb7d81913ba2ccb4f64736f6c634300080b0033
```

These are the byte code differences between the two versions

| PC.Orig      | Operation.Orig              | Gas.Orig | PC.New       | Operation.New               | Gas.New |
| -            | -                           | :-:      | -            | -                           | :-:     |
| 4811(0x12cb) | JUMPDEST(0x5b)@0x12cb       | 1        | 4811(0x12cb) | JUMPDEST(0x5b)@0x12cb       | 1       |
| 4812(0x12cc) | PUSH1(0x60) ["0x00"]        | 3        | 4812(0x12cc) | PUSH1(0x60) ["0x01"]        | 3       |
| 4814(0x12ce) | DUP7(0x86)                  | 3        |              |                             |         |
| 4815(0x12cf) | PUSH1(0x60) ["0x01"]        | 3        | 4814(0x12ce) | PUSH1(0x60) ["0x01"]        | 3       |
| 4817(0x12d1) | PUSH1(0x60) ["0x01"]        | 3        | 4816(0x12d0) | PUSH1(0x60) ["0x40"]        | 3       |
| 4819(0x12d3) | PUSH1(0x60) ["0x40"]        | 3        |              |                             |         |
| 4821(0x12d5) | SHL(0x1b)                   | 3        | 4818(0x12d2) | SHL(0x1b)                   | 3       |
| 4822(0x12d6) | SUB(0x3)                    | 3        | 4819(0x12d3) | SUB(0x3)                    | 3       |
|              |                             |          | 4820(0x12d4) | DUP7(0x86)                  | 3       |
| 4823(0x12d7) | AND(0x16)                   | 3        | 4821(0x12d5) | AND(0x16)                   | 3       |
| 4824(0x12d8) | GT(0x11)                    | 3        |              |                             |         |
| 4825(0x12d9) | PUSH2(0x61) ["0x12","0xf4"] | 3        | 4822(0x12d6) | PUSH2(0x61) ["0x12","0xf1"] | 3       |
| 4828(0x12dc) | JUMPI(0x57)                 | 10       | 4825(0x12d9) | JUMPI(0x57)                 | 10      |
|              |                             |          |              |                             |         |
|              | Total.Orig:                 | 41       |              | Total.New:                  | 35      |

The suggested change provides a savings of 6 gas

```
$ diff forgeResults.orig forgeResults.new
75c75
< │ 1714599                       ┆ 8596            ┆        ┆        ┆        ┆         │
---
> │ 1713999                       ┆ 8593            ┆        ┆        ┆        ┆         │
99c99
< │ initialize                    ┆ 1359            ┆ 179527 ┆ 183671 ┆ 183671 ┆ 44      │
---
> │ initialize                    ┆ 1359            ┆ 179521 ┆ 183665 ┆ 183665 ┆ 44      │
148c148
< │ 659571                               ┆ 4313            ┆     ┆        ┆     ┆         │
---
> │ 659565                               ┆ 4313            ┆     ┆        ┆     ┆         │
```


### 2. [TokenSaleUpgradeable.sol:L114](https://github.com/code-423n4/2022-02-badger-citadel/blob/84596551d62f243d13fcb2d486346dde08002f7b/contracts/TokenSaleUpgradeable.sol#L114)
```solidity
        require(_tokenOutPrice > 0, "TokenSale: the price must not be zero");
```

This is the diff of the original version of `contracts/TokenSaleUpgradeable.sol` and a new, optimized version
```solidity
114c114
<         require(_tokenOutPrice > 0, "TokenSale: the price must not be zero");
---
>         require(_tokenOutPrice != 0, "TokenSale: the price must not be zero");
```
These are the original byte code, followed by the byte code compiled from the new version
```
608060405234801561001057600080fd5b506004361061021c5760003560e01c806373b2e80e11610125578063b3a891c9116100ad578063e9a2f2e01161007c578063e9a2f2e01461048e578063f2fde38b14610497578063f49af3fa146104aa578063fd7e60a9146104bd578063fee839c6146104d057600080fd5b8063b3a891c914610441578063b3f05b9714610454578063d0202d3b14610468578063dacec66e1461047b57600080fd5b80639b8906ae116100f45780639b8906ae146103fb578063a1d9eecf14610403578063ab0bcc4114610416578063abf017e914610430578063afb8a52e1461043957600080fd5b806373b2e80e146103ac5780638456cb59146103cf5780638b234215146103d75780638da5cb5b146103ea57600080fd5b80634e71d92d116101a85780635c975abb116101775780635c975abb14610351578063618426fc1461036857806368c91d8f146103715780636daf390b14610391578063715018a6146103a457600080fd5b80634e71d92d146102fb578063564f0848146103035780635b019b761461030c5780635c1952171461033e57600080fd5b806324f3dd2f116101ef57806324f3dd2f146102965780633711d9fb146102ad5780633f4ba83a146102d857806346afbc1b146102e05780634bb278f3146102f357600080fd5b806301681a62146102215780630d4ec845146102365780631c908d9814610249578063240877101461025c575b600080fd5b61023461022f366004611ac9565b6104f0565b005b610234610244366004611ac9565b610667565b610234610257366004611ac9565b6106db565b61027f61026a366004611ac9565b60a36020526000908152604090205460ff1681565b60405160ff90911681526020015b60405180910390f35b61029f60a05481565b60405190815260200161028d565b6099546102c0906001600160401b031681565b6040516001600160401b03909116815260200161028d565b610234610786565b6102346102ee366004611afb565b6107ba565b61023461088d565b61029f610a30565b61029f609f5481565b60995461032690600160401b90046001600160a01b031681565b6040516001600160a01b03909116815260200161028d565b61029f61034c366004611b16565b610bcc565b60655460ff165b604051901515815260200161028d565b61029f609e5481565b61029f61037f366004611ac9565b609b6020526000908152604090205481565b609854610326906001600160a01b031681565b610234610c63565b6103586103ba366004611ac9565b609c6020526000908152604090205460ff1681565b610234610c97565b60a154610326906001600160a01b031681565b6033546001600160a01b0316610326565b610358610cc9565b61029f610411366004611b3e565b610d10565b6098546102c090600160a01b90046001600160401b031681565b61029f609a5481565b61029f611105565b61023461044f366004611afb565b611126565b60995461035890600160e01b900460ff1681565b609754610326906001600160a01b031681565b610234610489366004611bc9565b6111fe565b61029f609d5481565b6102346104a5366004611ac9565b6113e3565b6102346104b8366004611b16565b61147e565b6102346104cb366004611b16565b611507565b61029f6104de366004611c52565b60a26020526000908152604090205481565b6033546001600160a01b031633146105235760405162461bcd60e51b815260040161051a90611c6f565b60405180910390fd5b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a0823190602401602060405180830381865afa15801561056a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061058e9190611ca4565b6097549091506001600160a01b03838116911614156105c9576000609f54609e546105b99190611cd3565b90506105c58183611cd3565b9150505b6000811161060c5760405162461bcd60e51b815260206004820152601060248201526f06e6f7468696e6720746f2073776565760841b604482015260640161051a565b6106206001600160a01b0383163383611586565b816001600160a01b03167f1b94d65e3a03a98b13e90142a41884547fdd622b7f14a4daf94f6338e2e85cf08260405161065b91815260200190565b60405180910390a25050565b6033546001600160a01b031633146106915760405162461bcd60e51b815260040161051a90611c6f565b60a180546001600160a01b0319166001600160a01b0383169081179091556040517f650070ede2ab0ad22a57e15b88d668804b8f7c361a1ee8560093705f4d78abdd90600090a250565b6033546001600160a01b031633146107055760405162461bcd60e51b815260040161051a90611c6f565b6001600160a01b03811661072b5760405162461bcd60e51b815260040161051a90611cea565b6099805468010000000000000000600160e01b031916600160401b6001600160a01b038416908102919091179091556040517f22fcd0f303ce9972cac865bf07f264510ba86521618196591c01ad233f97826690600090a250565b6033546001600160a01b031633146107b05760405162461bcd60e51b815260040161051a90611c6f565b6107b86115ee565b565b6033546001600160a01b031633146107e45760405162461bcd60e51b815260040161051a90611c6f565b6000816001600160401b03161161080d5760405162461bcd60e51b815260040161051a90611d36565b609954600160e01b900460ff16156108375760405162461bcd60e51b815260040161051a90611d83565b6099805467ffffffffffffffff19166001600160401b0383169081179091556040519081527f63d2e06731cd563c7ce4ee2e4227ead624e21cfb8bde59079d343e63ec3baf5f906020015b60405180910390a150565b6033546001600160a01b031633146108b75760405162461bcd60e51b815260040161051a90611c6f565b609954600160e01b900460ff16156108e15760405162461bcd60e51b815260040161051a90611d83565b6108e9610cc9565b6109355760405162461bcd60e51b815260206004820152601760248201527f546f6b656e53616c653a206e6f742066696e6973686564000000000000000000604482015260640161051a565b609e546097546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015610980573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a49190611ca4565b10156109f25760405162461bcd60e51b815260206004820152601d60248201527f546f6b656e53616c653a206e6f7420656e6f7567682062616c616e6365000000604482015260640161051a565b6099805460ff60e01b1916600160e01b1790556040517f6823b073d48d6e3a7d385eeb601452d680e74bb46afe3255a7d778f3a9b1768190600090a1565b6000610a3e60655460ff1690565b15610a5b5760405162461bcd60e51b815260040161051a90611dba565b609954600160e01b900460ff16610aa95760405162461bcd60e51b81526020600482015260126024820152711cd85b19481b9bdd08199a5b985b1a5e995960721b604482015260640161051a565b336000908152609c602052604090205460ff1615610afb5760405162461bcd60e51b815260206004820152600f60248201526e185b1c9958591e4818db185a5b5959608a1b604482015260640161051a565b50336000908152609b602052604090205480610b4c5760405162461bcd60e51b815260206004820152601060248201526f6e6f7468696e6720746f20636c61696d60801b604482015260640161051a565b336000908152609c60205260408120805460ff19166001179055609f8054839290610b78908490611de4565b9091555050609754610b94906001600160a01b03163383611586565b60405181815233907f47cee97cb7acd717b3c0aa1435d004cd5b3c8c57d70dbceb4e4458bbd60e39d49060200160405180910390a290565b609a546097546040805163313ce56760e01b81529051600093926001600160a01b03169163313ce5679160048083019260209291908290030181865afa158015610c1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3e9190611dfc565b610c4990600a611efd565b610c539084611f0c565b610c5d9190611f2b565b92915050565b6033546001600160a01b03163314610c8d5760405162461bcd60e51b815260040161051a90611c6f565b6107b86000611681565b6033546001600160a01b03163314610cc15760405162461bcd60e51b815260040161051a90611c6f565b6107b86116d3565b609954609854600091610cf0916001600160401b0391821691600160a01b90910416611f4d565b6001600160401b031642101580610d0b575060a054609d5410155b905090565b6000610d1e60655460ff1690565b15610d3b5760405162461bcd60e51b815260040161051a90611dba565b60985442600160a01b9091046001600160401b03161115610d975760405162461bcd60e51b8152602060048201526016602482015275151bdad95b94d85b194e881b9bdd081cdd185c9d195960521b604482015260640161051a565b609954609854610dba916001600160401b0390811691600160a01b900416611f4d565b6001600160401b03164210610e115760405162461bcd60e51b815260206004820152601860248201527f546f6b656e53616c653a20616c726561647920656e6465640000000000000000604482015260640161051a565b60008511610e615760405162461bcd60e51b815260206004820152601c60248201527f5f746f6b656e496e416d6f756e742073686f756c64206265203e203000000000604482015260640161051a565b60a05485609d54610e729190611de4565b1115610eb85760405162461bcd60e51b81526020600482015260156024820152741d1bdd185b08185b5bdd5b9d08195e18d959591959605a1b604482015260640161051a565b60a1546001600160a01b031615610f7b5760a154604051631849250160e21b81526001600160a01b0390911690636124940490610efd90339087908790600401611f78565b602060405180830381865afa158015610f1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f3e9190611fc5565b610f7b5760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08185d5d1a1bdc9a5e995960921b604482015260640161051a565b336000908152609b60205260409020548015610ffa5733600090815260a3602052604090205460ff868116911614610ff55760405162461bcd60e51b815260206004820152601c60248201527f63616e277420766f746520666f72206d756c7469706c652064616f7300000000604482015260640161051a565b611017565b33600090815260a360205260409020805460ff191660ff87161790555b61102086610bcc565b915061102c8282611de4565b336000908152609b602090815260408083209390935560ff8816825260a29052908120805484929061105f908490611de4565b9250508190555085609d60008282546110789190611de4565b9250508190555081609e60008282546110919190611de4565b90915550506099546098546110bc916001600160a01b03918216913391600160401b9004168961172b565b604080518781526020810184905260ff87169133917f1ec0c95078c890035e941915909bcfe875eca2b01352f0caaf74680fe1d297ce910160405180910390a350949350505050565b600060a054609d54101561112357609d5460a054610d0b9190611cd3565b90565b6033546001600160a01b031633146111505760405162461bcd60e51b815260040161051a90611c6f565b42816001600160401b031610156111795760405162461bcd60e51b815260040161051a90611fe7565b609954600160e01b900460ff16156111a35760405162461bcd60e51b815260040161051a90611d83565b6098805467ffffffffffffffff60a01b1916600160a01b6001600160401b038416908102919091179091556040519081527fe91b422c48d1f63476e86148f126e887ed21d449f2881a51c364f3519e73a89490602001610882565b600054610100900460ff166112195760005460ff161561121d565b303b155b6112805760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161051a565b600054610100900460ff161580156112a2576000805461ffff19166101011790555b42876001600160401b031610156112cb5760405162461bcd60e51b815260040161051a90611fe7565b6000866001600160401b0316116112f45760405162461bcd60e51b815260040161051a90611d36565b600085116113145760405162461bcd60e51b815260040161051a90612033565b6001600160a01b03841661133a5760405162461bcd60e51b815260040161051a90611cea565b611342611769565b61134a6117a0565b609780546001600160a01b03808c166001600160a01b031992831617909255609880546001600160401b03808c16600160a01b026001600160e01b03199283168e8716171790925560998054609a8b9055898616600160401b029216928b169290921717905560a180549286169290911691909117905560a082905580156113d8576000805461ff00191690555b505050505050505050565b6033546001600160a01b0316331461140d5760405162461bcd60e51b815260040161051a90611c6f565b6001600160a01b0381166114725760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161051a565b61147b81611681565b50565b6033546001600160a01b031633146114a85760405162461bcd60e51b815260040161051a90611c6f565b609954600160e01b900460ff16156114d25760405162461bcd60e51b815260040161051a90611d83565b60a08190556040518181527fc03e813ac3c72b419d55e3347033254b7730e1c13579c72e3b0258faa1c228a790602001610882565b6033546001600160a01b031633146115315760405162461bcd60e51b815260040161051a90611c6f565b600081116115515760405162461bcd60e51b815260040161051a90612033565b609a8190556040518181527f1547cf4f4e088a233f379adf2a2ca21d8007a1a0273ac91fa1ec95d0c8e8414b90602001610882565b6040516001600160a01b0383166024820152604481018290526115e990849063a9059cbb60e01b906064015b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526117d7565b505050565b60655460ff166116375760405162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604482015260640161051a565b6065805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b60655460ff16156116f65760405162461bcd60e51b815260040161051a90611dba565b6065805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586116643390565b6040516001600160a01b03808516602483015283166044820152606481018290526117639085906323b872dd60e01b906084016115b2565b50505050565b600054610100900460ff166117905760405162461bcd60e51b815260040161051a90612078565b6117986118a9565b6107b86118d0565b600054610100900460ff166117c75760405162461bcd60e51b815260040161051a90612078565b6117cf6118a9565b6107b8611900565b600061182c826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166119339092919063ffffffff16565b8051909150156115e9578080602001905181019061184a9190611fc5565b6115e95760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161051a565b600054610100900460ff166107b85760405162461bcd60e51b815260040161051a90612078565b600054610100900460ff166118f75760405162461bcd60e51b815260040161051a90612078565b6107b833611681565b600054610100900460ff166119275760405162461bcd60e51b815260040161051a90612078565b6065805460ff19169055565b6060611942848460008561194c565b90505b9392505050565b6060824710156119ad5760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b606482015260840161051a565b843b6119fb5760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161051a565b600080866001600160a01b03168587604051611a1791906120ef565b60006040518083038185875af1925050503d8060008114611a54576040519150601f19603f3d011682016040523d82523d6000602084013e611a59565b606091505b5091509150611a69828286611a74565b979650505050505050565b60608315611a83575081611945565b825115611a935782518084602001fd5b8160405162461bcd60e51b815260040161051a919061210b565b80356001600160a01b0381168114611ac457600080fd5b919050565b600060208284031215611adb57600080fd5b61194582611aad565b80356001600160401b0381168114611ac457600080fd5b600060208284031215611b0d57600080fd5b61194582611ae4565b600060208284031215611b2857600080fd5b5035919050565b60ff8116811461147b57600080fd5b60008060008060608587031215611b5457600080fd5b843593506020850135611b6681611b2f565b925060408501356001600160401b0380821115611b8257600080fd5b818701915087601f830112611b9657600080fd5b813581811115611ba557600080fd5b8860208260051b8501011115611bba57600080fd5b95989497505060200194505050565b600080600080600080600080610100898b031215611be657600080fd5b611bef89611aad565b9750611bfd60208a01611aad565b9650611c0b60408a01611ae4565b9550611c1960608a01611ae4565b945060808901359350611c2e60a08a01611aad565b9250611c3c60c08a01611aad565b915060e089013590509295985092959890939650565b600060208284031215611c6457600080fd5b813561194581611b2f565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b600060208284031215611cb657600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b600082821015611ce557611ce5611cbd565b500390565b6020808252602c908201527f546f6b656e53616c653a2073616c6520726563697069656e742073686f756c6460408201526b206e6f74206265207a65726f60a01b606082015260800190565b6020808252602d908201527f546f6b656e53616c653a207468652073616c65206475726174696f6e206d757360408201526c74206e6f74206265207a65726f60981b606082015260800190565b6020808252601c908201527f546f6b656e53616c653a20616c72656164792066696e616c697a656400000000604082015260600190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b60008219821115611df757611df7611cbd565b500190565b600060208284031215611e0e57600080fd5b815161194581611b2f565b600181815b80851115611e54578160001904821115611e3a57611e3a611cbd565b80851615611e4757918102915b93841c9390800290611e1e565b509250929050565b600082611e6b57506001610c5d565b81611e7857506000610c5d565b8160018114611e8e5760028114611e9857611eb4565b6001915050610c5d565b60ff841115611ea957611ea9611cbd565b50506001821b610c5d565b5060208310610133831016604e8410600b8410161715611ed7575081810a610c5d565b611ee18383611e19565b8060001904821115611ef557611ef5611cbd565b029392505050565b600061194560ff841683611e5c565b6000816000190483118215151615611f2657611f26611cbd565b500290565b600082611f4857634e487b7160e01b600052601260045260246000fd5b500490565b60006001600160401b03808316818516808303821115611f6f57611f6f611cbd565b01949350505050565b6001600160a01b0384168152604060208201819052810182905260006001600160fb1b03831115611fa857600080fd5b8260051b8085606085013760009201606001918252509392505050565b600060208284031215611fd757600080fd5b8151801515811461194557600080fd5b6020808252602c908201527f546f6b656e53616c653a2073746172742064617465206d6179206e6f7420626560408201526b081a5b881d1a19481c185cdd60a21b606082015260800190565b60208082526025908201527f546f6b656e53616c653a20746865207072696365206d757374206e6f74206265604082015264207a65726f60d81b606082015260800190565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b60005b838110156120de5781810151838201526020016120c6565b838111156117635750506000910152565b600082516121018184602087016120c3565b9190910192915050565b602081526000825180602084015261212a8160408501602087016120c3565b601f01601f1916919091016040019291505056fea26469706673582212203187f9de1bc94f6ba8ca6ffb7e2438ccb59c8790bd234e8f23ce26e6bff8088664736f6c634300080b0033
```
```
608060405234801561001057600080fd5b506004361061021c5760003560e01c806373b2e80e11610125578063b3a891c9116100ad578063e9a2f2e01161007c578063e9a2f2e01461048e578063f2fde38b14610497578063f49af3fa146104aa578063fd7e60a9146104bd578063fee839c6146104d057600080fd5b8063b3a891c914610441578063b3f05b9714610454578063d0202d3b14610468578063dacec66e1461047b57600080fd5b80639b8906ae116100f45780639b8906ae146103fb578063a1d9eecf14610403578063ab0bcc4114610416578063abf017e914610430578063afb8a52e1461043957600080fd5b806373b2e80e146103ac5780638456cb59146103cf5780638b234215146103d75780638da5cb5b146103ea57600080fd5b80634e71d92d116101a85780635c975abb116101775780635c975abb14610351578063618426fc1461036857806368c91d8f146103715780636daf390b14610391578063715018a6146103a457600080fd5b80634e71d92d146102fb578063564f0848146103035780635b019b761461030c5780635c1952171461033e57600080fd5b806324f3dd2f116101ef57806324f3dd2f146102965780633711d9fb146102ad5780633f4ba83a146102d857806346afbc1b146102e05780634bb278f3146102f357600080fd5b806301681a62146102215780630d4ec845146102365780631c908d9814610249578063240877101461025c575b600080fd5b61023461022f366004611ac6565b6104f0565b005b610234610244366004611ac6565b610667565b610234610257366004611ac6565b6106db565b61027f61026a366004611ac6565b60a36020526000908152604090205460ff1681565b60405160ff90911681526020015b60405180910390f35b61029f60a05481565b60405190815260200161028d565b6099546102c0906001600160401b031681565b6040516001600160401b03909116815260200161028d565b610234610786565b6102346102ee366004611af8565b6107ba565b61023461088d565b61029f610a30565b61029f609f5481565b60995461032690600160401b90046001600160a01b031681565b6040516001600160a01b03909116815260200161028d565b61029f61034c366004611b13565b610bcc565b60655460ff165b604051901515815260200161028d565b61029f609e5481565b61029f61037f366004611ac6565b609b6020526000908152604090205481565b609854610326906001600160a01b031681565b610234610c63565b6103586103ba366004611ac6565b609c6020526000908152604090205460ff1681565b610234610c97565b60a154610326906001600160a01b031681565b6033546001600160a01b0316610326565b610358610cc9565b61029f610411366004611b3b565b610d10565b6098546102c090600160a01b90046001600160401b031681565b61029f609a5481565b61029f611105565b61023461044f366004611af8565b611126565b60995461035890600160e01b900460ff1681565b609754610326906001600160a01b031681565b610234610489366004611bc6565b6111fe565b61029f609d5481565b6102346104a5366004611ac6565b6113e0565b6102346104b8366004611b13565b61147b565b6102346104cb366004611b13565b611504565b61029f6104de366004611c4f565b60a26020526000908152604090205481565b6033546001600160a01b031633146105235760405162461bcd60e51b815260040161051a90611c6c565b60405180910390fd5b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a0823190602401602060405180830381865afa15801561056a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061058e9190611ca1565b6097549091506001600160a01b03838116911614156105c9576000609f54609e546105b99190611cd0565b90506105c58183611cd0565b9150505b6000811161060c5760405162461bcd60e51b815260206004820152601060248201526f06e6f7468696e6720746f2073776565760841b604482015260640161051a565b6106206001600160a01b0383163383611583565b816001600160a01b03167f1b94d65e3a03a98b13e90142a41884547fdd622b7f14a4daf94f6338e2e85cf08260405161065b91815260200190565b60405180910390a25050565b6033546001600160a01b031633146106915760405162461bcd60e51b815260040161051a90611c6c565b60a180546001600160a01b0319166001600160a01b0383169081179091556040517f650070ede2ab0ad22a57e15b88d668804b8f7c361a1ee8560093705f4d78abdd90600090a250565b6033546001600160a01b031633146107055760405162461bcd60e51b815260040161051a90611c6c565b6001600160a01b03811661072b5760405162461bcd60e51b815260040161051a90611ce7565b6099805468010000000000000000600160e01b031916600160401b6001600160a01b038416908102919091179091556040517f22fcd0f303ce9972cac865bf07f264510ba86521618196591c01ad233f97826690600090a250565b6033546001600160a01b031633146107b05760405162461bcd60e51b815260040161051a90611c6c565b6107b86115eb565b565b6033546001600160a01b031633146107e45760405162461bcd60e51b815260040161051a90611c6c565b6000816001600160401b03161161080d5760405162461bcd60e51b815260040161051a90611d33565b609954600160e01b900460ff16156108375760405162461bcd60e51b815260040161051a90611d80565b6099805467ffffffffffffffff19166001600160401b0383169081179091556040519081527f63d2e06731cd563c7ce4ee2e4227ead624e21cfb8bde59079d343e63ec3baf5f906020015b60405180910390a150565b6033546001600160a01b031633146108b75760405162461bcd60e51b815260040161051a90611c6c565b609954600160e01b900460ff16156108e15760405162461bcd60e51b815260040161051a90611d80565b6108e9610cc9565b6109355760405162461bcd60e51b815260206004820152601760248201527f546f6b656e53616c653a206e6f742066696e6973686564000000000000000000604482015260640161051a565b609e546097546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015610980573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a49190611ca1565b10156109f25760405162461bcd60e51b815260206004820152601d60248201527f546f6b656e53616c653a206e6f7420656e6f7567682062616c616e6365000000604482015260640161051a565b6099805460ff60e01b1916600160e01b1790556040517f6823b073d48d6e3a7d385eeb601452d680e74bb46afe3255a7d778f3a9b1768190600090a1565b6000610a3e60655460ff1690565b15610a5b5760405162461bcd60e51b815260040161051a90611db7565b609954600160e01b900460ff16610aa95760405162461bcd60e51b81526020600482015260126024820152711cd85b19481b9bdd08199a5b985b1a5e995960721b604482015260640161051a565b336000908152609c602052604090205460ff1615610afb5760405162461bcd60e51b815260206004820152600f60248201526e185b1c9958591e4818db185a5b5959608a1b604482015260640161051a565b50336000908152609b602052604090205480610b4c5760405162461bcd60e51b815260206004820152601060248201526f6e6f7468696e6720746f20636c61696d60801b604482015260640161051a565b336000908152609c60205260408120805460ff19166001179055609f8054839290610b78908490611de1565b9091555050609754610b94906001600160a01b03163383611583565b60405181815233907f47cee97cb7acd717b3c0aa1435d004cd5b3c8c57d70dbceb4e4458bbd60e39d49060200160405180910390a290565b609a546097546040805163313ce56760e01b81529051600093926001600160a01b03169163313ce5679160048083019260209291908290030181865afa158015610c1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3e9190611df9565b610c4990600a611efa565b610c539084611f09565b610c5d9190611f28565b92915050565b6033546001600160a01b03163314610c8d5760405162461bcd60e51b815260040161051a90611c6c565b6107b8600061167e565b6033546001600160a01b03163314610cc15760405162461bcd60e51b815260040161051a90611c6c565b6107b86116d0565b609954609854600091610cf0916001600160401b0391821691600160a01b90910416611f4a565b6001600160401b031642101580610d0b575060a054609d5410155b905090565b6000610d1e60655460ff1690565b15610d3b5760405162461bcd60e51b815260040161051a90611db7565b60985442600160a01b9091046001600160401b03161115610d975760405162461bcd60e51b8152602060048201526016602482015275151bdad95b94d85b194e881b9bdd081cdd185c9d195960521b604482015260640161051a565b609954609854610dba916001600160401b0390811691600160a01b900416611f4a565b6001600160401b03164210610e115760405162461bcd60e51b815260206004820152601860248201527f546f6b656e53616c653a20616c726561647920656e6465640000000000000000604482015260640161051a565b60008511610e615760405162461bcd60e51b815260206004820152601c60248201527f5f746f6b656e496e416d6f756e742073686f756c64206265203e203000000000604482015260640161051a565b60a05485609d54610e729190611de1565b1115610eb85760405162461bcd60e51b81526020600482015260156024820152741d1bdd185b08185b5bdd5b9d08195e18d959591959605a1b604482015260640161051a565b60a1546001600160a01b031615610f7b5760a154604051631849250160e21b81526001600160a01b0390911690636124940490610efd90339087908790600401611f75565b602060405180830381865afa158015610f1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f3e9190611fc2565b610f7b5760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08185d5d1a1bdc9a5e995960921b604482015260640161051a565b336000908152609b60205260409020548015610ffa5733600090815260a3602052604090205460ff868116911614610ff55760405162461bcd60e51b815260206004820152601c60248201527f63616e277420766f746520666f72206d756c7469706c652064616f7300000000604482015260640161051a565b611017565b33600090815260a360205260409020805460ff191660ff87161790555b61102086610bcc565b915061102c8282611de1565b336000908152609b602090815260408083209390935560ff8816825260a29052908120805484929061105f908490611de1565b9250508190555085609d60008282546110789190611de1565b9250508190555081609e60008282546110919190611de1565b90915550506099546098546110bc916001600160a01b03918216913391600160401b90041689611728565b604080518781526020810184905260ff87169133917f1ec0c95078c890035e941915909bcfe875eca2b01352f0caaf74680fe1d297ce910160405180910390a350949350505050565b600060a054609d54101561112357609d5460a054610d0b9190611cd0565b90565b6033546001600160a01b031633146111505760405162461bcd60e51b815260040161051a90611c6c565b42816001600160401b031610156111795760405162461bcd60e51b815260040161051a90611fe4565b609954600160e01b900460ff16156111a35760405162461bcd60e51b815260040161051a90611d80565b6098805467ffffffffffffffff60a01b1916600160a01b6001600160401b038416908102919091179091556040519081527fe91b422c48d1f63476e86148f126e887ed21d449f2881a51c364f3519e73a89490602001610882565b600054610100900460ff166112195760005460ff161561121d565b303b155b6112805760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161051a565b600054610100900460ff161580156112a2576000805461ffff19166101011790555b42876001600160401b031610156112cb5760405162461bcd60e51b815260040161051a90611fe4565b6000866001600160401b0316116112f45760405162461bcd60e51b815260040161051a90611d33565b846113115760405162461bcd60e51b815260040161051a90612030565b6001600160a01b0384166113375760405162461bcd60e51b815260040161051a90611ce7565b61133f611766565b61134761179d565b609780546001600160a01b03808c166001600160a01b031992831617909255609880546001600160401b03808c16600160a01b026001600160e01b03199283168e8716171790925560998054609a8b9055898616600160401b029216928b169290921717905560a180549286169290911691909117905560a082905580156113d5576000805461ff00191690555b505050505050505050565b6033546001600160a01b0316331461140a5760405162461bcd60e51b815260040161051a90611c6c565b6001600160a01b03811661146f5760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161051a565b6114788161167e565b50565b6033546001600160a01b031633146114a55760405162461bcd60e51b815260040161051a90611c6c565b609954600160e01b900460ff16156114cf5760405162461bcd60e51b815260040161051a90611d80565b60a08190556040518181527fc03e813ac3c72b419d55e3347033254b7730e1c13579c72e3b0258faa1c228a790602001610882565b6033546001600160a01b0316331461152e5760405162461bcd60e51b815260040161051a90611c6c565b6000811161154e5760405162461bcd60e51b815260040161051a90612030565b609a8190556040518181527f1547cf4f4e088a233f379adf2a2ca21d8007a1a0273ac91fa1ec95d0c8e8414b90602001610882565b6040516001600160a01b0383166024820152604481018290526115e690849063a9059cbb60e01b906064015b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526117d4565b505050565b60655460ff166116345760405162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604482015260640161051a565b6065805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b60655460ff16156116f35760405162461bcd60e51b815260040161051a90611db7565b6065805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586116613390565b6040516001600160a01b03808516602483015283166044820152606481018290526117609085906323b872dd60e01b906084016115af565b50505050565b600054610100900460ff1661178d5760405162461bcd60e51b815260040161051a90612075565b6117956118a6565b6107b86118cd565b600054610100900460ff166117c45760405162461bcd60e51b815260040161051a90612075565b6117cc6118a6565b6107b86118fd565b6000611829826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166119309092919063ffffffff16565b8051909150156115e657808060200190518101906118479190611fc2565b6115e65760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161051a565b600054610100900460ff166107b85760405162461bcd60e51b815260040161051a90612075565b600054610100900460ff166118f45760405162461bcd60e51b815260040161051a90612075565b6107b83361167e565b600054610100900460ff166119245760405162461bcd60e51b815260040161051a90612075565b6065805460ff19169055565b606061193f8484600085611949565b90505b9392505050565b6060824710156119aa5760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b606482015260840161051a565b843b6119f85760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161051a565b600080866001600160a01b03168587604051611a1491906120ec565b60006040518083038185875af1925050503d8060008114611a51576040519150601f19603f3d011682016040523d82523d6000602084013e611a56565b606091505b5091509150611a66828286611a71565b979650505050505050565b60608315611a80575081611942565b825115611a905782518084602001fd5b8160405162461bcd60e51b815260040161051a9190612108565b80356001600160a01b0381168114611ac157600080fd5b919050565b600060208284031215611ad857600080fd5b61194282611aaa565b80356001600160401b0381168114611ac157600080fd5b600060208284031215611b0a57600080fd5b61194282611ae1565b600060208284031215611b2557600080fd5b5035919050565b60ff8116811461147857600080fd5b60008060008060608587031215611b5157600080fd5b843593506020850135611b6381611b2c565b925060408501356001600160401b0380821115611b7f57600080fd5b818701915087601f830112611b9357600080fd5b813581811115611ba257600080fd5b8860208260051b8501011115611bb757600080fd5b95989497505060200194505050565b600080600080600080600080610100898b031215611be357600080fd5b611bec89611aaa565b9750611bfa60208a01611aaa565b9650611c0860408a01611ae1565b9550611c1660608a01611ae1565b945060808901359350611c2b60a08a01611aaa565b9250611c3960c08a01611aaa565b915060e089013590509295985092959890939650565b600060208284031215611c6157600080fd5b813561194281611b2c565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b600060208284031215611cb357600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b600082821015611ce257611ce2611cba565b500390565b6020808252602c908201527f546f6b656e53616c653a2073616c6520726563697069656e742073686f756c6460408201526b206e6f74206265207a65726f60a01b606082015260800190565b6020808252602d908201527f546f6b656e53616c653a207468652073616c65206475726174696f6e206d757360408201526c74206e6f74206265207a65726f60981b606082015260800190565b6020808252601c908201527f546f6b656e53616c653a20616c72656164792066696e616c697a656400000000604082015260600190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b60008219821115611df457611df4611cba565b500190565b600060208284031215611e0b57600080fd5b815161194281611b2c565b600181815b80851115611e51578160001904821115611e3757611e37611cba565b80851615611e4457918102915b93841c9390800290611e1b565b509250929050565b600082611e6857506001610c5d565b81611e7557506000610c5d565b8160018114611e8b5760028114611e9557611eb1565b6001915050610c5d565b60ff841115611ea657611ea6611cba565b50506001821b610c5d565b5060208310610133831016604e8410600b8410161715611ed4575081810a610c5d565b611ede8383611e16565b8060001904821115611ef257611ef2611cba565b029392505050565b600061194260ff841683611e59565b6000816000190483118215151615611f2357611f23611cba565b500290565b600082611f4557634e487b7160e01b600052601260045260246000fd5b500490565b60006001600160401b03808316818516808303821115611f6c57611f6c611cba565b01949350505050565b6001600160a01b0384168152604060208201819052810182905260006001600160fb1b03831115611fa557600080fd5b8260051b8085606085013760009201606001918252509392505050565b600060208284031215611fd457600080fd5b8151801515811461194257600080fd5b6020808252602c908201527f546f6b656e53616c653a2073746172742064617465206d6179206e6f7420626560408201526b081a5b881d1a19481c185cdd60a21b606082015260800190565b60208082526025908201527f546f6b656e53616c653a20746865207072696365206d757374206e6f74206265604082015264207a65726f60d81b606082015260800190565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b60005b838110156120db5781810151838201526020016120c3565b838111156117605750506000910152565b600082516120fe8184602087016120c0565b9190910192915050565b60208152600082518060208401526121278160408501602087016120c0565b601f01601f1916919091016040019291505056fea2646970667358221220e517844e99782724f3c844a4781ff2a4a91096fc66ecd0cc49751b115f9bb2f664736f6c634300080b0033
```

These are the byte code differences between the two versions

| PC.Orig      | Operation.Orig              | Gas.Orig | PC.New       | Operation.New               | Gas.New |
| -            | -                           | :-:      | -            | -                           | :-:     |
| 4851(0x12f3) | JUMP(0x56)                  | 8        | 4851(0x12f3) | JUMP(0x56)                  | 8       |
| 4852(0x12f4) | JUMPDEST(0x5b)@0x12f4       | 1        | 4852(0x12f4) | JUMPDEST(0x5b)@0x12f4       | 1       |
|              |                             |          | 4853(0x12f5) | DUP5(0x84)                  | 3       |
| 4853(0x12f5) | PUSH1(0x60) ["0x00"]        | 3        |              |                             |         |
| 4855(0x12f7) | DUP6(0x85)                  | 3        |              |                             |         |
| 4856(0x12f8) | GT(0x11)                    | 3        |              |                             |         |
| 4857(0x12f9) | PUSH2(0x61) ["0x13","0x14"] | 3        | 4854(0x12f6) | PUSH2(0x61) ["0x13","0x11"] | 3       |
| 4860(0x12fc) | JUMPI(0x57)                 | 10       | 4857(0x12f9) | JUMPI(0x57)                 | 10      |
|              |                             |          |              |                             |         |
|              | Total.Orig:                 | 31       |              | Total.New:                  | 25      |

The suggested change provides a savings of 6 gas

```
diff forgeResults.orig forgeResults.new
75c75
< │ 1714599                       ┆ 8596            ┆        ┆        ┆        ┆         │
---
> │ 1713999                       ┆ 8593            ┆        ┆        ┆        ┆         │
99c99
< │ initialize                    ┆ 1359            ┆ 179527 ┆ 183671 ┆ 183671 ┆ 44      │
---
> │ initialize                    ┆ 1359            ┆ 179521 ┆ 183665 ┆ 183665 ┆ 44      │
148c148
< │ 659571                               ┆ 4313            ┆     ┆        ┆     ┆         │
---
> │ 659565                               ┆ 4313            ┆     ┆        ┆     ┆         │
```


### 3. [TokenSaleUpgradeable.sol:L154](https://github.com/code-423n4/2022-02-badger-citadel/blob/84596551d62f243d13fcb2d486346dde08002f7b/contracts/TokenSaleUpgradeable.sol#L154)
```solidity
         require(_tokenInAmount > 0, "_tokenInAmount should be > 0");
```

This is the diff of the original version of `contracts/TokenSaleUpgradeable.sol` and a new, optimized version
```solidity
154c154
<         require(_tokenInAmount > 0, "_tokenInAmount should be > 0");
---
>         require(_tokenInAmount != 0, "_tokenInAmount should be > 0");
```
These are the original byte code, followed by the byte code compiled from the new version
```
608060405234801561001057600080fd5b506004361061021c5760003560e01c806373b2e80e11610125578063b3a891c9116100ad578063e9a2f2e01161007c578063e9a2f2e01461048e578063f2fde38b14610497578063f49af3fa146104aa578063fd7e60a9146104bd578063fee839c6146104d057600080fd5b8063b3a891c914610441578063b3f05b9714610454578063d0202d3b14610468578063dacec66e1461047b57600080fd5b80639b8906ae116100f45780639b8906ae146103fb578063a1d9eecf14610403578063ab0bcc4114610416578063abf017e914610430578063afb8a52e1461043957600080fd5b806373b2e80e146103ac5780638456cb59146103cf5780638b234215146103d75780638da5cb5b146103ea57600080fd5b80634e71d92d116101a85780635c975abb116101775780635c975abb14610351578063618426fc1461036857806368c91d8f146103715780636daf390b14610391578063715018a6146103a457600080fd5b80634e71d92d146102fb578063564f0848146103035780635b019b761461030c5780635c1952171461033e57600080fd5b806324f3dd2f116101ef57806324f3dd2f146102965780633711d9fb146102ad5780633f4ba83a146102d857806346afbc1b146102e05780634bb278f3146102f357600080fd5b806301681a62146102215780630d4ec845146102365780631c908d9814610249578063240877101461025c575b600080fd5b61023461022f366004611ac9565b6104f0565b005b610234610244366004611ac9565b610667565b610234610257366004611ac9565b6106db565b61027f61026a366004611ac9565b60a36020526000908152604090205460ff1681565b60405160ff90911681526020015b60405180910390f35b61029f60a05481565b60405190815260200161028d565b6099546102c0906001600160401b031681565b6040516001600160401b03909116815260200161028d565b610234610786565b6102346102ee366004611afb565b6107ba565b61023461088d565b61029f610a30565b61029f609f5481565b60995461032690600160401b90046001600160a01b031681565b6040516001600160a01b03909116815260200161028d565b61029f61034c366004611b16565b610bcc565b60655460ff165b604051901515815260200161028d565b61029f609e5481565b61029f61037f366004611ac9565b609b6020526000908152604090205481565b609854610326906001600160a01b031681565b610234610c63565b6103586103ba366004611ac9565b609c6020526000908152604090205460ff1681565b610234610c97565b60a154610326906001600160a01b031681565b6033546001600160a01b0316610326565b610358610cc9565b61029f610411366004611b3e565b610d10565b6098546102c090600160a01b90046001600160401b031681565b61029f609a5481565b61029f611105565b61023461044f366004611afb565b611126565b60995461035890600160e01b900460ff1681565b609754610326906001600160a01b031681565b610234610489366004611bc9565b6111fe565b61029f609d5481565b6102346104a5366004611ac9565b6113e3565b6102346104b8366004611b16565b61147e565b6102346104cb366004611b16565b611507565b61029f6104de366004611c52565b60a26020526000908152604090205481565b6033546001600160a01b031633146105235760405162461bcd60e51b815260040161051a90611c6f565b60405180910390fd5b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a0823190602401602060405180830381865afa15801561056a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061058e9190611ca4565b6097549091506001600160a01b03838116911614156105c9576000609f54609e546105b99190611cd3565b90506105c58183611cd3565b9150505b6000811161060c5760405162461bcd60e51b815260206004820152601060248201526f06e6f7468696e6720746f2073776565760841b604482015260640161051a565b6106206001600160a01b0383163383611586565b816001600160a01b03167f1b94d65e3a03a98b13e90142a41884547fdd622b7f14a4daf94f6338e2e85cf08260405161065b91815260200190565b60405180910390a25050565b6033546001600160a01b031633146106915760405162461bcd60e51b815260040161051a90611c6f565b60a180546001600160a01b0319166001600160a01b0383169081179091556040517f650070ede2ab0ad22a57e15b88d668804b8f7c361a1ee8560093705f4d78abdd90600090a250565b6033546001600160a01b031633146107055760405162461bcd60e51b815260040161051a90611c6f565b6001600160a01b03811661072b5760405162461bcd60e51b815260040161051a90611cea565b6099805468010000000000000000600160e01b031916600160401b6001600160a01b038416908102919091179091556040517f22fcd0f303ce9972cac865bf07f264510ba86521618196591c01ad233f97826690600090a250565b6033546001600160a01b031633146107b05760405162461bcd60e51b815260040161051a90611c6f565b6107b86115ee565b565b6033546001600160a01b031633146107e45760405162461bcd60e51b815260040161051a90611c6f565b6000816001600160401b03161161080d5760405162461bcd60e51b815260040161051a90611d36565b609954600160e01b900460ff16156108375760405162461bcd60e51b815260040161051a90611d83565b6099805467ffffffffffffffff19166001600160401b0383169081179091556040519081527f63d2e06731cd563c7ce4ee2e4227ead624e21cfb8bde59079d343e63ec3baf5f906020015b60405180910390a150565b6033546001600160a01b031633146108b75760405162461bcd60e51b815260040161051a90611c6f565b609954600160e01b900460ff16156108e15760405162461bcd60e51b815260040161051a90611d83565b6108e9610cc9565b6109355760405162461bcd60e51b815260206004820152601760248201527f546f6b656e53616c653a206e6f742066696e6973686564000000000000000000604482015260640161051a565b609e546097546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015610980573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a49190611ca4565b10156109f25760405162461bcd60e51b815260206004820152601d60248201527f546f6b656e53616c653a206e6f7420656e6f7567682062616c616e6365000000604482015260640161051a565b6099805460ff60e01b1916600160e01b1790556040517f6823b073d48d6e3a7d385eeb601452d680e74bb46afe3255a7d778f3a9b1768190600090a1565b6000610a3e60655460ff1690565b15610a5b5760405162461bcd60e51b815260040161051a90611dba565b609954600160e01b900460ff16610aa95760405162461bcd60e51b81526020600482015260126024820152711cd85b19481b9bdd08199a5b985b1a5e995960721b604482015260640161051a565b336000908152609c602052604090205460ff1615610afb5760405162461bcd60e51b815260206004820152600f60248201526e185b1c9958591e4818db185a5b5959608a1b604482015260640161051a565b50336000908152609b602052604090205480610b4c5760405162461bcd60e51b815260206004820152601060248201526f6e6f7468696e6720746f20636c61696d60801b604482015260640161051a565b336000908152609c60205260408120805460ff19166001179055609f8054839290610b78908490611de4565b9091555050609754610b94906001600160a01b03163383611586565b60405181815233907f47cee97cb7acd717b3c0aa1435d004cd5b3c8c57d70dbceb4e4458bbd60e39d49060200160405180910390a290565b609a546097546040805163313ce56760e01b81529051600093926001600160a01b03169163313ce5679160048083019260209291908290030181865afa158015610c1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3e9190611dfc565b610c4990600a611efd565b610c539084611f0c565b610c5d9190611f2b565b92915050565b6033546001600160a01b03163314610c8d5760405162461bcd60e51b815260040161051a90611c6f565b6107b86000611681565b6033546001600160a01b03163314610cc15760405162461bcd60e51b815260040161051a90611c6f565b6107b86116d3565b609954609854600091610cf0916001600160401b0391821691600160a01b90910416611f4d565b6001600160401b031642101580610d0b575060a054609d5410155b905090565b6000610d1e60655460ff1690565b15610d3b5760405162461bcd60e51b815260040161051a90611dba565b60985442600160a01b9091046001600160401b03161115610d975760405162461bcd60e51b8152602060048201526016602482015275151bdad95b94d85b194e881b9bdd081cdd185c9d195960521b604482015260640161051a565b609954609854610dba916001600160401b0390811691600160a01b900416611f4d565b6001600160401b03164210610e115760405162461bcd60e51b815260206004820152601860248201527f546f6b656e53616c653a20616c726561647920656e6465640000000000000000604482015260640161051a565b60008511610e615760405162461bcd60e51b815260206004820152601c60248201527f5f746f6b656e496e416d6f756e742073686f756c64206265203e203000000000604482015260640161051a565b60a05485609d54610e729190611de4565b1115610eb85760405162461bcd60e51b81526020600482015260156024820152741d1bdd185b08185b5bdd5b9d08195e18d959591959605a1b604482015260640161051a565b60a1546001600160a01b031615610f7b5760a154604051631849250160e21b81526001600160a01b0390911690636124940490610efd90339087908790600401611f78565b602060405180830381865afa158015610f1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f3e9190611fc5565b610f7b5760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08185d5d1a1bdc9a5e995960921b604482015260640161051a565b336000908152609b60205260409020548015610ffa5733600090815260a3602052604090205460ff868116911614610ff55760405162461bcd60e51b815260206004820152601c60248201527f63616e277420766f746520666f72206d756c7469706c652064616f7300000000604482015260640161051a565b611017565b33600090815260a360205260409020805460ff191660ff87161790555b61102086610bcc565b915061102c8282611de4565b336000908152609b602090815260408083209390935560ff8816825260a29052908120805484929061105f908490611de4565b9250508190555085609d60008282546110789190611de4565b9250508190555081609e60008282546110919190611de4565b90915550506099546098546110bc916001600160a01b03918216913391600160401b9004168961172b565b604080518781526020810184905260ff87169133917f1ec0c95078c890035e941915909bcfe875eca2b01352f0caaf74680fe1d297ce910160405180910390a350949350505050565b600060a054609d54101561112357609d5460a054610d0b9190611cd3565b90565b6033546001600160a01b031633146111505760405162461bcd60e51b815260040161051a90611c6f565b42816001600160401b031610156111795760405162461bcd60e51b815260040161051a90611fe7565b609954600160e01b900460ff16156111a35760405162461bcd60e51b815260040161051a90611d83565b6098805467ffffffffffffffff60a01b1916600160a01b6001600160401b038416908102919091179091556040519081527fe91b422c48d1f63476e86148f126e887ed21d449f2881a51c364f3519e73a89490602001610882565b600054610100900460ff166112195760005460ff161561121d565b303b155b6112805760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161051a565b600054610100900460ff161580156112a2576000805461ffff19166101011790555b42876001600160401b031610156112cb5760405162461bcd60e51b815260040161051a90611fe7565b6000866001600160401b0316116112f45760405162461bcd60e51b815260040161051a90611d36565b600085116113145760405162461bcd60e51b815260040161051a90612033565b6001600160a01b03841661133a5760405162461bcd60e51b815260040161051a90611cea565b611342611769565b61134a6117a0565b609780546001600160a01b03808c166001600160a01b031992831617909255609880546001600160401b03808c16600160a01b026001600160e01b03199283168e8716171790925560998054609a8b9055898616600160401b029216928b169290921717905560a180549286169290911691909117905560a082905580156113d8576000805461ff00191690555b505050505050505050565b6033546001600160a01b0316331461140d5760405162461bcd60e51b815260040161051a90611c6f565b6001600160a01b0381166114725760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161051a565b61147b81611681565b50565b6033546001600160a01b031633146114a85760405162461bcd60e51b815260040161051a90611c6f565b609954600160e01b900460ff16156114d25760405162461bcd60e51b815260040161051a90611d83565b60a08190556040518181527fc03e813ac3c72b419d55e3347033254b7730e1c13579c72e3b0258faa1c228a790602001610882565b6033546001600160a01b031633146115315760405162461bcd60e51b815260040161051a90611c6f565b600081116115515760405162461bcd60e51b815260040161051a90612033565b609a8190556040518181527f1547cf4f4e088a233f379adf2a2ca21d8007a1a0273ac91fa1ec95d0c8e8414b90602001610882565b6040516001600160a01b0383166024820152604481018290526115e990849063a9059cbb60e01b906064015b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526117d7565b505050565b60655460ff166116375760405162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604482015260640161051a565b6065805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b60655460ff16156116f65760405162461bcd60e51b815260040161051a90611dba565b6065805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586116643390565b6040516001600160a01b03808516602483015283166044820152606481018290526117639085906323b872dd60e01b906084016115b2565b50505050565b600054610100900460ff166117905760405162461bcd60e51b815260040161051a90612078565b6117986118a9565b6107b86118d0565b600054610100900460ff166117c75760405162461bcd60e51b815260040161051a90612078565b6117cf6118a9565b6107b8611900565b600061182c826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166119339092919063ffffffff16565b8051909150156115e9578080602001905181019061184a9190611fc5565b6115e95760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161051a565b600054610100900460ff166107b85760405162461bcd60e51b815260040161051a90612078565b600054610100900460ff166118f75760405162461bcd60e51b815260040161051a90612078565b6107b833611681565b600054610100900460ff166119275760405162461bcd60e51b815260040161051a90612078565b6065805460ff19169055565b6060611942848460008561194c565b90505b9392505050565b6060824710156119ad5760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b606482015260840161051a565b843b6119fb5760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161051a565b600080866001600160a01b03168587604051611a1791906120ef565b60006040518083038185875af1925050503d8060008114611a54576040519150601f19603f3d011682016040523d82523d6000602084013e611a59565b606091505b5091509150611a69828286611a74565b979650505050505050565b60608315611a83575081611945565b825115611a935782518084602001fd5b8160405162461bcd60e51b815260040161051a919061210b565b80356001600160a01b0381168114611ac457600080fd5b919050565b600060208284031215611adb57600080fd5b61194582611aad565b80356001600160401b0381168114611ac457600080fd5b600060208284031215611b0d57600080fd5b61194582611ae4565b600060208284031215611b2857600080fd5b5035919050565b60ff8116811461147b57600080fd5b60008060008060608587031215611b5457600080fd5b843593506020850135611b6681611b2f565b925060408501356001600160401b0380821115611b8257600080fd5b818701915087601f830112611b9657600080fd5b813581811115611ba557600080fd5b8860208260051b8501011115611bba57600080fd5b95989497505060200194505050565b600080600080600080600080610100898b031215611be657600080fd5b611bef89611aad565b9750611bfd60208a01611aad565b9650611c0b60408a01611ae4565b9550611c1960608a01611ae4565b945060808901359350611c2e60a08a01611aad565b9250611c3c60c08a01611aad565b915060e089013590509295985092959890939650565b600060208284031215611c6457600080fd5b813561194581611b2f565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b600060208284031215611cb657600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b600082821015611ce557611ce5611cbd565b500390565b6020808252602c908201527f546f6b656e53616c653a2073616c6520726563697069656e742073686f756c6460408201526b206e6f74206265207a65726f60a01b606082015260800190565b6020808252602d908201527f546f6b656e53616c653a207468652073616c65206475726174696f6e206d757360408201526c74206e6f74206265207a65726f60981b606082015260800190565b6020808252601c908201527f546f6b656e53616c653a20616c72656164792066696e616c697a656400000000604082015260600190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b60008219821115611df757611df7611cbd565b500190565b600060208284031215611e0e57600080fd5b815161194581611b2f565b600181815b80851115611e54578160001904821115611e3a57611e3a611cbd565b80851615611e4757918102915b93841c9390800290611e1e565b509250929050565b600082611e6b57506001610c5d565b81611e7857506000610c5d565b8160018114611e8e5760028114611e9857611eb4565b6001915050610c5d565b60ff841115611ea957611ea9611cbd565b50506001821b610c5d565b5060208310610133831016604e8410600b8410161715611ed7575081810a610c5d565b611ee18383611e19565b8060001904821115611ef557611ef5611cbd565b029392505050565b600061194560ff841683611e5c565b6000816000190483118215151615611f2657611f26611cbd565b500290565b600082611f4857634e487b7160e01b600052601260045260246000fd5b500490565b60006001600160401b03808316818516808303821115611f6f57611f6f611cbd565b01949350505050565b6001600160a01b0384168152604060208201819052810182905260006001600160fb1b03831115611fa857600080fd5b8260051b8085606085013760009201606001918252509392505050565b600060208284031215611fd757600080fd5b8151801515811461194557600080fd5b6020808252602c908201527f546f6b656e53616c653a2073746172742064617465206d6179206e6f7420626560408201526b081a5b881d1a19481c185cdd60a21b606082015260800190565b60208082526025908201527f546f6b656e53616c653a20746865207072696365206d757374206e6f74206265604082015264207a65726f60d81b606082015260800190565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b60005b838110156120de5781810151838201526020016120c6565b838111156117635750506000910152565b600082516121018184602087016120c3565b9190910192915050565b602081526000825180602084015261212a8160408501602087016120c3565b601f01601f1916919091016040019291505056fea26469706673582212203187f9de1bc94f6ba8ca6ffb7e2438ccb59c8790bd234e8f23ce26e6bff8088664736f6c634300080b0033
```
```
608060405234801561001057600080fd5b506004361061021c5760003560e01c806373b2e80e11610125578063b3a891c9116100ad578063e9a2f2e01161007c578063e9a2f2e01461048e578063f2fde38b14610497578063f49af3fa146104aa578063fd7e60a9146104bd578063fee839c6146104d057600080fd5b8063b3a891c914610441578063b3f05b9714610454578063d0202d3b14610468578063dacec66e1461047b57600080fd5b80639b8906ae116100f45780639b8906ae146103fb578063a1d9eecf14610403578063ab0bcc4114610416578063abf017e914610430578063afb8a52e1461043957600080fd5b806373b2e80e146103ac5780638456cb59146103cf5780638b234215146103d75780638da5cb5b146103ea57600080fd5b80634e71d92d116101a85780635c975abb116101775780635c975abb14610351578063618426fc1461036857806368c91d8f146103715780636daf390b14610391578063715018a6146103a457600080fd5b80634e71d92d146102fb578063564f0848146103035780635b019b761461030c5780635c1952171461033e57600080fd5b806324f3dd2f116101ef57806324f3dd2f146102965780633711d9fb146102ad5780633f4ba83a146102d857806346afbc1b146102e05780634bb278f3146102f357600080fd5b806301681a62146102215780630d4ec845146102365780631c908d9814610249578063240877101461025c575b600080fd5b61023461022f366004611ac6565b6104f0565b005b610234610244366004611ac6565b610667565b610234610257366004611ac6565b6106db565b61027f61026a366004611ac6565b60a36020526000908152604090205460ff1681565b60405160ff90911681526020015b60405180910390f35b61029f60a05481565b60405190815260200161028d565b6099546102c0906001600160401b031681565b6040516001600160401b03909116815260200161028d565b610234610786565b6102346102ee366004611af8565b6107ba565b61023461088d565b61029f610a30565b61029f609f5481565b60995461032690600160401b90046001600160a01b031681565b6040516001600160a01b03909116815260200161028d565b61029f61034c366004611b13565b610bcc565b60655460ff165b604051901515815260200161028d565b61029f609e5481565b61029f61037f366004611ac6565b609b6020526000908152604090205481565b609854610326906001600160a01b031681565b610234610c63565b6103586103ba366004611ac6565b609c6020526000908152604090205460ff1681565b610234610c97565b60a154610326906001600160a01b031681565b6033546001600160a01b0316610326565b610358610cc9565b61029f610411366004611b3b565b610d10565b6098546102c090600160a01b90046001600160401b031681565b61029f609a5481565b61029f611102565b61023461044f366004611af8565b611123565b60995461035890600160e01b900460ff1681565b609754610326906001600160a01b031681565b610234610489366004611bc6565b6111fb565b61029f609d5481565b6102346104a5366004611ac6565b6113e0565b6102346104b8366004611b13565b61147b565b6102346104cb366004611b13565b611504565b61029f6104de366004611c4f565b60a26020526000908152604090205481565b6033546001600160a01b031633146105235760405162461bcd60e51b815260040161051a90611c6c565b60405180910390fd5b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a0823190602401602060405180830381865afa15801561056a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061058e9190611ca1565b6097549091506001600160a01b03838116911614156105c9576000609f54609e546105b99190611cd0565b90506105c58183611cd0565b9150505b6000811161060c5760405162461bcd60e51b815260206004820152601060248201526f06e6f7468696e6720746f2073776565760841b604482015260640161051a565b6106206001600160a01b0383163383611583565b816001600160a01b03167f1b94d65e3a03a98b13e90142a41884547fdd622b7f14a4daf94f6338e2e85cf08260405161065b91815260200190565b60405180910390a25050565b6033546001600160a01b031633146106915760405162461bcd60e51b815260040161051a90611c6c565b60a180546001600160a01b0319166001600160a01b0383169081179091556040517f650070ede2ab0ad22a57e15b88d668804b8f7c361a1ee8560093705f4d78abdd90600090a250565b6033546001600160a01b031633146107055760405162461bcd60e51b815260040161051a90611c6c565b6001600160a01b03811661072b5760405162461bcd60e51b815260040161051a90611ce7565b6099805468010000000000000000600160e01b031916600160401b6001600160a01b038416908102919091179091556040517f22fcd0f303ce9972cac865bf07f264510ba86521618196591c01ad233f97826690600090a250565b6033546001600160a01b031633146107b05760405162461bcd60e51b815260040161051a90611c6c565b6107b86115eb565b565b6033546001600160a01b031633146107e45760405162461bcd60e51b815260040161051a90611c6c565b6000816001600160401b03161161080d5760405162461bcd60e51b815260040161051a90611d33565b609954600160e01b900460ff16156108375760405162461bcd60e51b815260040161051a90611d80565b6099805467ffffffffffffffff19166001600160401b0383169081179091556040519081527f63d2e06731cd563c7ce4ee2e4227ead624e21cfb8bde59079d343e63ec3baf5f906020015b60405180910390a150565b6033546001600160a01b031633146108b75760405162461bcd60e51b815260040161051a90611c6c565b609954600160e01b900460ff16156108e15760405162461bcd60e51b815260040161051a90611d80565b6108e9610cc9565b6109355760405162461bcd60e51b815260206004820152601760248201527f546f6b656e53616c653a206e6f742066696e6973686564000000000000000000604482015260640161051a565b609e546097546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015610980573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a49190611ca1565b10156109f25760405162461bcd60e51b815260206004820152601d60248201527f546f6b656e53616c653a206e6f7420656e6f7567682062616c616e6365000000604482015260640161051a565b6099805460ff60e01b1916600160e01b1790556040517f6823b073d48d6e3a7d385eeb601452d680e74bb46afe3255a7d778f3a9b1768190600090a1565b6000610a3e60655460ff1690565b15610a5b5760405162461bcd60e51b815260040161051a90611db7565b609954600160e01b900460ff16610aa95760405162461bcd60e51b81526020600482015260126024820152711cd85b19481b9bdd08199a5b985b1a5e995960721b604482015260640161051a565b336000908152609c602052604090205460ff1615610afb5760405162461bcd60e51b815260206004820152600f60248201526e185b1c9958591e4818db185a5b5959608a1b604482015260640161051a565b50336000908152609b602052604090205480610b4c5760405162461bcd60e51b815260206004820152601060248201526f6e6f7468696e6720746f20636c61696d60801b604482015260640161051a565b336000908152609c60205260408120805460ff19166001179055609f8054839290610b78908490611de1565b9091555050609754610b94906001600160a01b03163383611583565b60405181815233907f47cee97cb7acd717b3c0aa1435d004cd5b3c8c57d70dbceb4e4458bbd60e39d49060200160405180910390a290565b609a546097546040805163313ce56760e01b81529051600093926001600160a01b03169163313ce5679160048083019260209291908290030181865afa158015610c1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3e9190611df9565b610c4990600a611efa565b610c539084611f09565b610c5d9190611f28565b92915050565b6033546001600160a01b03163314610c8d5760405162461bcd60e51b815260040161051a90611c6c565b6107b8600061167e565b6033546001600160a01b03163314610cc15760405162461bcd60e51b815260040161051a90611c6c565b6107b86116d0565b609954609854600091610cf0916001600160401b0391821691600160a01b90910416611f4a565b6001600160401b031642101580610d0b575060a054609d5410155b905090565b6000610d1e60655460ff1690565b15610d3b5760405162461bcd60e51b815260040161051a90611db7565b60985442600160a01b9091046001600160401b03161115610d975760405162461bcd60e51b8152602060048201526016602482015275151bdad95b94d85b194e881b9bdd081cdd185c9d195960521b604482015260640161051a565b609954609854610dba916001600160401b0390811691600160a01b900416611f4a565b6001600160401b03164210610e115760405162461bcd60e51b815260206004820152601860248201527f546f6b656e53616c653a20616c726561647920656e6465640000000000000000604482015260640161051a565b84610e5e5760405162461bcd60e51b815260206004820152601c60248201527f5f746f6b656e496e416d6f756e742073686f756c64206265203e203000000000604482015260640161051a565b60a05485609d54610e6f9190611de1565b1115610eb55760405162461bcd60e51b81526020600482015260156024820152741d1bdd185b08185b5bdd5b9d08195e18d959591959605a1b604482015260640161051a565b60a1546001600160a01b031615610f785760a154604051631849250160e21b81526001600160a01b0390911690636124940490610efa90339087908790600401611f75565b602060405180830381865afa158015610f17573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f3b9190611fc2565b610f785760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08185d5d1a1bdc9a5e995960921b604482015260640161051a565b336000908152609b60205260409020548015610ff75733600090815260a3602052604090205460ff868116911614610ff25760405162461bcd60e51b815260206004820152601c60248201527f63616e277420766f746520666f72206d756c7469706c652064616f7300000000604482015260640161051a565b611014565b33600090815260a360205260409020805460ff191660ff87161790555b61101d86610bcc565b91506110298282611de1565b336000908152609b602090815260408083209390935560ff8816825260a29052908120805484929061105c908490611de1565b9250508190555085609d60008282546110759190611de1565b9250508190555081609e600082825461108e9190611de1565b90915550506099546098546110b9916001600160a01b03918216913391600160401b90041689611728565b604080518781526020810184905260ff87169133917f1ec0c95078c890035e941915909bcfe875eca2b01352f0caaf74680fe1d297ce910160405180910390a350949350505050565b600060a054609d54101561112057609d5460a054610d0b9190611cd0565b90565b6033546001600160a01b0316331461114d5760405162461bcd60e51b815260040161051a90611c6c565b42816001600160401b031610156111765760405162461bcd60e51b815260040161051a90611fe4565b609954600160e01b900460ff16156111a05760405162461bcd60e51b815260040161051a90611d80565b6098805467ffffffffffffffff60a01b1916600160a01b6001600160401b038416908102919091179091556040519081527fe91b422c48d1f63476e86148f126e887ed21d449f2881a51c364f3519e73a89490602001610882565b600054610100900460ff166112165760005460ff161561121a565b303b155b61127d5760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161051a565b600054610100900460ff1615801561129f576000805461ffff19166101011790555b42876001600160401b031610156112c85760405162461bcd60e51b815260040161051a90611fe4565b6000866001600160401b0316116112f15760405162461bcd60e51b815260040161051a90611d33565b600085116113115760405162461bcd60e51b815260040161051a90612030565b6001600160a01b0384166113375760405162461bcd60e51b815260040161051a90611ce7565b61133f611766565b61134761179d565b609780546001600160a01b03808c166001600160a01b031992831617909255609880546001600160401b03808c16600160a01b026001600160e01b03199283168e8716171790925560998054609a8b9055898616600160401b029216928b169290921717905560a180549286169290911691909117905560a082905580156113d5576000805461ff00191690555b505050505050505050565b6033546001600160a01b0316331461140a5760405162461bcd60e51b815260040161051a90611c6c565b6001600160a01b03811661146f5760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161051a565b6114788161167e565b50565b6033546001600160a01b031633146114a55760405162461bcd60e51b815260040161051a90611c6c565b609954600160e01b900460ff16156114cf5760405162461bcd60e51b815260040161051a90611d80565b60a08190556040518181527fc03e813ac3c72b419d55e3347033254b7730e1c13579c72e3b0258faa1c228a790602001610882565b6033546001600160a01b0316331461152e5760405162461bcd60e51b815260040161051a90611c6c565b6000811161154e5760405162461bcd60e51b815260040161051a90612030565b609a8190556040518181527f1547cf4f4e088a233f379adf2a2ca21d8007a1a0273ac91fa1ec95d0c8e8414b90602001610882565b6040516001600160a01b0383166024820152604481018290526115e690849063a9059cbb60e01b906064015b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526117d4565b505050565b60655460ff166116345760405162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604482015260640161051a565b6065805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b60655460ff16156116f35760405162461bcd60e51b815260040161051a90611db7565b6065805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586116613390565b6040516001600160a01b03808516602483015283166044820152606481018290526117609085906323b872dd60e01b906084016115af565b50505050565b600054610100900460ff1661178d5760405162461bcd60e51b815260040161051a90612075565b6117956118a6565b6107b86118cd565b600054610100900460ff166117c45760405162461bcd60e51b815260040161051a90612075565b6117cc6118a6565b6107b86118fd565b6000611829826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166119309092919063ffffffff16565b8051909150156115e657808060200190518101906118479190611fc2565b6115e65760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161051a565b600054610100900460ff166107b85760405162461bcd60e51b815260040161051a90612075565b600054610100900460ff166118f45760405162461bcd60e51b815260040161051a90612075565b6107b83361167e565b600054610100900460ff166119245760405162461bcd60e51b815260040161051a90612075565b6065805460ff19169055565b606061193f8484600085611949565b90505b9392505050565b6060824710156119aa5760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b606482015260840161051a565b843b6119f85760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161051a565b600080866001600160a01b03168587604051611a1491906120ec565b60006040518083038185875af1925050503d8060008114611a51576040519150601f19603f3d011682016040523d82523d6000602084013e611a56565b606091505b5091509150611a66828286611a71565b979650505050505050565b60608315611a80575081611942565b825115611a905782518084602001fd5b8160405162461bcd60e51b815260040161051a9190612108565b80356001600160a01b0381168114611ac157600080fd5b919050565b600060208284031215611ad857600080fd5b61194282611aaa565b80356001600160401b0381168114611ac157600080fd5b600060208284031215611b0a57600080fd5b61194282611ae1565b600060208284031215611b2557600080fd5b5035919050565b60ff8116811461147857600080fd5b60008060008060608587031215611b5157600080fd5b843593506020850135611b6381611b2c565b925060408501356001600160401b0380821115611b7f57600080fd5b818701915087601f830112611b9357600080fd5b813581811115611ba257600080fd5b8860208260051b8501011115611bb757600080fd5b95989497505060200194505050565b600080600080600080600080610100898b031215611be357600080fd5b611bec89611aaa565b9750611bfa60208a01611aaa565b9650611c0860408a01611ae1565b9550611c1660608a01611ae1565b945060808901359350611c2b60a08a01611aaa565b9250611c3960c08a01611aaa565b915060e089013590509295985092959890939650565b600060208284031215611c6157600080fd5b813561194281611b2c565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b600060208284031215611cb357600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b600082821015611ce257611ce2611cba565b500390565b6020808252602c908201527f546f6b656e53616c653a2073616c6520726563697069656e742073686f756c6460408201526b206e6f74206265207a65726f60a01b606082015260800190565b6020808252602d908201527f546f6b656e53616c653a207468652073616c65206475726174696f6e206d757360408201526c74206e6f74206265207a65726f60981b606082015260800190565b6020808252601c908201527f546f6b656e53616c653a20616c72656164792066696e616c697a656400000000604082015260600190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b60008219821115611df457611df4611cba565b500190565b600060208284031215611e0b57600080fd5b815161194281611b2c565b600181815b80851115611e51578160001904821115611e3757611e37611cba565b80851615611e4457918102915b93841c9390800290611e1b565b509250929050565b600082611e6857506001610c5d565b81611e7557506000610c5d565b8160018114611e8b5760028114611e9557611eb1565b6001915050610c5d565b60ff841115611ea657611ea6611cba565b50506001821b610c5d565b5060208310610133831016604e8410600b8410161715611ed4575081810a610c5d565b611ede8383611e16565b8060001904821115611ef257611ef2611cba565b029392505050565b600061194260ff841683611e59565b6000816000190483118215151615611f2357611f23611cba565b500290565b600082611f4557634e487b7160e01b600052601260045260246000fd5b500490565b60006001600160401b03808316818516808303821115611f6c57611f6c611cba565b01949350505050565b6001600160a01b0384168152604060208201819052810182905260006001600160fb1b03831115611fa557600080fd5b8260051b8085606085013760009201606001918252509392505050565b600060208284031215611fd457600080fd5b8151801515811461194257600080fd5b6020808252602c908201527f546f6b656e53616c653a2073746172742064617465206d6179206e6f7420626560408201526b081a5b881d1a19481c185cdd60a21b606082015260800190565b60208082526025908201527f546f6b656e53616c653a20746865207072696365206d757374206e6f74206265604082015264207a65726f60d81b606082015260800190565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b60005b838110156120db5781810151838201526020016120c3565b838111156117605750506000910152565b600082516120fe8184602087016120c0565b9190910192915050565b60208152600082518060208401526121278160408501602087016120c0565b601f01601f1916919091016040019291505056fea2646970667358221220f2dfe1c63a50e922ccd0495fe9102713d2e55faf3de549514edb3c3ed76b654864736f6c634300080b0033
```

These are the byte code differences between the two versions

| PC.Orig      | Operation.Orig              | Gas.Orig | PC.New       | Operation.New               | Gas.New |
| -            | -                           | :-:      | -            | -                           | :-:     |
| 3600(0x0e10) | JUMP(0x56)                  | 8        | 3600(0x0e10) | JUMP(0x56)                  | 8       |
| 3601(0x0e11) | JUMPDEST(0x5b)@0x0e11       | 1        | 3601(0x0e11) | JUMPDEST(0x5b)@0x0e11       | 1       |
|              |                             |          | 3602(0x0e12) | DUP5(0x84)                  | 3       |
| 3602(0x0e12) | PUSH1(0x60) ["0x00"]        | 3        |              |                             |         |
| 3604(0x0e14) | DUP6(0x85)                  | 3        |              |                             |         |
| 3605(0x0e15) | GT(0x11)                    | 3        |              |                             |         |
| 3606(0x0e16) | PUSH2(0x61) ["0x0e","0x61"] | 3        | 3603(0x0e13) | PUSH2(0x61) ["0x0e","0x5e"] | 3       |
| 3609(0x0e19) | JUMPI(0x57)                 | 10       | 3606(0x0e16) | JUMPI(0x57)                 | 10      |
|              |                             |          |              |                             |         |
|              | Total.Orig:                 | 31       |              | Total.New:                  | 25      |

The suggested change provides a savings of 6 gas

```
diff forgeResults.orig forgeResults.new
5c5
< [32m[PASS][0m testBuyAfterTokenInLimitUpdated() (gas: 324150)
---
> [32m[PASS][0m testBuyAfterTokenInLimitUpdated() (gas: 324138)
8,10c8,10
< [32m[PASS][0m testBuyFailsIfLimitExceeded() (gas: 290925)
< [32m[PASS][0m testBuyFailsIfMoreThanLimit() (gas: 82652)
< [32m[PASS][0m testBuyFailsIfNotInGuestlist() (gas: 15392)
---
> [32m[PASS][0m testBuyFailsIfLimitExceeded() (gas: 290913)
> [32m[PASS][0m testBuyFailsIfMoreThanLimit() (gas: 82646)
> [32m[PASS][0m testBuyFailsIfNotInGuestlist() (gas: 15386)
12,19c12,19
< [32m[PASS][0m testBuyMultipleBuyers() (gas: 324089)
< [32m[PASS][0m testBuyOnce() (gas: 219681)
< [32m[PASS][0m testBuyTwice() (gas: 318143)
< [32m[PASS][0m testBuyTwiceFailsForDifferentDaos() (gas: 226480)
< [32m[PASS][0m testBuyWhenNoGuestlist() (gas: 200536)
< [32m[PASS][0m testBuyZero() (gas: 6216)
< [32m[PASS][0m testClaim() (gas: 368861)
< [32m[PASS][0m testClaimAfterMultipleBuys() (gas: 467216)
---
> [32m[PASS][0m testBuyMultipleBuyers() (gas: 324077)
> [32m[PASS][0m testBuyOnce() (gas: 219675)
> [32m[PASS][0m testBuyTwice() (gas: 318131)
> [32m[PASS][0m testBuyTwiceFailsForDifferentDaos() (gas: 226468)
> [32m[PASS][0m testBuyWhenNoGuestlist() (gas: 200530)
> [32m[PASS][0m testBuyZero() (gas: 6210)
> [32m[PASS][0m testClaim() (gas: 368855)
> [32m[PASS][0m testClaimAfterMultipleBuys() (gas: 467204)
21c21
< [32m[PASS][0m testClaimFailsIfCalledAgain() (gas: 371463)
---
> [32m[PASS][0m testClaimFailsIfCalledAgain() (gas: 371457)
24c24
< [32m[PASS][0m testClaimMultipleBuyers() (gas: 538522)
---
> [32m[PASS][0m testClaimMultipleBuyers() (gas: 538510)
26c26
< [32m[PASS][0m testFinalize() (gas: 301754)
---
> [32m[PASS][0m testFinalize() (gas: 301748)
29c29
< [32m[PASS][0m testFinalizeFailsIfNotEnoughTokenIn() (gas: 226257)
---
> [32m[PASS][0m testFinalizeFailsIfNotEnoughTokenIn() (gas: 226251)
36,37c36,37
< [32m[PASS][0m testSaleEndedAfterLimit() (gas: 221010)
< [32m[PASS][0m testSaleRecipientChangedDuringSale() (gas: 342108)
---
> [32m[PASS][0m testSaleEndedAfterLimit() (gas: 221004)
> [32m[PASS][0m testSaleRecipientChangedDuringSale() (gas: 342096)
44,46c44,46
< [32m[PASS][0m testSweepTokenOut() (gas: 330925)
< [32m[PASS][0m testTokenInLimitLeft(uint256) (runs: 256, μ: 221304, ~: 221305)
< [32m[PASS][0m testTokenOutPriceDoubledDuringSale() (gas: 320103)
---
> [32m[PASS][0m testSweepTokenOut() (gas: 330919)
> [32m[PASS][0m testTokenInLimitLeft(uint256) (runs: 256, μ: 221298, ~: 221299)
> [32m[PASS][0m testTokenOutPriceDoubledDuringSale() (gas: 320091)
75c75
< │ 1714599                       ┆ 8596            ┆        ┆        ┆        ┆         │
---
> │ 1713999                       ┆ 8593            ┆        ┆        ┆        ┆         │
81c81
< │ buy                           ┆ 851             ┆ 55606  ┆ 93149  ┆ 95131  ┆ 32      │
---
> │ buy                           ┆ 851             ┆ 55601  ┆ 93144  ┆ 95126  ┆ 32      │
```


### 4. [TokenSaleUpgradeable.sol:L288-291](https://github.com/code-423n4/2022-02-badger-citadel/blob/84596551d62f243d13fcb2d486346dde08002f7b/contracts/TokenSaleUpgradeable.sol#L288-L291)
```solidity
        require(
            _saleDuration > 0,
            "TokenSale: the sale duration must not be zero"
        );
```

This is the diff of the original version of `contracts/TokenSaleUpgradeable.sol` and a new, optimized version
```solidity
289c289
<             _saleDuration > 0,
---
>             _saleDuration != 0,
```
These are the original byte code, followed by the byte code compiled from the new version
```
608060405234801561001057600080fd5b506004361061021c5760003560e01c806373b2e80e11610125578063b3a891c9116100ad578063e9a2f2e01161007c578063e9a2f2e01461048e578063f2fde38b14610497578063f49af3fa146104aa578063fd7e60a9146104bd578063fee839c6146104d057600080fd5b8063b3a891c914610441578063b3f05b9714610454578063d0202d3b14610468578063dacec66e1461047b57600080fd5b80639b8906ae116100f45780639b8906ae146103fb578063a1d9eecf14610403578063ab0bcc4114610416578063abf017e914610430578063afb8a52e1461043957600080fd5b806373b2e80e146103ac5780638456cb59146103cf5780638b234215146103d75780638da5cb5b146103ea57600080fd5b80634e71d92d116101a85780635c975abb116101775780635c975abb14610351578063618426fc1461036857806368c91d8f146103715780636daf390b14610391578063715018a6146103a457600080fd5b80634e71d92d146102fb578063564f0848146103035780635b019b761461030c5780635c1952171461033e57600080fd5b806324f3dd2f116101ef57806324f3dd2f146102965780633711d9fb146102ad5780633f4ba83a146102d857806346afbc1b146102e05780634bb278f3146102f357600080fd5b806301681a62146102215780630d4ec845146102365780631c908d9814610249578063240877101461025c575b600080fd5b61023461022f366004611ac9565b6104f0565b005b610234610244366004611ac9565b610667565b610234610257366004611ac9565b6106db565b61027f61026a366004611ac9565b60a36020526000908152604090205460ff1681565b60405160ff90911681526020015b60405180910390f35b61029f60a05481565b60405190815260200161028d565b6099546102c0906001600160401b031681565b6040516001600160401b03909116815260200161028d565b610234610786565b6102346102ee366004611afb565b6107ba565b61023461088d565b61029f610a30565b61029f609f5481565b60995461032690600160401b90046001600160a01b031681565b6040516001600160a01b03909116815260200161028d565b61029f61034c366004611b16565b610bcc565b60655460ff165b604051901515815260200161028d565b61029f609e5481565b61029f61037f366004611ac9565b609b6020526000908152604090205481565b609854610326906001600160a01b031681565b610234610c63565b6103586103ba366004611ac9565b609c6020526000908152604090205460ff1681565b610234610c97565b60a154610326906001600160a01b031681565b6033546001600160a01b0316610326565b610358610cc9565b61029f610411366004611b3e565b610d10565b6098546102c090600160a01b90046001600160401b031681565b61029f609a5481565b61029f611105565b61023461044f366004611afb565b611126565b60995461035890600160e01b900460ff1681565b609754610326906001600160a01b031681565b610234610489366004611bc9565b6111fe565b61029f609d5481565b6102346104a5366004611ac9565b6113e3565b6102346104b8366004611b16565b61147e565b6102346104cb366004611b16565b611507565b61029f6104de366004611c52565b60a26020526000908152604090205481565b6033546001600160a01b031633146105235760405162461bcd60e51b815260040161051a90611c6f565b60405180910390fd5b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a0823190602401602060405180830381865afa15801561056a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061058e9190611ca4565b6097549091506001600160a01b03838116911614156105c9576000609f54609e546105b99190611cd3565b90506105c58183611cd3565b9150505b6000811161060c5760405162461bcd60e51b815260206004820152601060248201526f06e6f7468696e6720746f2073776565760841b604482015260640161051a565b6106206001600160a01b0383163383611586565b816001600160a01b03167f1b94d65e3a03a98b13e90142a41884547fdd622b7f14a4daf94f6338e2e85cf08260405161065b91815260200190565b60405180910390a25050565b6033546001600160a01b031633146106915760405162461bcd60e51b815260040161051a90611c6f565b60a180546001600160a01b0319166001600160a01b0383169081179091556040517f650070ede2ab0ad22a57e15b88d668804b8f7c361a1ee8560093705f4d78abdd90600090a250565b6033546001600160a01b031633146107055760405162461bcd60e51b815260040161051a90611c6f565b6001600160a01b03811661072b5760405162461bcd60e51b815260040161051a90611cea565b6099805468010000000000000000600160e01b031916600160401b6001600160a01b038416908102919091179091556040517f22fcd0f303ce9972cac865bf07f264510ba86521618196591c01ad233f97826690600090a250565b6033546001600160a01b031633146107b05760405162461bcd60e51b815260040161051a90611c6f565b6107b86115ee565b565b6033546001600160a01b031633146107e45760405162461bcd60e51b815260040161051a90611c6f565b6000816001600160401b03161161080d5760405162461bcd60e51b815260040161051a90611d36565b609954600160e01b900460ff16156108375760405162461bcd60e51b815260040161051a90611d83565b6099805467ffffffffffffffff19166001600160401b0383169081179091556040519081527f63d2e06731cd563c7ce4ee2e4227ead624e21cfb8bde59079d343e63ec3baf5f906020015b60405180910390a150565b6033546001600160a01b031633146108b75760405162461bcd60e51b815260040161051a90611c6f565b609954600160e01b900460ff16156108e15760405162461bcd60e51b815260040161051a90611d83565b6108e9610cc9565b6109355760405162461bcd60e51b815260206004820152601760248201527f546f6b656e53616c653a206e6f742066696e6973686564000000000000000000604482015260640161051a565b609e546097546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015610980573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a49190611ca4565b10156109f25760405162461bcd60e51b815260206004820152601d60248201527f546f6b656e53616c653a206e6f7420656e6f7567682062616c616e6365000000604482015260640161051a565b6099805460ff60e01b1916600160e01b1790556040517f6823b073d48d6e3a7d385eeb601452d680e74bb46afe3255a7d778f3a9b1768190600090a1565b6000610a3e60655460ff1690565b15610a5b5760405162461bcd60e51b815260040161051a90611dba565b609954600160e01b900460ff16610aa95760405162461bcd60e51b81526020600482015260126024820152711cd85b19481b9bdd08199a5b985b1a5e995960721b604482015260640161051a565b336000908152609c602052604090205460ff1615610afb5760405162461bcd60e51b815260206004820152600f60248201526e185b1c9958591e4818db185a5b5959608a1b604482015260640161051a565b50336000908152609b602052604090205480610b4c5760405162461bcd60e51b815260206004820152601060248201526f6e6f7468696e6720746f20636c61696d60801b604482015260640161051a565b336000908152609c60205260408120805460ff19166001179055609f8054839290610b78908490611de4565b9091555050609754610b94906001600160a01b03163383611586565b60405181815233907f47cee97cb7acd717b3c0aa1435d004cd5b3c8c57d70dbceb4e4458bbd60e39d49060200160405180910390a290565b609a546097546040805163313ce56760e01b81529051600093926001600160a01b03169163313ce5679160048083019260209291908290030181865afa158015610c1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3e9190611dfc565b610c4990600a611efd565b610c539084611f0c565b610c5d9190611f2b565b92915050565b6033546001600160a01b03163314610c8d5760405162461bcd60e51b815260040161051a90611c6f565b6107b86000611681565b6033546001600160a01b03163314610cc15760405162461bcd60e51b815260040161051a90611c6f565b6107b86116d3565b609954609854600091610cf0916001600160401b0391821691600160a01b90910416611f4d565b6001600160401b031642101580610d0b575060a054609d5410155b905090565b6000610d1e60655460ff1690565b15610d3b5760405162461bcd60e51b815260040161051a90611dba565b60985442600160a01b9091046001600160401b03161115610d975760405162461bcd60e51b8152602060048201526016602482015275151bdad95b94d85b194e881b9bdd081cdd185c9d195960521b604482015260640161051a565b609954609854610dba916001600160401b0390811691600160a01b900416611f4d565b6001600160401b03164210610e115760405162461bcd60e51b815260206004820152601860248201527f546f6b656e53616c653a20616c726561647920656e6465640000000000000000604482015260640161051a565b60008511610e615760405162461bcd60e51b815260206004820152601c60248201527f5f746f6b656e496e416d6f756e742073686f756c64206265203e203000000000604482015260640161051a565b60a05485609d54610e729190611de4565b1115610eb85760405162461bcd60e51b81526020600482015260156024820152741d1bdd185b08185b5bdd5b9d08195e18d959591959605a1b604482015260640161051a565b60a1546001600160a01b031615610f7b5760a154604051631849250160e21b81526001600160a01b0390911690636124940490610efd90339087908790600401611f78565b602060405180830381865afa158015610f1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f3e9190611fc5565b610f7b5760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08185d5d1a1bdc9a5e995960921b604482015260640161051a565b336000908152609b60205260409020548015610ffa5733600090815260a3602052604090205460ff868116911614610ff55760405162461bcd60e51b815260206004820152601c60248201527f63616e277420766f746520666f72206d756c7469706c652064616f7300000000604482015260640161051a565b611017565b33600090815260a360205260409020805460ff191660ff87161790555b61102086610bcc565b915061102c8282611de4565b336000908152609b602090815260408083209390935560ff8816825260a29052908120805484929061105f908490611de4565b9250508190555085609d60008282546110789190611de4565b9250508190555081609e60008282546110919190611de4565b90915550506099546098546110bc916001600160a01b03918216913391600160401b9004168961172b565b604080518781526020810184905260ff87169133917f1ec0c95078c890035e941915909bcfe875eca2b01352f0caaf74680fe1d297ce910160405180910390a350949350505050565b600060a054609d54101561112357609d5460a054610d0b9190611cd3565b90565b6033546001600160a01b031633146111505760405162461bcd60e51b815260040161051a90611c6f565b42816001600160401b031610156111795760405162461bcd60e51b815260040161051a90611fe7565b609954600160e01b900460ff16156111a35760405162461bcd60e51b815260040161051a90611d83565b6098805467ffffffffffffffff60a01b1916600160a01b6001600160401b038416908102919091179091556040519081527fe91b422c48d1f63476e86148f126e887ed21d449f2881a51c364f3519e73a89490602001610882565b600054610100900460ff166112195760005460ff161561121d565b303b155b6112805760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161051a565b600054610100900460ff161580156112a2576000805461ffff19166101011790555b42876001600160401b031610156112cb5760405162461bcd60e51b815260040161051a90611fe7565b6000866001600160401b0316116112f45760405162461bcd60e51b815260040161051a90611d36565b600085116113145760405162461bcd60e51b815260040161051a90612033565b6001600160a01b03841661133a5760405162461bcd60e51b815260040161051a90611cea565b611342611769565b61134a6117a0565b609780546001600160a01b03808c166001600160a01b031992831617909255609880546001600160401b03808c16600160a01b026001600160e01b03199283168e8716171790925560998054609a8b9055898616600160401b029216928b169290921717905560a180549286169290911691909117905560a082905580156113d8576000805461ff00191690555b505050505050505050565b6033546001600160a01b0316331461140d5760405162461bcd60e51b815260040161051a90611c6f565b6001600160a01b0381166114725760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161051a565b61147b81611681565b50565b6033546001600160a01b031633146114a85760405162461bcd60e51b815260040161051a90611c6f565b609954600160e01b900460ff16156114d25760405162461bcd60e51b815260040161051a90611d83565b60a08190556040518181527fc03e813ac3c72b419d55e3347033254b7730e1c13579c72e3b0258faa1c228a790602001610882565b6033546001600160a01b031633146115315760405162461bcd60e51b815260040161051a90611c6f565b600081116115515760405162461bcd60e51b815260040161051a90612033565b609a8190556040518181527f1547cf4f4e088a233f379adf2a2ca21d8007a1a0273ac91fa1ec95d0c8e8414b90602001610882565b6040516001600160a01b0383166024820152604481018290526115e990849063a9059cbb60e01b906064015b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526117d7565b505050565b60655460ff166116375760405162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604482015260640161051a565b6065805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b60655460ff16156116f65760405162461bcd60e51b815260040161051a90611dba565b6065805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586116643390565b6040516001600160a01b03808516602483015283166044820152606481018290526117639085906323b872dd60e01b906084016115b2565b50505050565b600054610100900460ff166117905760405162461bcd60e51b815260040161051a90612078565b6117986118a9565b6107b86118d0565b600054610100900460ff166117c75760405162461bcd60e51b815260040161051a90612078565b6117cf6118a9565b6107b8611900565b600061182c826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166119339092919063ffffffff16565b8051909150156115e9578080602001905181019061184a9190611fc5565b6115e95760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161051a565b600054610100900460ff166107b85760405162461bcd60e51b815260040161051a90612078565b600054610100900460ff166118f75760405162461bcd60e51b815260040161051a90612078565b6107b833611681565b600054610100900460ff166119275760405162461bcd60e51b815260040161051a90612078565b6065805460ff19169055565b6060611942848460008561194c565b90505b9392505050565b6060824710156119ad5760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b606482015260840161051a565b843b6119fb5760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161051a565b600080866001600160a01b03168587604051611a1791906120ef565b60006040518083038185875af1925050503d8060008114611a54576040519150601f19603f3d011682016040523d82523d6000602084013e611a59565b606091505b5091509150611a69828286611a74565b979650505050505050565b60608315611a83575081611945565b825115611a935782518084602001fd5b8160405162461bcd60e51b815260040161051a919061210b565b80356001600160a01b0381168114611ac457600080fd5b919050565b600060208284031215611adb57600080fd5b61194582611aad565b80356001600160401b0381168114611ac457600080fd5b600060208284031215611b0d57600080fd5b61194582611ae4565b600060208284031215611b2857600080fd5b5035919050565b60ff8116811461147b57600080fd5b60008060008060608587031215611b5457600080fd5b843593506020850135611b6681611b2f565b925060408501356001600160401b0380821115611b8257600080fd5b818701915087601f830112611b9657600080fd5b813581811115611ba557600080fd5b8860208260051b8501011115611bba57600080fd5b95989497505060200194505050565b600080600080600080600080610100898b031215611be657600080fd5b611bef89611aad565b9750611bfd60208a01611aad565b9650611c0b60408a01611ae4565b9550611c1960608a01611ae4565b945060808901359350611c2e60a08a01611aad565b9250611c3c60c08a01611aad565b915060e089013590509295985092959890939650565b600060208284031215611c6457600080fd5b813561194581611b2f565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b600060208284031215611cb657600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b600082821015611ce557611ce5611cbd565b500390565b6020808252602c908201527f546f6b656e53616c653a2073616c6520726563697069656e742073686f756c6460408201526b206e6f74206265207a65726f60a01b606082015260800190565b6020808252602d908201527f546f6b656e53616c653a207468652073616c65206475726174696f6e206d757360408201526c74206e6f74206265207a65726f60981b606082015260800190565b6020808252601c908201527f546f6b656e53616c653a20616c72656164792066696e616c697a656400000000604082015260600190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b60008219821115611df757611df7611cbd565b500190565b600060208284031215611e0e57600080fd5b815161194581611b2f565b600181815b80851115611e54578160001904821115611e3a57611e3a611cbd565b80851615611e4757918102915b93841c9390800290611e1e565b509250929050565b600082611e6b57506001610c5d565b81611e7857506000610c5d565b8160018114611e8e5760028114611e9857611eb4565b6001915050610c5d565b60ff841115611ea957611ea9611cbd565b50506001821b610c5d565b5060208310610133831016604e8410600b8410161715611ed7575081810a610c5d565b611ee18383611e19565b8060001904821115611ef557611ef5611cbd565b029392505050565b600061194560ff841683611e5c565b6000816000190483118215151615611f2657611f26611cbd565b500290565b600082611f4857634e487b7160e01b600052601260045260246000fd5b500490565b60006001600160401b03808316818516808303821115611f6f57611f6f611cbd565b01949350505050565b6001600160a01b0384168152604060208201819052810182905260006001600160fb1b03831115611fa857600080fd5b8260051b8085606085013760009201606001918252509392505050565b600060208284031215611fd757600080fd5b8151801515811461194557600080fd5b6020808252602c908201527f546f6b656e53616c653a2073746172742064617465206d6179206e6f7420626560408201526b081a5b881d1a19481c185cdd60a21b606082015260800190565b60208082526025908201527f546f6b656e53616c653a20746865207072696365206d757374206e6f74206265604082015264207a65726f60d81b606082015260800190565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b60005b838110156120de5781810151838201526020016120c6565b838111156117635750506000910152565b600082516121018184602087016120c3565b9190910192915050565b602081526000825180602084015261212a8160408501602087016120c3565b601f01601f1916919091016040019291505056fea26469706673582212203187f9de1bc94f6ba8ca6ffb7e2438ccb59c8790bd234e8f23ce26e6bff8088664736f6c634300080b0033
```
```
608060405234801561001057600080fd5b506004361061021c5760003560e01c806373b2e80e11610125578063b3a891c9116100ad578063e9a2f2e01161007c578063e9a2f2e01461048e578063f2fde38b14610497578063f49af3fa146104aa578063fd7e60a9146104bd578063fee839c6146104d057600080fd5b8063b3a891c914610441578063b3f05b9714610454578063d0202d3b14610468578063dacec66e1461047b57600080fd5b80639b8906ae116100f45780639b8906ae146103fb578063a1d9eecf14610403578063ab0bcc4114610416578063abf017e914610430578063afb8a52e1461043957600080fd5b806373b2e80e146103ac5780638456cb59146103cf5780638b234215146103d75780638da5cb5b146103ea57600080fd5b80634e71d92d116101a85780635c975abb116101775780635c975abb14610351578063618426fc1461036857806368c91d8f146103715780636daf390b14610391578063715018a6146103a457600080fd5b80634e71d92d146102fb578063564f0848146103035780635b019b761461030c5780635c1952171461033e57600080fd5b806324f3dd2f116101ef57806324f3dd2f146102965780633711d9fb146102ad5780633f4ba83a146102d857806346afbc1b146102e05780634bb278f3146102f357600080fd5b806301681a62146102215780630d4ec845146102365780631c908d9814610249578063240877101461025c575b600080fd5b61023461022f366004611ac6565b6104f0565b005b610234610244366004611ac6565b610667565b610234610257366004611ac6565b6106db565b61027f61026a366004611ac6565b60a36020526000908152604090205460ff1681565b60405160ff90911681526020015b60405180910390f35b61029f60a05481565b60405190815260200161028d565b6099546102c0906001600160401b031681565b6040516001600160401b03909116815260200161028d565b610234610786565b6102346102ee366004611af8565b6107ba565b61023461088a565b61029f610a2d565b61029f609f5481565b60995461032690600160401b90046001600160a01b031681565b6040516001600160a01b03909116815260200161028d565b61029f61034c366004611b13565b610bc9565b60655460ff165b604051901515815260200161028d565b61029f609e5481565b61029f61037f366004611ac6565b609b6020526000908152604090205481565b609854610326906001600160a01b031681565b610234610c60565b6103586103ba366004611ac6565b609c6020526000908152604090205460ff1681565b610234610c94565b60a154610326906001600160a01b031681565b6033546001600160a01b0316610326565b610358610cc6565b61029f610411366004611b3b565b610d0d565b6098546102c090600160a01b90046001600160401b031681565b61029f609a5481565b61029f611102565b61023461044f366004611af8565b611123565b60995461035890600160e01b900460ff1681565b609754610326906001600160a01b031681565b610234610489366004611bc6565b6111fb565b61029f609d5481565b6102346104a5366004611ac6565b6113e0565b6102346104b8366004611b13565b61147b565b6102346104cb366004611b13565b611504565b61029f6104de366004611c4f565b60a26020526000908152604090205481565b6033546001600160a01b031633146105235760405162461bcd60e51b815260040161051a90611c6c565b60405180910390fd5b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a0823190602401602060405180830381865afa15801561056a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061058e9190611ca1565b6097549091506001600160a01b03838116911614156105c9576000609f54609e546105b99190611cd0565b90506105c58183611cd0565b9150505b6000811161060c5760405162461bcd60e51b815260206004820152601060248201526f06e6f7468696e6720746f2073776565760841b604482015260640161051a565b6106206001600160a01b0383163383611583565b816001600160a01b03167f1b94d65e3a03a98b13e90142a41884547fdd622b7f14a4daf94f6338e2e85cf08260405161065b91815260200190565b60405180910390a25050565b6033546001600160a01b031633146106915760405162461bcd60e51b815260040161051a90611c6c565b60a180546001600160a01b0319166001600160a01b0383169081179091556040517f650070ede2ab0ad22a57e15b88d668804b8f7c361a1ee8560093705f4d78abdd90600090a250565b6033546001600160a01b031633146107055760405162461bcd60e51b815260040161051a90611c6c565b6001600160a01b03811661072b5760405162461bcd60e51b815260040161051a90611ce7565b6099805468010000000000000000600160e01b031916600160401b6001600160a01b038416908102919091179091556040517f22fcd0f303ce9972cac865bf07f264510ba86521618196591c01ad233f97826690600090a250565b6033546001600160a01b031633146107b05760405162461bcd60e51b815260040161051a90611c6c565b6107b86115eb565b565b6033546001600160a01b031633146107e45760405162461bcd60e51b815260040161051a90611c6c565b6001600160401b03811661080a5760405162461bcd60e51b815260040161051a90611d33565b609954600160e01b900460ff16156108345760405162461bcd60e51b815260040161051a90611d80565b6099805467ffffffffffffffff19166001600160401b0383169081179091556040519081527f63d2e06731cd563c7ce4ee2e4227ead624e21cfb8bde59079d343e63ec3baf5f906020015b60405180910390a150565b6033546001600160a01b031633146108b45760405162461bcd60e51b815260040161051a90611c6c565b609954600160e01b900460ff16156108de5760405162461bcd60e51b815260040161051a90611d80565b6108e6610cc6565b6109325760405162461bcd60e51b815260206004820152601760248201527f546f6b656e53616c653a206e6f742066696e6973686564000000000000000000604482015260640161051a565b609e546097546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa15801561097d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a19190611ca1565b10156109ef5760405162461bcd60e51b815260206004820152601d60248201527f546f6b656e53616c653a206e6f7420656e6f7567682062616c616e6365000000604482015260640161051a565b6099805460ff60e01b1916600160e01b1790556040517f6823b073d48d6e3a7d385eeb601452d680e74bb46afe3255a7d778f3a9b1768190600090a1565b6000610a3b60655460ff1690565b15610a585760405162461bcd60e51b815260040161051a90611db7565b609954600160e01b900460ff16610aa65760405162461bcd60e51b81526020600482015260126024820152711cd85b19481b9bdd08199a5b985b1a5e995960721b604482015260640161051a565b336000908152609c602052604090205460ff1615610af85760405162461bcd60e51b815260206004820152600f60248201526e185b1c9958591e4818db185a5b5959608a1b604482015260640161051a565b50336000908152609b602052604090205480610b495760405162461bcd60e51b815260206004820152601060248201526f6e6f7468696e6720746f20636c61696d60801b604482015260640161051a565b336000908152609c60205260408120805460ff19166001179055609f8054839290610b75908490611de1565b9091555050609754610b91906001600160a01b03163383611583565b60405181815233907f47cee97cb7acd717b3c0aa1435d004cd5b3c8c57d70dbceb4e4458bbd60e39d49060200160405180910390a290565b609a546097546040805163313ce56760e01b81529051600093926001600160a01b03169163313ce5679160048083019260209291908290030181865afa158015610c17573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3b9190611df9565b610c4690600a611efa565b610c509084611f09565b610c5a9190611f28565b92915050565b6033546001600160a01b03163314610c8a5760405162461bcd60e51b815260040161051a90611c6c565b6107b8600061167e565b6033546001600160a01b03163314610cbe5760405162461bcd60e51b815260040161051a90611c6c565b6107b86116d0565b609954609854600091610ced916001600160401b0391821691600160a01b90910416611f4a565b6001600160401b031642101580610d08575060a054609d5410155b905090565b6000610d1b60655460ff1690565b15610d385760405162461bcd60e51b815260040161051a90611db7565b60985442600160a01b9091046001600160401b03161115610d945760405162461bcd60e51b8152602060048201526016602482015275151bdad95b94d85b194e881b9bdd081cdd185c9d195960521b604482015260640161051a565b609954609854610db7916001600160401b0390811691600160a01b900416611f4a565b6001600160401b03164210610e0e5760405162461bcd60e51b815260206004820152601860248201527f546f6b656e53616c653a20616c726561647920656e6465640000000000000000604482015260640161051a565b60008511610e5e5760405162461bcd60e51b815260206004820152601c60248201527f5f746f6b656e496e416d6f756e742073686f756c64206265203e203000000000604482015260640161051a565b60a05485609d54610e6f9190611de1565b1115610eb55760405162461bcd60e51b81526020600482015260156024820152741d1bdd185b08185b5bdd5b9d08195e18d959591959605a1b604482015260640161051a565b60a1546001600160a01b031615610f785760a154604051631849250160e21b81526001600160a01b0390911690636124940490610efa90339087908790600401611f75565b602060405180830381865afa158015610f17573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f3b9190611fc2565b610f785760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08185d5d1a1bdc9a5e995960921b604482015260640161051a565b336000908152609b60205260409020548015610ff75733600090815260a3602052604090205460ff868116911614610ff25760405162461bcd60e51b815260206004820152601c60248201527f63616e277420766f746520666f72206d756c7469706c652064616f7300000000604482015260640161051a565b611014565b33600090815260a360205260409020805460ff191660ff87161790555b61101d86610bc9565b91506110298282611de1565b336000908152609b602090815260408083209390935560ff8816825260a29052908120805484929061105c908490611de1565b9250508190555085609d60008282546110759190611de1565b9250508190555081609e600082825461108e9190611de1565b90915550506099546098546110b9916001600160a01b03918216913391600160401b90041689611728565b604080518781526020810184905260ff87169133917f1ec0c95078c890035e941915909bcfe875eca2b01352f0caaf74680fe1d297ce910160405180910390a350949350505050565b600060a054609d54101561112057609d5460a054610d089190611cd0565b90565b6033546001600160a01b0316331461114d5760405162461bcd60e51b815260040161051a90611c6c565b42816001600160401b031610156111765760405162461bcd60e51b815260040161051a90611fe4565b609954600160e01b900460ff16156111a05760405162461bcd60e51b815260040161051a90611d80565b6098805467ffffffffffffffff60a01b1916600160a01b6001600160401b038416908102919091179091556040519081527fe91b422c48d1f63476e86148f126e887ed21d449f2881a51c364f3519e73a8949060200161087f565b600054610100900460ff166112165760005460ff161561121a565b303b155b61127d5760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161051a565b600054610100900460ff1615801561129f576000805461ffff19166101011790555b42876001600160401b031610156112c85760405162461bcd60e51b815260040161051a90611fe4565b6000866001600160401b0316116112f15760405162461bcd60e51b815260040161051a90611d33565b600085116113115760405162461bcd60e51b815260040161051a90612030565b6001600160a01b0384166113375760405162461bcd60e51b815260040161051a90611ce7565b61133f611766565b61134761179d565b609780546001600160a01b03808c166001600160a01b031992831617909255609880546001600160401b03808c16600160a01b026001600160e01b03199283168e8716171790925560998054609a8b9055898616600160401b029216928b169290921717905560a180549286169290911691909117905560a082905580156113d5576000805461ff00191690555b505050505050505050565b6033546001600160a01b0316331461140a5760405162461bcd60e51b815260040161051a90611c6c565b6001600160a01b03811661146f5760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161051a565b6114788161167e565b50565b6033546001600160a01b031633146114a55760405162461bcd60e51b815260040161051a90611c6c565b609954600160e01b900460ff16156114cf5760405162461bcd60e51b815260040161051a90611d80565b60a08190556040518181527fc03e813ac3c72b419d55e3347033254b7730e1c13579c72e3b0258faa1c228a79060200161087f565b6033546001600160a01b0316331461152e5760405162461bcd60e51b815260040161051a90611c6c565b6000811161154e5760405162461bcd60e51b815260040161051a90612030565b609a8190556040518181527f1547cf4f4e088a233f379adf2a2ca21d8007a1a0273ac91fa1ec95d0c8e8414b9060200161087f565b6040516001600160a01b0383166024820152604481018290526115e690849063a9059cbb60e01b906064015b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526117d4565b505050565b60655460ff166116345760405162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604482015260640161051a565b6065805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b60655460ff16156116f35760405162461bcd60e51b815260040161051a90611db7565b6065805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586116613390565b6040516001600160a01b03808516602483015283166044820152606481018290526117609085906323b872dd60e01b906084016115af565b50505050565b600054610100900460ff1661178d5760405162461bcd60e51b815260040161051a90612075565b6117956118a6565b6107b86118cd565b600054610100900460ff166117c45760405162461bcd60e51b815260040161051a90612075565b6117cc6118a6565b6107b86118fd565b6000611829826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166119309092919063ffffffff16565b8051909150156115e657808060200190518101906118479190611fc2565b6115e65760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161051a565b600054610100900460ff166107b85760405162461bcd60e51b815260040161051a90612075565b600054610100900460ff166118f45760405162461bcd60e51b815260040161051a90612075565b6107b83361167e565b600054610100900460ff166119245760405162461bcd60e51b815260040161051a90612075565b6065805460ff19169055565b606061193f8484600085611949565b90505b9392505050565b6060824710156119aa5760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b606482015260840161051a565b843b6119f85760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161051a565b600080866001600160a01b03168587604051611a1491906120ec565b60006040518083038185875af1925050503d8060008114611a51576040519150601f19603f3d011682016040523d82523d6000602084013e611a56565b606091505b5091509150611a66828286611a71565b979650505050505050565b60608315611a80575081611942565b825115611a905782518084602001fd5b8160405162461bcd60e51b815260040161051a9190612108565b80356001600160a01b0381168114611ac157600080fd5b919050565b600060208284031215611ad857600080fd5b61194282611aaa565b80356001600160401b0381168114611ac157600080fd5b600060208284031215611b0a57600080fd5b61194282611ae1565b600060208284031215611b2557600080fd5b5035919050565b60ff8116811461147857600080fd5b60008060008060608587031215611b5157600080fd5b843593506020850135611b6381611b2c565b925060408501356001600160401b0380821115611b7f57600080fd5b818701915087601f830112611b9357600080fd5b813581811115611ba257600080fd5b8860208260051b8501011115611bb757600080fd5b95989497505060200194505050565b600080600080600080600080610100898b031215611be357600080fd5b611bec89611aaa565b9750611bfa60208a01611aaa565b9650611c0860408a01611ae1565b9550611c1660608a01611ae1565b945060808901359350611c2b60a08a01611aaa565b9250611c3960c08a01611aaa565b915060e089013590509295985092959890939650565b600060208284031215611c6157600080fd5b813561194281611b2c565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b600060208284031215611cb357600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b600082821015611ce257611ce2611cba565b500390565b6020808252602c908201527f546f6b656e53616c653a2073616c6520726563697069656e742073686f756c6460408201526b206e6f74206265207a65726f60a01b606082015260800190565b6020808252602d908201527f546f6b656e53616c653a207468652073616c65206475726174696f6e206d757360408201526c74206e6f74206265207a65726f60981b606082015260800190565b6020808252601c908201527f546f6b656e53616c653a20616c72656164792066696e616c697a656400000000604082015260600190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b60008219821115611df457611df4611cba565b500190565b600060208284031215611e0b57600080fd5b815161194281611b2c565b600181815b80851115611e51578160001904821115611e3757611e37611cba565b80851615611e4457918102915b93841c9390800290611e1b565b509250929050565b600082611e6857506001610c5a565b81611e7557506000610c5a565b8160018114611e8b5760028114611e9557611eb1565b6001915050610c5a565b60ff841115611ea657611ea6611cba565b50506001821b610c5a565b5060208310610133831016604e8410600b8410161715611ed4575081810a610c5a565b611ede8383611e16565b8060001904821115611ef257611ef2611cba565b029392505050565b600061194260ff841683611e59565b6000816000190483118215151615611f2357611f23611cba565b500290565b600082611f4557634e487b7160e01b600052601260045260246000fd5b500490565b60006001600160401b03808316818516808303821115611f6c57611f6c611cba565b01949350505050565b6001600160a01b0384168152604060208201819052810182905260006001600160fb1b03831115611fa557600080fd5b8260051b8085606085013760009201606001918252509392505050565b600060208284031215611fd457600080fd5b8151801515811461194257600080fd5b6020808252602c908201527f546f6b656e53616c653a2073746172742064617465206d6179206e6f7420626560408201526b081a5b881d1a19481c185cdd60a21b606082015260800190565b60208082526025908201527f546f6b656e53616c653a20746865207072696365206d757374206e6f74206265604082015264207a65726f60d81b606082015260800190565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b60005b838110156120db5781810151838201526020016120c3565b838111156117605750506000910152565b600082516120fe8184602087016120c0565b9190910192915050565b60208152600082518060208401526121278160408501602087016120c0565b601f01601f1916919091016040019291505056fea2646970667358221220e6fd10fcadf132e61583e520969911682c3f934d83dcf08a718e9c5a5aad128264736f6c634300080b0033
```

These are the byte code differences between the two versions

| PC.Orig      | Operation.Orig              | Gas.Orig | PC.New       | Operation.New               | Gas.New |
| -            | -                           | :-:      | -            | -                           | :-:     |
| 2020(0x07e4) | JUMPDEST(0x5b)@0x07e4       | 1        | 2020(0x07e4) | JUMPDEST(0x5b)@0x07e4       | 1       |
| 2021(0x07e5) | PUSH1(0x60) ["0x00"]        | 3        | 2021(0x07e5) | PUSH1(0x60) ["0x01"]        | 3       |
| 2023(0x07e7) | DUP2(0x81)                  | 3        |              |                             |         |
| 2024(0x07e8) | PUSH1(0x60) ["0x01"]        | 3        | 2023(0x07e7) | PUSH1(0x60) ["0x01"]        | 3       |
| 2026(0x07ea) | PUSH1(0x60) ["0x01"]        | 3        | 2025(0x07e9) | PUSH1(0x60) ["0x40"]        | 3       |
| 2028(0x07ec) | PUSH1(0x60) ["0x40"]        | 3        |              |                             |         |
| 2030(0x07ee) | SHL(0x1b)                   | 3        | 2027(0x07eb) | SHL(0x1b)                   | 3       |
| 2031(0x07ef) | SUB(0x3)                    | 3        | 2028(0x07ec) | SUB(0x3)                    | 3       |
|              |                             |          | 2029(0x07ed) | DUP2(0x81)                  | 3       |
| 2032(0x07f0) | AND(0x16)                   | 3        | 2030(0x07ee) | AND(0x16)                   | 3       |
| 2033(0x07f1) | GT(0x11)                    | 3        |              |                             |         |
| 2034(0x07f2) | PUSH2(0x61) ["0x08","0x0d"] | 3        | 2031(0x07ef) | PUSH2(0x61) ["0x08","0x0a"] | 3       |
| 2037(0x07f5) | JUMPI(0x57)                 | 10       | 2034(0x07f2) | JUMPI(0x57)                 | 10      |
|              |                             |          |              |                             |         |
|              | Total.Orig:                 | 41       |              | Total.New:                  | 35      |

The suggested change provides a savings of 6 gas

```
diff forgeResults.orig forgeResults.new
25c25
< [32m[PASS][0m testExtendSaleDuration() (gas: 15922)
---
> [32m[PASS][0m testExtendSaleDuration() (gas: 15916)
38c38
< [32m[PASS][0m testSetSaleDuration() (gas: 9491)
---
> [32m[PASS][0m testSetSaleDuration() (gas: 9485)
75c75
< │ 1714599                       ┆ 8596            ┆        ┆        ┆        ┆         │
---
> │ 1713999                       ┆ 8593            ┆        ┆        ┆        ┆         │
117c117
< │ setSaleDuration               ┆ 679             ┆ 1592   ┆ 2049   ┆ 2049   ┆ 3       │
---
> │ setSaleDuration               ┆ 679             ┆ 1588   ┆ 2043   ┆ 2043   ┆ 3       │
```


### 5. [TokenSaleUpgradeable.sol:L304](https://github.com/code-423n4/2022-02-badger-citadel/blob/84596551d62f243d13fcb2d486346dde08002f7b/contracts/TokenSaleUpgradeable.sol#L304)
```solidity
         require(_tokenOutPrice > 0, "TokenSale: the price must not be zero");
```

This is the diff of the original version of `contracts/TokenSaleUpgradeable.sol` and a new, optimized version
```solidity
304c304
<         require(_tokenOutPrice > 0, "TokenSale: the price must not be zero");
---
>         require(_tokenOutPrice != 0, "TokenSale: the price must not be zero");
```
These are the original byte code, followed by the byte code compiled from the new version
```
608060405234801561001057600080fd5b506004361061021c5760003560e01c806373b2e80e11610125578063b3a891c9116100ad578063e9a2f2e01161007c578063e9a2f2e01461048e578063f2fde38b14610497578063f49af3fa146104aa578063fd7e60a9146104bd578063fee839c6146104d057600080fd5b8063b3a891c914610441578063b3f05b9714610454578063d0202d3b14610468578063dacec66e1461047b57600080fd5b80639b8906ae116100f45780639b8906ae146103fb578063a1d9eecf14610403578063ab0bcc4114610416578063abf017e914610430578063afb8a52e1461043957600080fd5b806373b2e80e146103ac5780638456cb59146103cf5780638b234215146103d75780638da5cb5b146103ea57600080fd5b80634e71d92d116101a85780635c975abb116101775780635c975abb14610351578063618426fc1461036857806368c91d8f146103715780636daf390b14610391578063715018a6146103a457600080fd5b80634e71d92d146102fb578063564f0848146103035780635b019b761461030c5780635c1952171461033e57600080fd5b806324f3dd2f116101ef57806324f3dd2f146102965780633711d9fb146102ad5780633f4ba83a146102d857806346afbc1b146102e05780634bb278f3146102f357600080fd5b806301681a62146102215780630d4ec845146102365780631c908d9814610249578063240877101461025c575b600080fd5b61023461022f366004611ac9565b6104f0565b005b610234610244366004611ac9565b610667565b610234610257366004611ac9565b6106db565b61027f61026a366004611ac9565b60a36020526000908152604090205460ff1681565b60405160ff90911681526020015b60405180910390f35b61029f60a05481565b60405190815260200161028d565b6099546102c0906001600160401b031681565b6040516001600160401b03909116815260200161028d565b610234610786565b6102346102ee366004611afb565b6107ba565b61023461088d565b61029f610a30565b61029f609f5481565b60995461032690600160401b90046001600160a01b031681565b6040516001600160a01b03909116815260200161028d565b61029f61034c366004611b16565b610bcc565b60655460ff165b604051901515815260200161028d565b61029f609e5481565b61029f61037f366004611ac9565b609b6020526000908152604090205481565b609854610326906001600160a01b031681565b610234610c63565b6103586103ba366004611ac9565b609c6020526000908152604090205460ff1681565b610234610c97565b60a154610326906001600160a01b031681565b6033546001600160a01b0316610326565b610358610cc9565b61029f610411366004611b3e565b610d10565b6098546102c090600160a01b90046001600160401b031681565b61029f609a5481565b61029f611105565b61023461044f366004611afb565b611126565b60995461035890600160e01b900460ff1681565b609754610326906001600160a01b031681565b610234610489366004611bc9565b6111fe565b61029f609d5481565b6102346104a5366004611ac9565b6113e3565b6102346104b8366004611b16565b61147e565b6102346104cb366004611b16565b611507565b61029f6104de366004611c52565b60a26020526000908152604090205481565b6033546001600160a01b031633146105235760405162461bcd60e51b815260040161051a90611c6f565b60405180910390fd5b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a0823190602401602060405180830381865afa15801561056a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061058e9190611ca4565b6097549091506001600160a01b03838116911614156105c9576000609f54609e546105b99190611cd3565b90506105c58183611cd3565b9150505b6000811161060c5760405162461bcd60e51b815260206004820152601060248201526f06e6f7468696e6720746f2073776565760841b604482015260640161051a565b6106206001600160a01b0383163383611586565b816001600160a01b03167f1b94d65e3a03a98b13e90142a41884547fdd622b7f14a4daf94f6338e2e85cf08260405161065b91815260200190565b60405180910390a25050565b6033546001600160a01b031633146106915760405162461bcd60e51b815260040161051a90611c6f565b60a180546001600160a01b0319166001600160a01b0383169081179091556040517f650070ede2ab0ad22a57e15b88d668804b8f7c361a1ee8560093705f4d78abdd90600090a250565b6033546001600160a01b031633146107055760405162461bcd60e51b815260040161051a90611c6f565b6001600160a01b03811661072b5760405162461bcd60e51b815260040161051a90611cea565b6099805468010000000000000000600160e01b031916600160401b6001600160a01b038416908102919091179091556040517f22fcd0f303ce9972cac865bf07f264510ba86521618196591c01ad233f97826690600090a250565b6033546001600160a01b031633146107b05760405162461bcd60e51b815260040161051a90611c6f565b6107b86115ee565b565b6033546001600160a01b031633146107e45760405162461bcd60e51b815260040161051a90611c6f565b6000816001600160401b03161161080d5760405162461bcd60e51b815260040161051a90611d36565b609954600160e01b900460ff16156108375760405162461bcd60e51b815260040161051a90611d83565b6099805467ffffffffffffffff19166001600160401b0383169081179091556040519081527f63d2e06731cd563c7ce4ee2e4227ead624e21cfb8bde59079d343e63ec3baf5f906020015b60405180910390a150565b6033546001600160a01b031633146108b75760405162461bcd60e51b815260040161051a90611c6f565b609954600160e01b900460ff16156108e15760405162461bcd60e51b815260040161051a90611d83565b6108e9610cc9565b6109355760405162461bcd60e51b815260206004820152601760248201527f546f6b656e53616c653a206e6f742066696e6973686564000000000000000000604482015260640161051a565b609e546097546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015610980573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a49190611ca4565b10156109f25760405162461bcd60e51b815260206004820152601d60248201527f546f6b656e53616c653a206e6f7420656e6f7567682062616c616e6365000000604482015260640161051a565b6099805460ff60e01b1916600160e01b1790556040517f6823b073d48d6e3a7d385eeb601452d680e74bb46afe3255a7d778f3a9b1768190600090a1565b6000610a3e60655460ff1690565b15610a5b5760405162461bcd60e51b815260040161051a90611dba565b609954600160e01b900460ff16610aa95760405162461bcd60e51b81526020600482015260126024820152711cd85b19481b9bdd08199a5b985b1a5e995960721b604482015260640161051a565b336000908152609c602052604090205460ff1615610afb5760405162461bcd60e51b815260206004820152600f60248201526e185b1c9958591e4818db185a5b5959608a1b604482015260640161051a565b50336000908152609b602052604090205480610b4c5760405162461bcd60e51b815260206004820152601060248201526f6e6f7468696e6720746f20636c61696d60801b604482015260640161051a565b336000908152609c60205260408120805460ff19166001179055609f8054839290610b78908490611de4565b9091555050609754610b94906001600160a01b03163383611586565b60405181815233907f47cee97cb7acd717b3c0aa1435d004cd5b3c8c57d70dbceb4e4458bbd60e39d49060200160405180910390a290565b609a546097546040805163313ce56760e01b81529051600093926001600160a01b03169163313ce5679160048083019260209291908290030181865afa158015610c1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3e9190611dfc565b610c4990600a611efd565b610c539084611f0c565b610c5d9190611f2b565b92915050565b6033546001600160a01b03163314610c8d5760405162461bcd60e51b815260040161051a90611c6f565b6107b86000611681565b6033546001600160a01b03163314610cc15760405162461bcd60e51b815260040161051a90611c6f565b6107b86116d3565b609954609854600091610cf0916001600160401b0391821691600160a01b90910416611f4d565b6001600160401b031642101580610d0b575060a054609d5410155b905090565b6000610d1e60655460ff1690565b15610d3b5760405162461bcd60e51b815260040161051a90611dba565b60985442600160a01b9091046001600160401b03161115610d975760405162461bcd60e51b8152602060048201526016602482015275151bdad95b94d85b194e881b9bdd081cdd185c9d195960521b604482015260640161051a565b609954609854610dba916001600160401b0390811691600160a01b900416611f4d565b6001600160401b03164210610e115760405162461bcd60e51b815260206004820152601860248201527f546f6b656e53616c653a20616c726561647920656e6465640000000000000000604482015260640161051a565b60008511610e615760405162461bcd60e51b815260206004820152601c60248201527f5f746f6b656e496e416d6f756e742073686f756c64206265203e203000000000604482015260640161051a565b60a05485609d54610e729190611de4565b1115610eb85760405162461bcd60e51b81526020600482015260156024820152741d1bdd185b08185b5bdd5b9d08195e18d959591959605a1b604482015260640161051a565b60a1546001600160a01b031615610f7b5760a154604051631849250160e21b81526001600160a01b0390911690636124940490610efd90339087908790600401611f78565b602060405180830381865afa158015610f1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f3e9190611fc5565b610f7b5760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08185d5d1a1bdc9a5e995960921b604482015260640161051a565b336000908152609b60205260409020548015610ffa5733600090815260a3602052604090205460ff868116911614610ff55760405162461bcd60e51b815260206004820152601c60248201527f63616e277420766f746520666f72206d756c7469706c652064616f7300000000604482015260640161051a565b611017565b33600090815260a360205260409020805460ff191660ff87161790555b61102086610bcc565b915061102c8282611de4565b336000908152609b602090815260408083209390935560ff8816825260a29052908120805484929061105f908490611de4565b9250508190555085609d60008282546110789190611de4565b9250508190555081609e60008282546110919190611de4565b90915550506099546098546110bc916001600160a01b03918216913391600160401b9004168961172b565b604080518781526020810184905260ff87169133917f1ec0c95078c890035e941915909bcfe875eca2b01352f0caaf74680fe1d297ce910160405180910390a350949350505050565b600060a054609d54101561112357609d5460a054610d0b9190611cd3565b90565b6033546001600160a01b031633146111505760405162461bcd60e51b815260040161051a90611c6f565b42816001600160401b031610156111795760405162461bcd60e51b815260040161051a90611fe7565b609954600160e01b900460ff16156111a35760405162461bcd60e51b815260040161051a90611d83565b6098805467ffffffffffffffff60a01b1916600160a01b6001600160401b038416908102919091179091556040519081527fe91b422c48d1f63476e86148f126e887ed21d449f2881a51c364f3519e73a89490602001610882565b600054610100900460ff166112195760005460ff161561121d565b303b155b6112805760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161051a565b600054610100900460ff161580156112a2576000805461ffff19166101011790555b42876001600160401b031610156112cb5760405162461bcd60e51b815260040161051a90611fe7565b6000866001600160401b0316116112f45760405162461bcd60e51b815260040161051a90611d36565b600085116113145760405162461bcd60e51b815260040161051a90612033565b6001600160a01b03841661133a5760405162461bcd60e51b815260040161051a90611cea565b611342611769565b61134a6117a0565b609780546001600160a01b03808c166001600160a01b031992831617909255609880546001600160401b03808c16600160a01b026001600160e01b03199283168e8716171790925560998054609a8b9055898616600160401b029216928b169290921717905560a180549286169290911691909117905560a082905580156113d8576000805461ff00191690555b505050505050505050565b6033546001600160a01b0316331461140d5760405162461bcd60e51b815260040161051a90611c6f565b6001600160a01b0381166114725760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161051a565b61147b81611681565b50565b6033546001600160a01b031633146114a85760405162461bcd60e51b815260040161051a90611c6f565b609954600160e01b900460ff16156114d25760405162461bcd60e51b815260040161051a90611d83565b60a08190556040518181527fc03e813ac3c72b419d55e3347033254b7730e1c13579c72e3b0258faa1c228a790602001610882565b6033546001600160a01b031633146115315760405162461bcd60e51b815260040161051a90611c6f565b600081116115515760405162461bcd60e51b815260040161051a90612033565b609a8190556040518181527f1547cf4f4e088a233f379adf2a2ca21d8007a1a0273ac91fa1ec95d0c8e8414b90602001610882565b6040516001600160a01b0383166024820152604481018290526115e990849063a9059cbb60e01b906064015b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526117d7565b505050565b60655460ff166116375760405162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604482015260640161051a565b6065805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b60655460ff16156116f65760405162461bcd60e51b815260040161051a90611dba565b6065805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586116643390565b6040516001600160a01b03808516602483015283166044820152606481018290526117639085906323b872dd60e01b906084016115b2565b50505050565b600054610100900460ff166117905760405162461bcd60e51b815260040161051a90612078565b6117986118a9565b6107b86118d0565b600054610100900460ff166117c75760405162461bcd60e51b815260040161051a90612078565b6117cf6118a9565b6107b8611900565b600061182c826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166119339092919063ffffffff16565b8051909150156115e9578080602001905181019061184a9190611fc5565b6115e95760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161051a565b600054610100900460ff166107b85760405162461bcd60e51b815260040161051a90612078565b600054610100900460ff166118f75760405162461bcd60e51b815260040161051a90612078565b6107b833611681565b600054610100900460ff166119275760405162461bcd60e51b815260040161051a90612078565b6065805460ff19169055565b6060611942848460008561194c565b90505b9392505050565b6060824710156119ad5760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b606482015260840161051a565b843b6119fb5760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161051a565b600080866001600160a01b03168587604051611a1791906120ef565b60006040518083038185875af1925050503d8060008114611a54576040519150601f19603f3d011682016040523d82523d6000602084013e611a59565b606091505b5091509150611a69828286611a74565b979650505050505050565b60608315611a83575081611945565b825115611a935782518084602001fd5b8160405162461bcd60e51b815260040161051a919061210b565b80356001600160a01b0381168114611ac457600080fd5b919050565b600060208284031215611adb57600080fd5b61194582611aad565b80356001600160401b0381168114611ac457600080fd5b600060208284031215611b0d57600080fd5b61194582611ae4565b600060208284031215611b2857600080fd5b5035919050565b60ff8116811461147b57600080fd5b60008060008060608587031215611b5457600080fd5b843593506020850135611b6681611b2f565b925060408501356001600160401b0380821115611b8257600080fd5b818701915087601f830112611b9657600080fd5b813581811115611ba557600080fd5b8860208260051b8501011115611bba57600080fd5b95989497505060200194505050565b600080600080600080600080610100898b031215611be657600080fd5b611bef89611aad565b9750611bfd60208a01611aad565b9650611c0b60408a01611ae4565b9550611c1960608a01611ae4565b945060808901359350611c2e60a08a01611aad565b9250611c3c60c08a01611aad565b915060e089013590509295985092959890939650565b600060208284031215611c6457600080fd5b813561194581611b2f565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b600060208284031215611cb657600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b600082821015611ce557611ce5611cbd565b500390565b6020808252602c908201527f546f6b656e53616c653a2073616c6520726563697069656e742073686f756c6460408201526b206e6f74206265207a65726f60a01b606082015260800190565b6020808252602d908201527f546f6b656e53616c653a207468652073616c65206475726174696f6e206d757360408201526c74206e6f74206265207a65726f60981b606082015260800190565b6020808252601c908201527f546f6b656e53616c653a20616c72656164792066696e616c697a656400000000604082015260600190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b60008219821115611df757611df7611cbd565b500190565b600060208284031215611e0e57600080fd5b815161194581611b2f565b600181815b80851115611e54578160001904821115611e3a57611e3a611cbd565b80851615611e4757918102915b93841c9390800290611e1e565b509250929050565b600082611e6b57506001610c5d565b81611e7857506000610c5d565b8160018114611e8e5760028114611e9857611eb4565b6001915050610c5d565b60ff841115611ea957611ea9611cbd565b50506001821b610c5d565b5060208310610133831016604e8410600b8410161715611ed7575081810a610c5d565b611ee18383611e19565b8060001904821115611ef557611ef5611cbd565b029392505050565b600061194560ff841683611e5c565b6000816000190483118215151615611f2657611f26611cbd565b500290565b600082611f4857634e487b7160e01b600052601260045260246000fd5b500490565b60006001600160401b03808316818516808303821115611f6f57611f6f611cbd565b01949350505050565b6001600160a01b0384168152604060208201819052810182905260006001600160fb1b03831115611fa857600080fd5b8260051b8085606085013760009201606001918252509392505050565b600060208284031215611fd757600080fd5b8151801515811461194557600080fd5b6020808252602c908201527f546f6b656e53616c653a2073746172742064617465206d6179206e6f7420626560408201526b081a5b881d1a19481c185cdd60a21b606082015260800190565b60208082526025908201527f546f6b656e53616c653a20746865207072696365206d757374206e6f74206265604082015264207a65726f60d81b606082015260800190565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b60005b838110156120de5781810151838201526020016120c6565b838111156117635750506000910152565b600082516121018184602087016120c3565b9190910192915050565b602081526000825180602084015261212a8160408501602087016120c3565b601f01601f1916919091016040019291505056fea26469706673582212203187f9de1bc94f6ba8ca6ffb7e2438ccb59c8790bd234e8f23ce26e6bff8088664736f6c634300080b0033
```
```
608060405234801561001057600080fd5b506004361061021c5760003560e01c806373b2e80e11610125578063b3a891c9116100ad578063e9a2f2e01161007c578063e9a2f2e01461048e578063f2fde38b14610497578063f49af3fa146104aa578063fd7e60a9146104bd578063fee839c6146104d057600080fd5b8063b3a891c914610441578063b3f05b9714610454578063d0202d3b14610468578063dacec66e1461047b57600080fd5b80639b8906ae116100f45780639b8906ae146103fb578063a1d9eecf14610403578063ab0bcc4114610416578063abf017e914610430578063afb8a52e1461043957600080fd5b806373b2e80e146103ac5780638456cb59146103cf5780638b234215146103d75780638da5cb5b146103ea57600080fd5b80634e71d92d116101a85780635c975abb116101775780635c975abb14610351578063618426fc1461036857806368c91d8f146103715780636daf390b14610391578063715018a6146103a457600080fd5b80634e71d92d146102fb578063564f0848146103035780635b019b761461030c5780635c1952171461033e57600080fd5b806324f3dd2f116101ef57806324f3dd2f146102965780633711d9fb146102ad5780633f4ba83a146102d857806346afbc1b146102e05780634bb278f3146102f357600080fd5b806301681a62146102215780630d4ec845146102365780631c908d9814610249578063240877101461025c575b600080fd5b61023461022f366004611ac6565b6104f0565b005b610234610244366004611ac6565b610667565b610234610257366004611ac6565b6106db565b61027f61026a366004611ac6565b60a36020526000908152604090205460ff1681565b60405160ff90911681526020015b60405180910390f35b61029f60a05481565b60405190815260200161028d565b6099546102c0906001600160401b031681565b6040516001600160401b03909116815260200161028d565b610234610786565b6102346102ee366004611af8565b6107ba565b61023461088d565b61029f610a30565b61029f609f5481565b60995461032690600160401b90046001600160a01b031681565b6040516001600160a01b03909116815260200161028d565b61029f61034c366004611b13565b610bcc565b60655460ff165b604051901515815260200161028d565b61029f609e5481565b61029f61037f366004611ac6565b609b6020526000908152604090205481565b609854610326906001600160a01b031681565b610234610c63565b6103586103ba366004611ac6565b609c6020526000908152604090205460ff1681565b610234610c97565b60a154610326906001600160a01b031681565b6033546001600160a01b0316610326565b610358610cc9565b61029f610411366004611b3b565b610d10565b6098546102c090600160a01b90046001600160401b031681565b61029f609a5481565b61029f611105565b61023461044f366004611af8565b611126565b60995461035890600160e01b900460ff1681565b609754610326906001600160a01b031681565b610234610489366004611bc6565b6111fe565b61029f609d5481565b6102346104a5366004611ac6565b6113e3565b6102346104b8366004611b13565b61147e565b6102346104cb366004611b13565b611507565b61029f6104de366004611c4f565b60a26020526000908152604090205481565b6033546001600160a01b031633146105235760405162461bcd60e51b815260040161051a90611c6c565b60405180910390fd5b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a0823190602401602060405180830381865afa15801561056a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061058e9190611ca1565b6097549091506001600160a01b03838116911614156105c9576000609f54609e546105b99190611cd0565b90506105c58183611cd0565b9150505b6000811161060c5760405162461bcd60e51b815260206004820152601060248201526f06e6f7468696e6720746f2073776565760841b604482015260640161051a565b6106206001600160a01b0383163383611583565b816001600160a01b03167f1b94d65e3a03a98b13e90142a41884547fdd622b7f14a4daf94f6338e2e85cf08260405161065b91815260200190565b60405180910390a25050565b6033546001600160a01b031633146106915760405162461bcd60e51b815260040161051a90611c6c565b60a180546001600160a01b0319166001600160a01b0383169081179091556040517f650070ede2ab0ad22a57e15b88d668804b8f7c361a1ee8560093705f4d78abdd90600090a250565b6033546001600160a01b031633146107055760405162461bcd60e51b815260040161051a90611c6c565b6001600160a01b03811661072b5760405162461bcd60e51b815260040161051a90611ce7565b6099805468010000000000000000600160e01b031916600160401b6001600160a01b038416908102919091179091556040517f22fcd0f303ce9972cac865bf07f264510ba86521618196591c01ad233f97826690600090a250565b6033546001600160a01b031633146107b05760405162461bcd60e51b815260040161051a90611c6c565b6107b86115eb565b565b6033546001600160a01b031633146107e45760405162461bcd60e51b815260040161051a90611c6c565b6000816001600160401b03161161080d5760405162461bcd60e51b815260040161051a90611d33565b609954600160e01b900460ff16156108375760405162461bcd60e51b815260040161051a90611d80565b6099805467ffffffffffffffff19166001600160401b0383169081179091556040519081527f63d2e06731cd563c7ce4ee2e4227ead624e21cfb8bde59079d343e63ec3baf5f906020015b60405180910390a150565b6033546001600160a01b031633146108b75760405162461bcd60e51b815260040161051a90611c6c565b609954600160e01b900460ff16156108e15760405162461bcd60e51b815260040161051a90611d80565b6108e9610cc9565b6109355760405162461bcd60e51b815260206004820152601760248201527f546f6b656e53616c653a206e6f742066696e6973686564000000000000000000604482015260640161051a565b609e546097546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015610980573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a49190611ca1565b10156109f25760405162461bcd60e51b815260206004820152601d60248201527f546f6b656e53616c653a206e6f7420656e6f7567682062616c616e6365000000604482015260640161051a565b6099805460ff60e01b1916600160e01b1790556040517f6823b073d48d6e3a7d385eeb601452d680e74bb46afe3255a7d778f3a9b1768190600090a1565b6000610a3e60655460ff1690565b15610a5b5760405162461bcd60e51b815260040161051a90611db7565b609954600160e01b900460ff16610aa95760405162461bcd60e51b81526020600482015260126024820152711cd85b19481b9bdd08199a5b985b1a5e995960721b604482015260640161051a565b336000908152609c602052604090205460ff1615610afb5760405162461bcd60e51b815260206004820152600f60248201526e185b1c9958591e4818db185a5b5959608a1b604482015260640161051a565b50336000908152609b602052604090205480610b4c5760405162461bcd60e51b815260206004820152601060248201526f6e6f7468696e6720746f20636c61696d60801b604482015260640161051a565b336000908152609c60205260408120805460ff19166001179055609f8054839290610b78908490611de1565b9091555050609754610b94906001600160a01b03163383611583565b60405181815233907f47cee97cb7acd717b3c0aa1435d004cd5b3c8c57d70dbceb4e4458bbd60e39d49060200160405180910390a290565b609a546097546040805163313ce56760e01b81529051600093926001600160a01b03169163313ce5679160048083019260209291908290030181865afa158015610c1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3e9190611df9565b610c4990600a611efa565b610c539084611f09565b610c5d9190611f28565b92915050565b6033546001600160a01b03163314610c8d5760405162461bcd60e51b815260040161051a90611c6c565b6107b8600061167e565b6033546001600160a01b03163314610cc15760405162461bcd60e51b815260040161051a90611c6c565b6107b86116d0565b609954609854600091610cf0916001600160401b0391821691600160a01b90910416611f4a565b6001600160401b031642101580610d0b575060a054609d5410155b905090565b6000610d1e60655460ff1690565b15610d3b5760405162461bcd60e51b815260040161051a90611db7565b60985442600160a01b9091046001600160401b03161115610d975760405162461bcd60e51b8152602060048201526016602482015275151bdad95b94d85b194e881b9bdd081cdd185c9d195960521b604482015260640161051a565b609954609854610dba916001600160401b0390811691600160a01b900416611f4a565b6001600160401b03164210610e115760405162461bcd60e51b815260206004820152601860248201527f546f6b656e53616c653a20616c726561647920656e6465640000000000000000604482015260640161051a565b60008511610e615760405162461bcd60e51b815260206004820152601c60248201527f5f746f6b656e496e416d6f756e742073686f756c64206265203e203000000000604482015260640161051a565b60a05485609d54610e729190611de1565b1115610eb85760405162461bcd60e51b81526020600482015260156024820152741d1bdd185b08185b5bdd5b9d08195e18d959591959605a1b604482015260640161051a565b60a1546001600160a01b031615610f7b5760a154604051631849250160e21b81526001600160a01b0390911690636124940490610efd90339087908790600401611f75565b602060405180830381865afa158015610f1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f3e9190611fc2565b610f7b5760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08185d5d1a1bdc9a5e995960921b604482015260640161051a565b336000908152609b60205260409020548015610ffa5733600090815260a3602052604090205460ff868116911614610ff55760405162461bcd60e51b815260206004820152601c60248201527f63616e277420766f746520666f72206d756c7469706c652064616f7300000000604482015260640161051a565b611017565b33600090815260a360205260409020805460ff191660ff87161790555b61102086610bcc565b915061102c8282611de1565b336000908152609b602090815260408083209390935560ff8816825260a29052908120805484929061105f908490611de1565b9250508190555085609d60008282546110789190611de1565b9250508190555081609e60008282546110919190611de1565b90915550506099546098546110bc916001600160a01b03918216913391600160401b90041689611728565b604080518781526020810184905260ff87169133917f1ec0c95078c890035e941915909bcfe875eca2b01352f0caaf74680fe1d297ce910160405180910390a350949350505050565b600060a054609d54101561112357609d5460a054610d0b9190611cd0565b90565b6033546001600160a01b031633146111505760405162461bcd60e51b815260040161051a90611c6c565b42816001600160401b031610156111795760405162461bcd60e51b815260040161051a90611fe4565b609954600160e01b900460ff16156111a35760405162461bcd60e51b815260040161051a90611d80565b6098805467ffffffffffffffff60a01b1916600160a01b6001600160401b038416908102919091179091556040519081527fe91b422c48d1f63476e86148f126e887ed21d449f2881a51c364f3519e73a89490602001610882565b600054610100900460ff166112195760005460ff161561121d565b303b155b6112805760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161051a565b600054610100900460ff161580156112a2576000805461ffff19166101011790555b42876001600160401b031610156112cb5760405162461bcd60e51b815260040161051a90611fe4565b6000866001600160401b0316116112f45760405162461bcd60e51b815260040161051a90611d33565b600085116113145760405162461bcd60e51b815260040161051a90612030565b6001600160a01b03841661133a5760405162461bcd60e51b815260040161051a90611ce7565b611342611766565b61134a61179d565b609780546001600160a01b03808c166001600160a01b031992831617909255609880546001600160401b03808c16600160a01b026001600160e01b03199283168e8716171790925560998054609a8b9055898616600160401b029216928b169290921717905560a180549286169290911691909117905560a082905580156113d8576000805461ff00191690555b505050505050505050565b6033546001600160a01b0316331461140d5760405162461bcd60e51b815260040161051a90611c6c565b6001600160a01b0381166114725760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161051a565b61147b8161167e565b50565b6033546001600160a01b031633146114a85760405162461bcd60e51b815260040161051a90611c6c565b609954600160e01b900460ff16156114d25760405162461bcd60e51b815260040161051a90611d80565b60a08190556040518181527fc03e813ac3c72b419d55e3347033254b7730e1c13579c72e3b0258faa1c228a790602001610882565b6033546001600160a01b031633146115315760405162461bcd60e51b815260040161051a90611c6c565b8061154e5760405162461bcd60e51b815260040161051a90612030565b609a8190556040518181527f1547cf4f4e088a233f379adf2a2ca21d8007a1a0273ac91fa1ec95d0c8e8414b90602001610882565b6040516001600160a01b0383166024820152604481018290526115e690849063a9059cbb60e01b906064015b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526117d4565b505050565b60655460ff166116345760405162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604482015260640161051a565b6065805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b60655460ff16156116f35760405162461bcd60e51b815260040161051a90611db7565b6065805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586116613390565b6040516001600160a01b03808516602483015283166044820152606481018290526117609085906323b872dd60e01b906084016115af565b50505050565b600054610100900460ff1661178d5760405162461bcd60e51b815260040161051a90612075565b6117956118a6565b6107b86118cd565b600054610100900460ff166117c45760405162461bcd60e51b815260040161051a90612075565b6117cc6118a6565b6107b86118fd565b6000611829826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166119309092919063ffffffff16565b8051909150156115e657808060200190518101906118479190611fc2565b6115e65760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161051a565b600054610100900460ff166107b85760405162461bcd60e51b815260040161051a90612075565b600054610100900460ff166118f45760405162461bcd60e51b815260040161051a90612075565b6107b83361167e565b600054610100900460ff166119245760405162461bcd60e51b815260040161051a90612075565b6065805460ff19169055565b606061193f8484600085611949565b90505b9392505050565b6060824710156119aa5760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b606482015260840161051a565b843b6119f85760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161051a565b600080866001600160a01b03168587604051611a1491906120ec565b60006040518083038185875af1925050503d8060008114611a51576040519150601f19603f3d011682016040523d82523d6000602084013e611a56565b606091505b5091509150611a66828286611a71565b979650505050505050565b60608315611a80575081611942565b825115611a905782518084602001fd5b8160405162461bcd60e51b815260040161051a9190612108565b80356001600160a01b0381168114611ac157600080fd5b919050565b600060208284031215611ad857600080fd5b61194282611aaa565b80356001600160401b0381168114611ac157600080fd5b600060208284031215611b0a57600080fd5b61194282611ae1565b600060208284031215611b2557600080fd5b5035919050565b60ff8116811461147b57600080fd5b60008060008060608587031215611b5157600080fd5b843593506020850135611b6381611b2c565b925060408501356001600160401b0380821115611b7f57600080fd5b818701915087601f830112611b9357600080fd5b813581811115611ba257600080fd5b8860208260051b8501011115611bb757600080fd5b95989497505060200194505050565b600080600080600080600080610100898b031215611be357600080fd5b611bec89611aaa565b9750611bfa60208a01611aaa565b9650611c0860408a01611ae1565b9550611c1660608a01611ae1565b945060808901359350611c2b60a08a01611aaa565b9250611c3960c08a01611aaa565b915060e089013590509295985092959890939650565b600060208284031215611c6157600080fd5b813561194281611b2c565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b600060208284031215611cb357600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b600082821015611ce257611ce2611cba565b500390565b6020808252602c908201527f546f6b656e53616c653a2073616c6520726563697069656e742073686f756c6460408201526b206e6f74206265207a65726f60a01b606082015260800190565b6020808252602d908201527f546f6b656e53616c653a207468652073616c65206475726174696f6e206d757360408201526c74206e6f74206265207a65726f60981b606082015260800190565b6020808252601c908201527f546f6b656e53616c653a20616c72656164792066696e616c697a656400000000604082015260600190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b60008219821115611df457611df4611cba565b500190565b600060208284031215611e0b57600080fd5b815161194281611b2c565b600181815b80851115611e51578160001904821115611e3757611e37611cba565b80851615611e4457918102915b93841c9390800290611e1b565b509250929050565b600082611e6857506001610c5d565b81611e7557506000610c5d565b8160018114611e8b5760028114611e9557611eb1565b6001915050610c5d565b60ff841115611ea657611ea6611cba565b50506001821b610c5d565b5060208310610133831016604e8410600b8410161715611ed4575081810a610c5d565b611ede8383611e16565b8060001904821115611ef257611ef2611cba565b029392505050565b600061194260ff841683611e59565b6000816000190483118215151615611f2357611f23611cba565b500290565b600082611f4557634e487b7160e01b600052601260045260246000fd5b500490565b60006001600160401b03808316818516808303821115611f6c57611f6c611cba565b01949350505050565b6001600160a01b0384168152604060208201819052810182905260006001600160fb1b03831115611fa557600080fd5b8260051b8085606085013760009201606001918252509392505050565b600060208284031215611fd457600080fd5b8151801515811461194257600080fd5b6020808252602c908201527f546f6b656e53616c653a2073746172742064617465206d6179206e6f7420626560408201526b081a5b881d1a19481c185cdd60a21b606082015260800190565b60208082526025908201527f546f6b656e53616c653a20746865207072696365206d757374206e6f74206265604082015264207a65726f60d81b606082015260800190565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b60005b838110156120db5781810151838201526020016120c3565b838111156117605750506000910152565b600082516120fe8184602087016120c0565b9190910192915050565b60208152600082518060208401526121278160408501602087016120c0565b601f01601f1916919091016040019291505056fea2646970667358221220fe12c0fd3018e8da739227efadbd8e368576744dc3cf1ba7641f27ebbf1615d364736f6c634300080b0033
```

These are the byte code differences between the two versions

| PC.Orig      | Operation.Orig              | Gas.Orig | PC.New       | Operation.New               | Gas.New |
| -            | -                           | :-:      | -            | -                           | :-:     |
| 5424(0x1530) | JUMP(0x56)                  | 8        | 5424(0x1530) | JUMP(0x56)                  | 8       |
| 5425(0x1531) | JUMPDEST(0x5b)@0x1531       | 1        | 5425(0x1531) | JUMPDEST(0x5b)@0x1531       | 1       |
|              |                             |          | 5426(0x1532) | DUP1(0x80)                  | 3       |
| 5426(0x1532) | PUSH1(0x60) ["0x00"]        | 3        |              |                             |         |
| 5428(0x1534) | DUP2(0x81)                  | 3        |              |                             |         |
| 5429(0x1535) | GT(0x11)                    | 3        |              |                             |         |
| 5430(0x1536) | PUSH2(0x61) ["0x15","0x51"] | 3        | 5427(0x1533) | PUSH2(0x61) ["0x15","0x4e"] | 3       |
| 5433(0x1539) | JUMPI(0x57)                 | 10       | 5430(0x1536) | JUMPI(0x57)                 | 10      |
|              |                             |          |              |                             |         |
|              | Total.Orig:                 | 31       |              | Total.New:                  | 25      |

The suggested change provides a savings of 6 gas

```
diff forgeResults.orig forgeResults.new
42c42
< [32m[PASS][0m testSetTokenOutPrice() (gas: 9593)
---
> [32m[PASS][0m testSetTokenOutPrice() (gas: 9587)
46c46
< [32m[PASS][0m testTokenOutPriceDoubledDuringSale() (gas: 320103)
---
> [32m[PASS][0m testTokenOutPriceDoubledDuringSale() (gas: 320097)
75c75
< │ 1714599                       ┆ 8596            ┆        ┆        ┆        ┆         │
---
> │ 1713999                       ┆ 8593            ┆        ┆        ┆        ┆         │
125c125
< │ setTokenOutPrice              ┆ 596             ┆ 1314   ┆ 1674   ┆ 1674   ┆ 3       │
---
> │ setTokenOutPrice              ┆ 596             ┆ 1310   ┆ 1668   ┆ 1668   ┆ 3       │
```


### 6. [TokenSaleUpgradeable.sol:L364](https://github.com/code-423n4/2022-02-badger-citadel/blob/84596551d62f243d13fcb2d486346dde08002f7b/contracts/TokenSaleUpgradeable.sol#L364)
```solidity
         require(amount > 0, "nothing to sweep");
```

This is the diff of the original version of `contracts/TokenSaleUpgradeable.sol` and a new, optimized version
```solidity
364c364
<         require(amount > 0, "nothing to sweep");
---
>         require(amount != 0, "nothing to sweep");
```
These are the original byte code, followed by the byte code compiled from the new version
```
608060405234801561001057600080fd5b506004361061021c5760003560e01c806373b2e80e11610125578063b3a891c9116100ad578063e9a2f2e01161007c578063e9a2f2e01461048e578063f2fde38b14610497578063f49af3fa146104aa578063fd7e60a9146104bd578063fee839c6146104d057600080fd5b8063b3a891c914610441578063b3f05b9714610454578063d0202d3b14610468578063dacec66e1461047b57600080fd5b80639b8906ae116100f45780639b8906ae146103fb578063a1d9eecf14610403578063ab0bcc4114610416578063abf017e914610430578063afb8a52e1461043957600080fd5b806373b2e80e146103ac5780638456cb59146103cf5780638b234215146103d75780638da5cb5b146103ea57600080fd5b80634e71d92d116101a85780635c975abb116101775780635c975abb14610351578063618426fc1461036857806368c91d8f146103715780636daf390b14610391578063715018a6146103a457600080fd5b80634e71d92d146102fb578063564f0848146103035780635b019b761461030c5780635c1952171461033e57600080fd5b806324f3dd2f116101ef57806324f3dd2f146102965780633711d9fb146102ad5780633f4ba83a146102d857806346afbc1b146102e05780634bb278f3146102f357600080fd5b806301681a62146102215780630d4ec845146102365780631c908d9814610249578063240877101461025c575b600080fd5b61023461022f366004611ac9565b6104f0565b005b610234610244366004611ac9565b610667565b610234610257366004611ac9565b6106db565b61027f61026a366004611ac9565b60a36020526000908152604090205460ff1681565b60405160ff90911681526020015b60405180910390f35b61029f60a05481565b60405190815260200161028d565b6099546102c0906001600160401b031681565b6040516001600160401b03909116815260200161028d565b610234610786565b6102346102ee366004611afb565b6107ba565b61023461088d565b61029f610a30565b61029f609f5481565b60995461032690600160401b90046001600160a01b031681565b6040516001600160a01b03909116815260200161028d565b61029f61034c366004611b16565b610bcc565b60655460ff165b604051901515815260200161028d565b61029f609e5481565b61029f61037f366004611ac9565b609b6020526000908152604090205481565b609854610326906001600160a01b031681565b610234610c63565b6103586103ba366004611ac9565b609c6020526000908152604090205460ff1681565b610234610c97565b60a154610326906001600160a01b031681565b6033546001600160a01b0316610326565b610358610cc9565b61029f610411366004611b3e565b610d10565b6098546102c090600160a01b90046001600160401b031681565b61029f609a5481565b61029f611105565b61023461044f366004611afb565b611126565b60995461035890600160e01b900460ff1681565b609754610326906001600160a01b031681565b610234610489366004611bc9565b6111fe565b61029f609d5481565b6102346104a5366004611ac9565b6113e3565b6102346104b8366004611b16565b61147e565b6102346104cb366004611b16565b611507565b61029f6104de366004611c52565b60a26020526000908152604090205481565b6033546001600160a01b031633146105235760405162461bcd60e51b815260040161051a90611c6f565b60405180910390fd5b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a0823190602401602060405180830381865afa15801561056a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061058e9190611ca4565b6097549091506001600160a01b03838116911614156105c9576000609f54609e546105b99190611cd3565b90506105c58183611cd3565b9150505b6000811161060c5760405162461bcd60e51b815260206004820152601060248201526f06e6f7468696e6720746f2073776565760841b604482015260640161051a565b6106206001600160a01b0383163383611586565b816001600160a01b03167f1b94d65e3a03a98b13e90142a41884547fdd622b7f14a4daf94f6338e2e85cf08260405161065b91815260200190565b60405180910390a25050565b6033546001600160a01b031633146106915760405162461bcd60e51b815260040161051a90611c6f565b60a180546001600160a01b0319166001600160a01b0383169081179091556040517f650070ede2ab0ad22a57e15b88d668804b8f7c361a1ee8560093705f4d78abdd90600090a250565b6033546001600160a01b031633146107055760405162461bcd60e51b815260040161051a90611c6f565b6001600160a01b03811661072b5760405162461bcd60e51b815260040161051a90611cea565b6099805468010000000000000000600160e01b031916600160401b6001600160a01b038416908102919091179091556040517f22fcd0f303ce9972cac865bf07f264510ba86521618196591c01ad233f97826690600090a250565b6033546001600160a01b031633146107b05760405162461bcd60e51b815260040161051a90611c6f565b6107b86115ee565b565b6033546001600160a01b031633146107e45760405162461bcd60e51b815260040161051a90611c6f565b6000816001600160401b03161161080d5760405162461bcd60e51b815260040161051a90611d36565b609954600160e01b900460ff16156108375760405162461bcd60e51b815260040161051a90611d83565b6099805467ffffffffffffffff19166001600160401b0383169081179091556040519081527f63d2e06731cd563c7ce4ee2e4227ead624e21cfb8bde59079d343e63ec3baf5f906020015b60405180910390a150565b6033546001600160a01b031633146108b75760405162461bcd60e51b815260040161051a90611c6f565b609954600160e01b900460ff16156108e15760405162461bcd60e51b815260040161051a90611d83565b6108e9610cc9565b6109355760405162461bcd60e51b815260206004820152601760248201527f546f6b656e53616c653a206e6f742066696e6973686564000000000000000000604482015260640161051a565b609e546097546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015610980573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a49190611ca4565b10156109f25760405162461bcd60e51b815260206004820152601d60248201527f546f6b656e53616c653a206e6f7420656e6f7567682062616c616e6365000000604482015260640161051a565b6099805460ff60e01b1916600160e01b1790556040517f6823b073d48d6e3a7d385eeb601452d680e74bb46afe3255a7d778f3a9b1768190600090a1565b6000610a3e60655460ff1690565b15610a5b5760405162461bcd60e51b815260040161051a90611dba565b609954600160e01b900460ff16610aa95760405162461bcd60e51b81526020600482015260126024820152711cd85b19481b9bdd08199a5b985b1a5e995960721b604482015260640161051a565b336000908152609c602052604090205460ff1615610afb5760405162461bcd60e51b815260206004820152600f60248201526e185b1c9958591e4818db185a5b5959608a1b604482015260640161051a565b50336000908152609b602052604090205480610b4c5760405162461bcd60e51b815260206004820152601060248201526f6e6f7468696e6720746f20636c61696d60801b604482015260640161051a565b336000908152609c60205260408120805460ff19166001179055609f8054839290610b78908490611de4565b9091555050609754610b94906001600160a01b03163383611586565b60405181815233907f47cee97cb7acd717b3c0aa1435d004cd5b3c8c57d70dbceb4e4458bbd60e39d49060200160405180910390a290565b609a546097546040805163313ce56760e01b81529051600093926001600160a01b03169163313ce5679160048083019260209291908290030181865afa158015610c1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3e9190611dfc565b610c4990600a611efd565b610c539084611f0c565b610c5d9190611f2b565b92915050565b6033546001600160a01b03163314610c8d5760405162461bcd60e51b815260040161051a90611c6f565b6107b86000611681565b6033546001600160a01b03163314610cc15760405162461bcd60e51b815260040161051a90611c6f565b6107b86116d3565b609954609854600091610cf0916001600160401b0391821691600160a01b90910416611f4d565b6001600160401b031642101580610d0b575060a054609d5410155b905090565b6000610d1e60655460ff1690565b15610d3b5760405162461bcd60e51b815260040161051a90611dba565b60985442600160a01b9091046001600160401b03161115610d975760405162461bcd60e51b8152602060048201526016602482015275151bdad95b94d85b194e881b9bdd081cdd185c9d195960521b604482015260640161051a565b609954609854610dba916001600160401b0390811691600160a01b900416611f4d565b6001600160401b03164210610e115760405162461bcd60e51b815260206004820152601860248201527f546f6b656e53616c653a20616c726561647920656e6465640000000000000000604482015260640161051a565b60008511610e615760405162461bcd60e51b815260206004820152601c60248201527f5f746f6b656e496e416d6f756e742073686f756c64206265203e203000000000604482015260640161051a565b60a05485609d54610e729190611de4565b1115610eb85760405162461bcd60e51b81526020600482015260156024820152741d1bdd185b08185b5bdd5b9d08195e18d959591959605a1b604482015260640161051a565b60a1546001600160a01b031615610f7b5760a154604051631849250160e21b81526001600160a01b0390911690636124940490610efd90339087908790600401611f78565b602060405180830381865afa158015610f1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f3e9190611fc5565b610f7b5760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08185d5d1a1bdc9a5e995960921b604482015260640161051a565b336000908152609b60205260409020548015610ffa5733600090815260a3602052604090205460ff868116911614610ff55760405162461bcd60e51b815260206004820152601c60248201527f63616e277420766f746520666f72206d756c7469706c652064616f7300000000604482015260640161051a565b611017565b33600090815260a360205260409020805460ff191660ff87161790555b61102086610bcc565b915061102c8282611de4565b336000908152609b602090815260408083209390935560ff8816825260a29052908120805484929061105f908490611de4565b9250508190555085609d60008282546110789190611de4565b9250508190555081609e60008282546110919190611de4565b90915550506099546098546110bc916001600160a01b03918216913391600160401b9004168961172b565b604080518781526020810184905260ff87169133917f1ec0c95078c890035e941915909bcfe875eca2b01352f0caaf74680fe1d297ce910160405180910390a350949350505050565b600060a054609d54101561112357609d5460a054610d0b9190611cd3565b90565b6033546001600160a01b031633146111505760405162461bcd60e51b815260040161051a90611c6f565b42816001600160401b031610156111795760405162461bcd60e51b815260040161051a90611fe7565b609954600160e01b900460ff16156111a35760405162461bcd60e51b815260040161051a90611d83565b6098805467ffffffffffffffff60a01b1916600160a01b6001600160401b038416908102919091179091556040519081527fe91b422c48d1f63476e86148f126e887ed21d449f2881a51c364f3519e73a89490602001610882565b600054610100900460ff166112195760005460ff161561121d565b303b155b6112805760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161051a565b600054610100900460ff161580156112a2576000805461ffff19166101011790555b42876001600160401b031610156112cb5760405162461bcd60e51b815260040161051a90611fe7565b6000866001600160401b0316116112f45760405162461bcd60e51b815260040161051a90611d36565b600085116113145760405162461bcd60e51b815260040161051a90612033565b6001600160a01b03841661133a5760405162461bcd60e51b815260040161051a90611cea565b611342611769565b61134a6117a0565b609780546001600160a01b03808c166001600160a01b031992831617909255609880546001600160401b03808c16600160a01b026001600160e01b03199283168e8716171790925560998054609a8b9055898616600160401b029216928b169290921717905560a180549286169290911691909117905560a082905580156113d8576000805461ff00191690555b505050505050505050565b6033546001600160a01b0316331461140d5760405162461bcd60e51b815260040161051a90611c6f565b6001600160a01b0381166114725760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161051a565b61147b81611681565b50565b6033546001600160a01b031633146114a85760405162461bcd60e51b815260040161051a90611c6f565b609954600160e01b900460ff16156114d25760405162461bcd60e51b815260040161051a90611d83565b60a08190556040518181527fc03e813ac3c72b419d55e3347033254b7730e1c13579c72e3b0258faa1c228a790602001610882565b6033546001600160a01b031633146115315760405162461bcd60e51b815260040161051a90611c6f565b600081116115515760405162461bcd60e51b815260040161051a90612033565b609a8190556040518181527f1547cf4f4e088a233f379adf2a2ca21d8007a1a0273ac91fa1ec95d0c8e8414b90602001610882565b6040516001600160a01b0383166024820152604481018290526115e990849063a9059cbb60e01b906064015b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526117d7565b505050565b60655460ff166116375760405162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604482015260640161051a565b6065805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b60655460ff16156116f65760405162461bcd60e51b815260040161051a90611dba565b6065805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586116643390565b6040516001600160a01b03808516602483015283166044820152606481018290526117639085906323b872dd60e01b906084016115b2565b50505050565b600054610100900460ff166117905760405162461bcd60e51b815260040161051a90612078565b6117986118a9565b6107b86118d0565b600054610100900460ff166117c75760405162461bcd60e51b815260040161051a90612078565b6117cf6118a9565b6107b8611900565b600061182c826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166119339092919063ffffffff16565b8051909150156115e9578080602001905181019061184a9190611fc5565b6115e95760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161051a565b600054610100900460ff166107b85760405162461bcd60e51b815260040161051a90612078565b600054610100900460ff166118f75760405162461bcd60e51b815260040161051a90612078565b6107b833611681565b600054610100900460ff166119275760405162461bcd60e51b815260040161051a90612078565b6065805460ff19169055565b6060611942848460008561194c565b90505b9392505050565b6060824710156119ad5760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b606482015260840161051a565b843b6119fb5760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161051a565b600080866001600160a01b03168587604051611a1791906120ef565b60006040518083038185875af1925050503d8060008114611a54576040519150601f19603f3d011682016040523d82523d6000602084013e611a59565b606091505b5091509150611a69828286611a74565b979650505050505050565b60608315611a83575081611945565b825115611a935782518084602001fd5b8160405162461bcd60e51b815260040161051a919061210b565b80356001600160a01b0381168114611ac457600080fd5b919050565b600060208284031215611adb57600080fd5b61194582611aad565b80356001600160401b0381168114611ac457600080fd5b600060208284031215611b0d57600080fd5b61194582611ae4565b600060208284031215611b2857600080fd5b5035919050565b60ff8116811461147b57600080fd5b60008060008060608587031215611b5457600080fd5b843593506020850135611b6681611b2f565b925060408501356001600160401b0380821115611b8257600080fd5b818701915087601f830112611b9657600080fd5b813581811115611ba557600080fd5b8860208260051b8501011115611bba57600080fd5b95989497505060200194505050565b600080600080600080600080610100898b031215611be657600080fd5b611bef89611aad565b9750611bfd60208a01611aad565b9650611c0b60408a01611ae4565b9550611c1960608a01611ae4565b945060808901359350611c2e60a08a01611aad565b9250611c3c60c08a01611aad565b915060e089013590509295985092959890939650565b600060208284031215611c6457600080fd5b813561194581611b2f565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b600060208284031215611cb657600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b600082821015611ce557611ce5611cbd565b500390565b6020808252602c908201527f546f6b656e53616c653a2073616c6520726563697069656e742073686f756c6460408201526b206e6f74206265207a65726f60a01b606082015260800190565b6020808252602d908201527f546f6b656e53616c653a207468652073616c65206475726174696f6e206d757360408201526c74206e6f74206265207a65726f60981b606082015260800190565b6020808252601c908201527f546f6b656e53616c653a20616c72656164792066696e616c697a656400000000604082015260600190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b60008219821115611df757611df7611cbd565b500190565b600060208284031215611e0e57600080fd5b815161194581611b2f565b600181815b80851115611e54578160001904821115611e3a57611e3a611cbd565b80851615611e4757918102915b93841c9390800290611e1e565b509250929050565b600082611e6b57506001610c5d565b81611e7857506000610c5d565b8160018114611e8e5760028114611e9857611eb4565b6001915050610c5d565b60ff841115611ea957611ea9611cbd565b50506001821b610c5d565b5060208310610133831016604e8410600b8410161715611ed7575081810a610c5d565b611ee18383611e19565b8060001904821115611ef557611ef5611cbd565b029392505050565b600061194560ff841683611e5c565b6000816000190483118215151615611f2657611f26611cbd565b500290565b600082611f4857634e487b7160e01b600052601260045260246000fd5b500490565b60006001600160401b03808316818516808303821115611f6f57611f6f611cbd565b01949350505050565b6001600160a01b0384168152604060208201819052810182905260006001600160fb1b03831115611fa857600080fd5b8260051b8085606085013760009201606001918252509392505050565b600060208284031215611fd757600080fd5b8151801515811461194557600080fd5b6020808252602c908201527f546f6b656e53616c653a2073746172742064617465206d6179206e6f7420626560408201526b081a5b881d1a19481c185cdd60a21b606082015260800190565b60208082526025908201527f546f6b656e53616c653a20746865207072696365206d757374206e6f74206265604082015264207a65726f60d81b606082015260800190565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b60005b838110156120de5781810151838201526020016120c6565b838111156117635750506000910152565b600082516121018184602087016120c3565b9190910192915050565b602081526000825180602084015261212a8160408501602087016120c3565b601f01601f1916919091016040019291505056fea26469706673582212203187f9de1bc94f6ba8ca6ffb7e2438ccb59c8790bd234e8f23ce26e6bff8088664736f6c634300080b0033
```
```
608060405234801561001057600080fd5b506004361061021c5760003560e01c806373b2e80e11610125578063b3a891c9116100ad578063e9a2f2e01161007c578063e9a2f2e01461048e578063f2fde38b14610497578063f49af3fa146104aa578063fd7e60a9146104bd578063fee839c6146104d057600080fd5b8063b3a891c914610441578063b3f05b9714610454578063d0202d3b14610468578063dacec66e1461047b57600080fd5b80639b8906ae116100f45780639b8906ae146103fb578063a1d9eecf14610403578063ab0bcc4114610416578063abf017e914610430578063afb8a52e1461043957600080fd5b806373b2e80e146103ac5780638456cb59146103cf5780638b234215146103d75780638da5cb5b146103ea57600080fd5b80634e71d92d116101a85780635c975abb116101775780635c975abb14610351578063618426fc1461036857806368c91d8f146103715780636daf390b14610391578063715018a6146103a457600080fd5b80634e71d92d146102fb578063564f0848146103035780635b019b761461030c5780635c1952171461033e57600080fd5b806324f3dd2f116101ef57806324f3dd2f146102965780633711d9fb146102ad5780633f4ba83a146102d857806346afbc1b146102e05780634bb278f3146102f357600080fd5b806301681a62146102215780630d4ec845146102365780631c908d9814610249578063240877101461025c575b600080fd5b61023461022f366004611ac6565b6104f0565b005b610234610244366004611ac6565b610664565b610234610257366004611ac6565b6106d8565b61027f61026a366004611ac6565b60a36020526000908152604090205460ff1681565b60405160ff90911681526020015b60405180910390f35b61029f60a05481565b60405190815260200161028d565b6099546102c0906001600160401b031681565b6040516001600160401b03909116815260200161028d565b610234610783565b6102346102ee366004611af8565b6107b7565b61023461088a565b61029f610a2d565b61029f609f5481565b60995461032690600160401b90046001600160a01b031681565b6040516001600160a01b03909116815260200161028d565b61029f61034c366004611b13565b610bc9565b60655460ff165b604051901515815260200161028d565b61029f609e5481565b61029f61037f366004611ac6565b609b6020526000908152604090205481565b609854610326906001600160a01b031681565b610234610c60565b6103586103ba366004611ac6565b609c6020526000908152604090205460ff1681565b610234610c94565b60a154610326906001600160a01b031681565b6033546001600160a01b0316610326565b610358610cc6565b61029f610411366004611b3b565b610d0d565b6098546102c090600160a01b90046001600160401b031681565b61029f609a5481565b61029f611102565b61023461044f366004611af8565b611123565b60995461035890600160e01b900460ff1681565b609754610326906001600160a01b031681565b610234610489366004611bc6565b6111fb565b61029f609d5481565b6102346104a5366004611ac6565b6113e0565b6102346104b8366004611b13565b61147b565b6102346104cb366004611b13565b611504565b61029f6104de366004611c4f565b60a26020526000908152604090205481565b6033546001600160a01b031633146105235760405162461bcd60e51b815260040161051a90611c6c565b60405180910390fd5b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a0823190602401602060405180830381865afa15801561056a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061058e9190611ca1565b6097549091506001600160a01b03838116911614156105c9576000609f54609e546105b99190611cd0565b90506105c58183611cd0565b9150505b806106095760405162461bcd60e51b815260206004820152601060248201526f06e6f7468696e6720746f2073776565760841b604482015260640161051a565b61061d6001600160a01b0383163383611583565b816001600160a01b03167f1b94d65e3a03a98b13e90142a41884547fdd622b7f14a4daf94f6338e2e85cf08260405161065891815260200190565b60405180910390a25050565b6033546001600160a01b0316331461068e5760405162461bcd60e51b815260040161051a90611c6c565b60a180546001600160a01b0319166001600160a01b0383169081179091556040517f650070ede2ab0ad22a57e15b88d668804b8f7c361a1ee8560093705f4d78abdd90600090a250565b6033546001600160a01b031633146107025760405162461bcd60e51b815260040161051a90611c6c565b6001600160a01b0381166107285760405162461bcd60e51b815260040161051a90611ce7565b6099805468010000000000000000600160e01b031916600160401b6001600160a01b038416908102919091179091556040517f22fcd0f303ce9972cac865bf07f264510ba86521618196591c01ad233f97826690600090a250565b6033546001600160a01b031633146107ad5760405162461bcd60e51b815260040161051a90611c6c565b6107b56115eb565b565b6033546001600160a01b031633146107e15760405162461bcd60e51b815260040161051a90611c6c565b6000816001600160401b03161161080a5760405162461bcd60e51b815260040161051a90611d33565b609954600160e01b900460ff16156108345760405162461bcd60e51b815260040161051a90611d80565b6099805467ffffffffffffffff19166001600160401b0383169081179091556040519081527f63d2e06731cd563c7ce4ee2e4227ead624e21cfb8bde59079d343e63ec3baf5f906020015b60405180910390a150565b6033546001600160a01b031633146108b45760405162461bcd60e51b815260040161051a90611c6c565b609954600160e01b900460ff16156108de5760405162461bcd60e51b815260040161051a90611d80565b6108e6610cc6565b6109325760405162461bcd60e51b815260206004820152601760248201527f546f6b656e53616c653a206e6f742066696e6973686564000000000000000000604482015260640161051a565b609e546097546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa15801561097d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a19190611ca1565b10156109ef5760405162461bcd60e51b815260206004820152601d60248201527f546f6b656e53616c653a206e6f7420656e6f7567682062616c616e6365000000604482015260640161051a565b6099805460ff60e01b1916600160e01b1790556040517f6823b073d48d6e3a7d385eeb601452d680e74bb46afe3255a7d778f3a9b1768190600090a1565b6000610a3b60655460ff1690565b15610a585760405162461bcd60e51b815260040161051a90611db7565b609954600160e01b900460ff16610aa65760405162461bcd60e51b81526020600482015260126024820152711cd85b19481b9bdd08199a5b985b1a5e995960721b604482015260640161051a565b336000908152609c602052604090205460ff1615610af85760405162461bcd60e51b815260206004820152600f60248201526e185b1c9958591e4818db185a5b5959608a1b604482015260640161051a565b50336000908152609b602052604090205480610b495760405162461bcd60e51b815260206004820152601060248201526f6e6f7468696e6720746f20636c61696d60801b604482015260640161051a565b336000908152609c60205260408120805460ff19166001179055609f8054839290610b75908490611de1565b9091555050609754610b91906001600160a01b03163383611583565b60405181815233907f47cee97cb7acd717b3c0aa1435d004cd5b3c8c57d70dbceb4e4458bbd60e39d49060200160405180910390a290565b609a546097546040805163313ce56760e01b81529051600093926001600160a01b03169163313ce5679160048083019260209291908290030181865afa158015610c17573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3b9190611df9565b610c4690600a611efa565b610c509084611f09565b610c5a9190611f28565b92915050565b6033546001600160a01b03163314610c8a5760405162461bcd60e51b815260040161051a90611c6c565b6107b5600061167e565b6033546001600160a01b03163314610cbe5760405162461bcd60e51b815260040161051a90611c6c565b6107b56116d0565b609954609854600091610ced916001600160401b0391821691600160a01b90910416611f4a565b6001600160401b031642101580610d08575060a054609d5410155b905090565b6000610d1b60655460ff1690565b15610d385760405162461bcd60e51b815260040161051a90611db7565b60985442600160a01b9091046001600160401b03161115610d945760405162461bcd60e51b8152602060048201526016602482015275151bdad95b94d85b194e881b9bdd081cdd185c9d195960521b604482015260640161051a565b609954609854610db7916001600160401b0390811691600160a01b900416611f4a565b6001600160401b03164210610e0e5760405162461bcd60e51b815260206004820152601860248201527f546f6b656e53616c653a20616c726561647920656e6465640000000000000000604482015260640161051a565b60008511610e5e5760405162461bcd60e51b815260206004820152601c60248201527f5f746f6b656e496e416d6f756e742073686f756c64206265203e203000000000604482015260640161051a565b60a05485609d54610e6f9190611de1565b1115610eb55760405162461bcd60e51b81526020600482015260156024820152741d1bdd185b08185b5bdd5b9d08195e18d959591959605a1b604482015260640161051a565b60a1546001600160a01b031615610f785760a154604051631849250160e21b81526001600160a01b0390911690636124940490610efa90339087908790600401611f75565b602060405180830381865afa158015610f17573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f3b9190611fc2565b610f785760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08185d5d1a1bdc9a5e995960921b604482015260640161051a565b336000908152609b60205260409020548015610ff75733600090815260a3602052604090205460ff868116911614610ff25760405162461bcd60e51b815260206004820152601c60248201527f63616e277420766f746520666f72206d756c7469706c652064616f7300000000604482015260640161051a565b611014565b33600090815260a360205260409020805460ff191660ff87161790555b61101d86610bc9565b91506110298282611de1565b336000908152609b602090815260408083209390935560ff8816825260a29052908120805484929061105c908490611de1565b9250508190555085609d60008282546110759190611de1565b9250508190555081609e600082825461108e9190611de1565b90915550506099546098546110b9916001600160a01b03918216913391600160401b90041689611728565b604080518781526020810184905260ff87169133917f1ec0c95078c890035e941915909bcfe875eca2b01352f0caaf74680fe1d297ce910160405180910390a350949350505050565b600060a054609d54101561112057609d5460a054610d089190611cd0565b90565b6033546001600160a01b0316331461114d5760405162461bcd60e51b815260040161051a90611c6c565b42816001600160401b031610156111765760405162461bcd60e51b815260040161051a90611fe4565b609954600160e01b900460ff16156111a05760405162461bcd60e51b815260040161051a90611d80565b6098805467ffffffffffffffff60a01b1916600160a01b6001600160401b038416908102919091179091556040519081527fe91b422c48d1f63476e86148f126e887ed21d449f2881a51c364f3519e73a8949060200161087f565b600054610100900460ff166112165760005460ff161561121a565b303b155b61127d5760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161051a565b600054610100900460ff1615801561129f576000805461ffff19166101011790555b42876001600160401b031610156112c85760405162461bcd60e51b815260040161051a90611fe4565b6000866001600160401b0316116112f15760405162461bcd60e51b815260040161051a90611d33565b600085116113115760405162461bcd60e51b815260040161051a90612030565b6001600160a01b0384166113375760405162461bcd60e51b815260040161051a90611ce7565b61133f611766565b61134761179d565b609780546001600160a01b03808c166001600160a01b031992831617909255609880546001600160401b03808c16600160a01b026001600160e01b03199283168e8716171790925560998054609a8b9055898616600160401b029216928b169290921717905560a180549286169290911691909117905560a082905580156113d5576000805461ff00191690555b505050505050505050565b6033546001600160a01b0316331461140a5760405162461bcd60e51b815260040161051a90611c6c565b6001600160a01b03811661146f5760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161051a565b6114788161167e565b50565b6033546001600160a01b031633146114a55760405162461bcd60e51b815260040161051a90611c6c565b609954600160e01b900460ff16156114cf5760405162461bcd60e51b815260040161051a90611d80565b60a08190556040518181527fc03e813ac3c72b419d55e3347033254b7730e1c13579c72e3b0258faa1c228a79060200161087f565b6033546001600160a01b0316331461152e5760405162461bcd60e51b815260040161051a90611c6c565b6000811161154e5760405162461bcd60e51b815260040161051a90612030565b609a8190556040518181527f1547cf4f4e088a233f379adf2a2ca21d8007a1a0273ac91fa1ec95d0c8e8414b9060200161087f565b6040516001600160a01b0383166024820152604481018290526115e690849063a9059cbb60e01b906064015b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526117d4565b505050565b60655460ff166116345760405162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604482015260640161051a565b6065805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b60655460ff16156116f35760405162461bcd60e51b815260040161051a90611db7565b6065805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586116613390565b6040516001600160a01b03808516602483015283166044820152606481018290526117609085906323b872dd60e01b906084016115af565b50505050565b600054610100900460ff1661178d5760405162461bcd60e51b815260040161051a90612075565b6117956118a6565b6107b56118cd565b600054610100900460ff166117c45760405162461bcd60e51b815260040161051a90612075565b6117cc6118a6565b6107b56118fd565b6000611829826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166119309092919063ffffffff16565b8051909150156115e657808060200190518101906118479190611fc2565b6115e65760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161051a565b600054610100900460ff166107b55760405162461bcd60e51b815260040161051a90612075565b600054610100900460ff166118f45760405162461bcd60e51b815260040161051a90612075565b6107b53361167e565b600054610100900460ff166119245760405162461bcd60e51b815260040161051a90612075565b6065805460ff19169055565b606061193f8484600085611949565b90505b9392505050565b6060824710156119aa5760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b606482015260840161051a565b843b6119f85760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161051a565b600080866001600160a01b03168587604051611a1491906120ec565b60006040518083038185875af1925050503d8060008114611a51576040519150601f19603f3d011682016040523d82523d6000602084013e611a56565b606091505b5091509150611a66828286611a71565b979650505050505050565b60608315611a80575081611942565b825115611a905782518084602001fd5b8160405162461bcd60e51b815260040161051a9190612108565b80356001600160a01b0381168114611ac157600080fd5b919050565b600060208284031215611ad857600080fd5b61194282611aaa565b80356001600160401b0381168114611ac157600080fd5b600060208284031215611b0a57600080fd5b61194282611ae1565b600060208284031215611b2557600080fd5b5035919050565b60ff8116811461147857600080fd5b60008060008060608587031215611b5157600080fd5b843593506020850135611b6381611b2c565b925060408501356001600160401b0380821115611b7f57600080fd5b818701915087601f830112611b9357600080fd5b813581811115611ba257600080fd5b8860208260051b8501011115611bb757600080fd5b95989497505060200194505050565b600080600080600080600080610100898b031215611be357600080fd5b611bec89611aaa565b9750611bfa60208a01611aaa565b9650611c0860408a01611ae1565b9550611c1660608a01611ae1565b945060808901359350611c2b60a08a01611aaa565b9250611c3960c08a01611aaa565b915060e089013590509295985092959890939650565b600060208284031215611c6157600080fd5b813561194281611b2c565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b600060208284031215611cb357600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b600082821015611ce257611ce2611cba565b500390565b6020808252602c908201527f546f6b656e53616c653a2073616c6520726563697069656e742073686f756c6460408201526b206e6f74206265207a65726f60a01b606082015260800190565b6020808252602d908201527f546f6b656e53616c653a207468652073616c65206475726174696f6e206d757360408201526c74206e6f74206265207a65726f60981b606082015260800190565b6020808252601c908201527f546f6b656e53616c653a20616c72656164792066696e616c697a656400000000604082015260600190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b60008219821115611df457611df4611cba565b500190565b600060208284031215611e0b57600080fd5b815161194281611b2c565b600181815b80851115611e51578160001904821115611e3757611e37611cba565b80851615611e4457918102915b93841c9390800290611e1b565b509250929050565b600082611e6857506001610c5a565b81611e7557506000610c5a565b8160018114611e8b5760028114611e9557611eb1565b6001915050610c5a565b60ff841115611ea657611ea6611cba565b50506001821b610c5a565b5060208310610133831016604e8410600b8410161715611ed4575081810a610c5a565b611ede8383611e16565b8060001904821115611ef257611ef2611cba565b029392505050565b600061194260ff841683611e59565b6000816000190483118215151615611f2357611f23611cba565b500290565b600082611f4557634e487b7160e01b600052601260045260246000fd5b500490565b60006001600160401b03808316818516808303821115611f6c57611f6c611cba565b01949350505050565b6001600160a01b0384168152604060208201819052810182905260006001600160fb1b03831115611fa557600080fd5b8260051b8085606085013760009201606001918252509392505050565b600060208284031215611fd457600080fd5b8151801515811461194257600080fd5b6020808252602c908201527f546f6b656e53616c653a2073746172742064617465206d6179206e6f7420626560408201526b081a5b881d1a19481c185cdd60a21b606082015260800190565b60208082526025908201527f546f6b656e53616c653a20746865207072696365206d757374206e6f74206265604082015264207a65726f60d81b606082015260800190565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b60005b838110156120db5781810151838201526020016120c3565b838111156117605750506000910152565b600082516120fe8184602087016120c0565b9190910192915050565b60208152600082518060208401526121278160408501602087016120c0565b601f01601f1916919091016040019291505056fea2646970667358221220a74a2e941e0f7936c18ed72ab69f5bd696c6b9fd500c7e2a78fdd7e9e670274a64736f6c634300080b0033
```

These are the byte code differences between the two versions

| PC.Orig      | Operation.Orig              | Gas.Orig | PC.New       | Operation.New               | Gas.New |
| -            | -                           | :-:      | -            | -                           | :-:     |
| 1480(0x05c8) | POP(0x50)                   | 2        | 1480(0x05c8) | POP(0x50)                   | 2       |
| 1481(0x05c9) | JUMPDEST(0x5b)@0x05c9       | 1        | 1481(0x05c9) | JUMPDEST(0x5b)@0x05c9       | 1       |
|              |                             |          | 1482(0x05ca) | DUP1(0x80)                  | 3       |
| 1482(0x05ca) | PUSH1(0x60) ["0x00"]        | 3        |              |                             |         |
| 1484(0x05cc) | DUP2(0x81)                  | 3        |              |                             |         |
| 1485(0x05cd) | GT(0x11)                    | 3        |              |                             |         |
| 1486(0x05ce) | PUSH2(0x61) ["0x06","0x0c"] | 3        | 1483(0x05cb) | PUSH2(0x61) ["0x06","0x09"] | 3       |
| 1489(0x05d1) | JUMPI(0x57)                 | 10       | 1486(0x05ce) | JUMPI(0x57)                 | 10      |
|              |                             |          |              |                             |         |
|              | Total.Orig:                 | 25       |              | Total.New:                  | 19      |

The suggested change provides a savings of 6 gas

```
diff forgeResults.orig forgeResults.new
43,44c43,44
< [32m[PASS][0m testSweepExceptTokenOut() (gas: 96558)
< [32m[PASS][0m testSweepTokenOut() (gas: 330925)
---
> [32m[PASS][0m testSweepExceptTokenOut() (gas: 96552)
> [32m[PASS][0m testSweepTokenOut() (gas: 330919)
75c75
< │ 1714599                       ┆ 8596            ┆        ┆        ┆        ┆         │
---
> │ 1713999                       ┆ 8593            ┆        ┆        ┆        ┆         │
127c127
< │ sweep                         ┆ 614             ┆ 18337  ┆ 22242  ┆ 32157  ┆ 3       │
---
> │ sweep                         ┆ 614             ┆ 18334  ┆ 22237  ┆ 32151  ┆ 3       │
```


## Tools Used
Hardhat
Forge
npx @remix-project/remix-lib

## Recommended Mitigation Steps
Use `!= 0` rather than `> 0` for unsigned integers in `require()` statements. Note that the comparison in `claim()` results in no gas savings.


# [G-01] - Use local variables to cache results of storage reads
## Impact
Reading from storage is expensive whereas reading from the stack is cheap. If the result of a storage read in required multiple times, the code should cache the value in a local variable, and read from that variable, rather than fetching from storage again.

## Examples

### 1. [TokenSaleUpgradeable.sol:L160-162](https://github.com/code-423n4/2022-02-badger-citadel/blob/84596551d62f243d13fcb2d486346dde08002f7b/contracts/TokenSaleUpgradeable.sol#L160-L162)
```solidity
        if (address(guestlist) != address(0)) {
            require(guestlist.authorized(msg.sender, _proof), "not authorized");
        }
```

This is the diff of the original version of `contracts/TokenSaleUpgradeable.sol` and a new, optimized version
```solidity
159,161c159,162
< 
<         if (address(guestlist) != address(0)) {
<             require(guestlist.authorized(msg.sender, _proof), "not authorized");
---
>   
>         BadgerGuestListAPI gl = guestlist;
>         if (address(gl) != address(0)) {
>             require(gl.authorized(msg.sender, _proof), "not authorized");
```
These are the original byte code, followed by the byte code compiled from the new version
```
608060405234801561001057600080fd5b506004361061021c5760003560e01c806373b2e80e11610125578063b3a891c9116100ad578063e9a2f2e01161007c578063e9a2f2e01461048e578063f2fde38b14610497578063f49af3fa146104aa578063fd7e60a9146104bd578063fee839c6146104d057600080fd5b8063b3a891c914610441578063b3f05b9714610454578063d0202d3b14610468578063dacec66e1461047b57600080fd5b80639b8906ae116100f45780639b8906ae146103fb578063a1d9eecf14610403578063ab0bcc4114610416578063abf017e914610430578063afb8a52e1461043957600080fd5b806373b2e80e146103ac5780638456cb59146103cf5780638b234215146103d75780638da5cb5b146103ea57600080fd5b80634e71d92d116101a85780635c975abb116101775780635c975abb14610351578063618426fc1461036857806368c91d8f146103715780636daf390b14610391578063715018a6146103a457600080fd5b80634e71d92d146102fb578063564f0848146103035780635b019b761461030c5780635c1952171461033e57600080fd5b806324f3dd2f116101ef57806324f3dd2f146102965780633711d9fb146102ad5780633f4ba83a146102d857806346afbc1b146102e05780634bb278f3146102f357600080fd5b806301681a62146102215780630d4ec845146102365780631c908d9814610249578063240877101461025c575b600080fd5b61023461022f366004611ac9565b6104f0565b005b610234610244366004611ac9565b610667565b610234610257366004611ac9565b6106db565b61027f61026a366004611ac9565b60a36020526000908152604090205460ff1681565b60405160ff90911681526020015b60405180910390f35b61029f60a05481565b60405190815260200161028d565b6099546102c0906001600160401b031681565b6040516001600160401b03909116815260200161028d565b610234610786565b6102346102ee366004611afb565b6107ba565b61023461088d565b61029f610a30565b61029f609f5481565b60995461032690600160401b90046001600160a01b031681565b6040516001600160a01b03909116815260200161028d565b61029f61034c366004611b16565b610bcc565b60655460ff165b604051901515815260200161028d565b61029f609e5481565b61029f61037f366004611ac9565b609b6020526000908152604090205481565b609854610326906001600160a01b031681565b610234610c63565b6103586103ba366004611ac9565b609c6020526000908152604090205460ff1681565b610234610c97565b60a154610326906001600160a01b031681565b6033546001600160a01b0316610326565b610358610cc9565b61029f610411366004611b3e565b610d10565b6098546102c090600160a01b90046001600160401b031681565b61029f609a5481565b61029f611105565b61023461044f366004611afb565b611126565b60995461035890600160e01b900460ff1681565b609754610326906001600160a01b031681565b610234610489366004611bc9565b6111fe565b61029f609d5481565b6102346104a5366004611ac9565b6113e3565b6102346104b8366004611b16565b61147e565b6102346104cb366004611b16565b611507565b61029f6104de366004611c52565b60a26020526000908152604090205481565b6033546001600160a01b031633146105235760405162461bcd60e51b815260040161051a90611c6f565b60405180910390fd5b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a0823190602401602060405180830381865afa15801561056a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061058e9190611ca4565b6097549091506001600160a01b03838116911614156105c9576000609f54609e546105b99190611cd3565b90506105c58183611cd3565b9150505b6000811161060c5760405162461bcd60e51b815260206004820152601060248201526f06e6f7468696e6720746f2073776565760841b604482015260640161051a565b6106206001600160a01b0383163383611586565b816001600160a01b03167f1b94d65e3a03a98b13e90142a41884547fdd622b7f14a4daf94f6338e2e85cf08260405161065b91815260200190565b60405180910390a25050565b6033546001600160a01b031633146106915760405162461bcd60e51b815260040161051a90611c6f565b60a180546001600160a01b0319166001600160a01b0383169081179091556040517f650070ede2ab0ad22a57e15b88d668804b8f7c361a1ee8560093705f4d78abdd90600090a250565b6033546001600160a01b031633146107055760405162461bcd60e51b815260040161051a90611c6f565b6001600160a01b03811661072b5760405162461bcd60e51b815260040161051a90611cea565b6099805468010000000000000000600160e01b031916600160401b6001600160a01b038416908102919091179091556040517f22fcd0f303ce9972cac865bf07f264510ba86521618196591c01ad233f97826690600090a250565b6033546001600160a01b031633146107b05760405162461bcd60e51b815260040161051a90611c6f565b6107b86115ee565b565b6033546001600160a01b031633146107e45760405162461bcd60e51b815260040161051a90611c6f565b6000816001600160401b03161161080d5760405162461bcd60e51b815260040161051a90611d36565b609954600160e01b900460ff16156108375760405162461bcd60e51b815260040161051a90611d83565b6099805467ffffffffffffffff19166001600160401b0383169081179091556040519081527f63d2e06731cd563c7ce4ee2e4227ead624e21cfb8bde59079d343e63ec3baf5f906020015b60405180910390a150565b6033546001600160a01b031633146108b75760405162461bcd60e51b815260040161051a90611c6f565b609954600160e01b900460ff16156108e15760405162461bcd60e51b815260040161051a90611d83565b6108e9610cc9565b6109355760405162461bcd60e51b815260206004820152601760248201527f546f6b656e53616c653a206e6f742066696e6973686564000000000000000000604482015260640161051a565b609e546097546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015610980573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a49190611ca4565b10156109f25760405162461bcd60e51b815260206004820152601d60248201527f546f6b656e53616c653a206e6f7420656e6f7567682062616c616e6365000000604482015260640161051a565b6099805460ff60e01b1916600160e01b1790556040517f6823b073d48d6e3a7d385eeb601452d680e74bb46afe3255a7d778f3a9b1768190600090a1565b6000610a3e60655460ff1690565b15610a5b5760405162461bcd60e51b815260040161051a90611dba565b609954600160e01b900460ff16610aa95760405162461bcd60e51b81526020600482015260126024820152711cd85b19481b9bdd08199a5b985b1a5e995960721b604482015260640161051a565b336000908152609c602052604090205460ff1615610afb5760405162461bcd60e51b815260206004820152600f60248201526e185b1c9958591e4818db185a5b5959608a1b604482015260640161051a565b50336000908152609b602052604090205480610b4c5760405162461bcd60e51b815260206004820152601060248201526f6e6f7468696e6720746f20636c61696d60801b604482015260640161051a565b336000908152609c60205260408120805460ff19166001179055609f8054839290610b78908490611de4565b9091555050609754610b94906001600160a01b03163383611586565b60405181815233907f47cee97cb7acd717b3c0aa1435d004cd5b3c8c57d70dbceb4e4458bbd60e39d49060200160405180910390a290565b609a546097546040805163313ce56760e01b81529051600093926001600160a01b03169163313ce5679160048083019260209291908290030181865afa158015610c1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3e9190611dfc565b610c4990600a611efd565b610c539084611f0c565b610c5d9190611f2b565b92915050565b6033546001600160a01b03163314610c8d5760405162461bcd60e51b815260040161051a90611c6f565b6107b86000611681565b6033546001600160a01b03163314610cc15760405162461bcd60e51b815260040161051a90611c6f565b6107b86116d3565b609954609854600091610cf0916001600160401b0391821691600160a01b90910416611f4d565b6001600160401b031642101580610d0b575060a054609d5410155b905090565b6000610d1e60655460ff1690565b15610d3b5760405162461bcd60e51b815260040161051a90611dba565b60985442600160a01b9091046001600160401b03161115610d975760405162461bcd60e51b8152602060048201526016602482015275151bdad95b94d85b194e881b9bdd081cdd185c9d195960521b604482015260640161051a565b609954609854610dba916001600160401b0390811691600160a01b900416611f4d565b6001600160401b03164210610e115760405162461bcd60e51b815260206004820152601860248201527f546f6b656e53616c653a20616c726561647920656e6465640000000000000000604482015260640161051a565b60008511610e615760405162461bcd60e51b815260206004820152601c60248201527f5f746f6b656e496e416d6f756e742073686f756c64206265203e203000000000604482015260640161051a565b60a05485609d54610e729190611de4565b1115610eb85760405162461bcd60e51b81526020600482015260156024820152741d1bdd185b08185b5bdd5b9d08195e18d959591959605a1b604482015260640161051a565b60a1546001600160a01b031615610f7b5760a154604051631849250160e21b81526001600160a01b0390911690636124940490610efd90339087908790600401611f78565b602060405180830381865afa158015610f1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f3e9190611fc5565b610f7b5760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08185d5d1a1bdc9a5e995960921b604482015260640161051a565b336000908152609b60205260409020548015610ffa5733600090815260a3602052604090205460ff868116911614610ff55760405162461bcd60e51b815260206004820152601c60248201527f63616e277420766f746520666f72206d756c7469706c652064616f7300000000604482015260640161051a565b611017565b33600090815260a360205260409020805460ff191660ff87161790555b61102086610bcc565b915061102c8282611de4565b336000908152609b602090815260408083209390935560ff8816825260a29052908120805484929061105f908490611de4565b9250508190555085609d60008282546110789190611de4565b9250508190555081609e60008282546110919190611de4565b90915550506099546098546110bc916001600160a01b03918216913391600160401b9004168961172b565b604080518781526020810184905260ff87169133917f1ec0c95078c890035e941915909bcfe875eca2b01352f0caaf74680fe1d297ce910160405180910390a350949350505050565b600060a054609d54101561112357609d5460a054610d0b9190611cd3565b90565b6033546001600160a01b031633146111505760405162461bcd60e51b815260040161051a90611c6f565b42816001600160401b031610156111795760405162461bcd60e51b815260040161051a90611fe7565b609954600160e01b900460ff16156111a35760405162461bcd60e51b815260040161051a90611d83565b6098805467ffffffffffffffff60a01b1916600160a01b6001600160401b038416908102919091179091556040519081527fe91b422c48d1f63476e86148f126e887ed21d449f2881a51c364f3519e73a89490602001610882565b600054610100900460ff166112195760005460ff161561121d565b303b155b6112805760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161051a565b600054610100900460ff161580156112a2576000805461ffff19166101011790555b42876001600160401b031610156112cb5760405162461bcd60e51b815260040161051a90611fe7565b6000866001600160401b0316116112f45760405162461bcd60e51b815260040161051a90611d36565b600085116113145760405162461bcd60e51b815260040161051a90612033565b6001600160a01b03841661133a5760405162461bcd60e51b815260040161051a90611cea565b611342611769565b61134a6117a0565b609780546001600160a01b03808c166001600160a01b031992831617909255609880546001600160401b03808c16600160a01b026001600160e01b03199283168e8716171790925560998054609a8b9055898616600160401b029216928b169290921717905560a180549286169290911691909117905560a082905580156113d8576000805461ff00191690555b505050505050505050565b6033546001600160a01b0316331461140d5760405162461bcd60e51b815260040161051a90611c6f565b6001600160a01b0381166114725760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161051a565b61147b81611681565b50565b6033546001600160a01b031633146114a85760405162461bcd60e51b815260040161051a90611c6f565b609954600160e01b900460ff16156114d25760405162461bcd60e51b815260040161051a90611d83565b60a08190556040518181527fc03e813ac3c72b419d55e3347033254b7730e1c13579c72e3b0258faa1c228a790602001610882565b6033546001600160a01b031633146115315760405162461bcd60e51b815260040161051a90611c6f565b600081116115515760405162461bcd60e51b815260040161051a90612033565b609a8190556040518181527f1547cf4f4e088a233f379adf2a2ca21d8007a1a0273ac91fa1ec95d0c8e8414b90602001610882565b6040516001600160a01b0383166024820152604481018290526115e990849063a9059cbb60e01b906064015b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526117d7565b505050565b60655460ff166116375760405162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604482015260640161051a565b6065805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b60655460ff16156116f65760405162461bcd60e51b815260040161051a90611dba565b6065805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586116643390565b6040516001600160a01b03808516602483015283166044820152606481018290526117639085906323b872dd60e01b906084016115b2565b50505050565b600054610100900460ff166117905760405162461bcd60e51b815260040161051a90612078565b6117986118a9565b6107b86118d0565b600054610100900460ff166117c75760405162461bcd60e51b815260040161051a90612078565b6117cf6118a9565b6107b8611900565b600061182c826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166119339092919063ffffffff16565b8051909150156115e9578080602001905181019061184a9190611fc5565b6115e95760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161051a565b600054610100900460ff166107b85760405162461bcd60e51b815260040161051a90612078565b600054610100900460ff166118f75760405162461bcd60e51b815260040161051a90612078565b6107b833611681565b600054610100900460ff166119275760405162461bcd60e51b815260040161051a90612078565b6065805460ff19169055565b6060611942848460008561194c565b90505b9392505050565b6060824710156119ad5760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b606482015260840161051a565b843b6119fb5760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161051a565b600080866001600160a01b03168587604051611a1791906120ef565b60006040518083038185875af1925050503d8060008114611a54576040519150601f19603f3d011682016040523d82523d6000602084013e611a59565b606091505b5091509150611a69828286611a74565b979650505050505050565b60608315611a83575081611945565b825115611a935782518084602001fd5b8160405162461bcd60e51b815260040161051a919061210b565b80356001600160a01b0381168114611ac457600080fd5b919050565b600060208284031215611adb57600080fd5b61194582611aad565b80356001600160401b0381168114611ac457600080fd5b600060208284031215611b0d57600080fd5b61194582611ae4565b600060208284031215611b2857600080fd5b5035919050565b60ff8116811461147b57600080fd5b60008060008060608587031215611b5457600080fd5b843593506020850135611b6681611b2f565b925060408501356001600160401b0380821115611b8257600080fd5b818701915087601f830112611b9657600080fd5b813581811115611ba557600080fd5b8860208260051b8501011115611bba57600080fd5b95989497505060200194505050565b600080600080600080600080610100898b031215611be657600080fd5b611bef89611aad565b9750611bfd60208a01611aad565b9650611c0b60408a01611ae4565b9550611c1960608a01611ae4565b945060808901359350611c2e60a08a01611aad565b9250611c3c60c08a01611aad565b915060e089013590509295985092959890939650565b600060208284031215611c6457600080fd5b813561194581611b2f565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b600060208284031215611cb657600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b600082821015611ce557611ce5611cbd565b500390565b6020808252602c908201527f546f6b656e53616c653a2073616c6520726563697069656e742073686f756c6460408201526b206e6f74206265207a65726f60a01b606082015260800190565b6020808252602d908201527f546f6b656e53616c653a207468652073616c65206475726174696f6e206d757360408201526c74206e6f74206265207a65726f60981b606082015260800190565b6020808252601c908201527f546f6b656e53616c653a20616c72656164792066696e616c697a656400000000604082015260600190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b60008219821115611df757611df7611cbd565b500190565b600060208284031215611e0e57600080fd5b815161194581611b2f565b600181815b80851115611e54578160001904821115611e3a57611e3a611cbd565b80851615611e4757918102915b93841c9390800290611e1e565b509250929050565b600082611e6b57506001610c5d565b81611e7857506000610c5d565b8160018114611e8e5760028114611e9857611eb4565b6001915050610c5d565b60ff841115611ea957611ea9611cbd565b50506001821b610c5d565b5060208310610133831016604e8410600b8410161715611ed7575081810a610c5d565b611ee18383611e19565b8060001904821115611ef557611ef5611cbd565b029392505050565b600061194560ff841683611e5c565b6000816000190483118215151615611f2657611f26611cbd565b500290565b600082611f4857634e487b7160e01b600052601260045260246000fd5b500490565b60006001600160401b03808316818516808303821115611f6f57611f6f611cbd565b01949350505050565b6001600160a01b0384168152604060208201819052810182905260006001600160fb1b03831115611fa857600080fd5b8260051b8085606085013760009201606001918252509392505050565b600060208284031215611fd757600080fd5b8151801515811461194557600080fd5b6020808252602c908201527f546f6b656e53616c653a2073746172742064617465206d6179206e6f7420626560408201526b081a5b881d1a19481c185cdd60a21b606082015260800190565b60208082526025908201527f546f6b656e53616c653a20746865207072696365206d757374206e6f74206265604082015264207a65726f60d81b606082015260800190565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b60005b838110156120de5781810151838201526020016120c6565b838111156117635750506000910152565b600082516121018184602087016120c3565b9190910192915050565b602081526000825180602084015261212a8160408501602087016120c3565b601f01601f1916919091016040019291505056fea26469706673582212203187f9de1bc94f6ba8ca6ffb7e2438ccb59c8790bd234e8f23ce26e6bff8088664736f6c634300080b0033
```
```
608060405234801561001057600080fd5b506004361061021c5760003560e01c806373b2e80e11610125578063b3a891c9116100ad578063e9a2f2e01161007c578063e9a2f2e01461048e578063f2fde38b14610497578063f49af3fa146104aa578063fd7e60a9146104bd578063fee839c6146104d057600080fd5b8063b3a891c914610441578063b3f05b9714610454578063d0202d3b14610468578063dacec66e1461047b57600080fd5b80639b8906ae116100f45780639b8906ae146103fb578063a1d9eecf14610403578063ab0bcc4114610416578063abf017e914610430578063afb8a52e1461043957600080fd5b806373b2e80e146103ac5780638456cb59146103cf5780638b234215146103d75780638da5cb5b146103ea57600080fd5b80634e71d92d116101a85780635c975abb116101775780635c975abb14610351578063618426fc1461036857806368c91d8f146103715780636daf390b14610391578063715018a6146103a457600080fd5b80634e71d92d146102fb578063564f0848146103035780635b019b761461030c5780635c1952171461033e57600080fd5b806324f3dd2f116101ef57806324f3dd2f146102965780633711d9fb146102ad5780633f4ba83a146102d857806346afbc1b146102e05780634bb278f3146102f357600080fd5b806301681a62146102215780630d4ec845146102365780631c908d9814610249578063240877101461025c575b600080fd5b61023461022f366004611ac7565b6104f0565b005b610234610244366004611ac7565b610667565b610234610257366004611ac7565b6106db565b61027f61026a366004611ac7565b60a36020526000908152604090205460ff1681565b60405160ff90911681526020015b60405180910390f35b61029f60a05481565b60405190815260200161028d565b6099546102c0906001600160401b031681565b6040516001600160401b03909116815260200161028d565b610234610786565b6102346102ee366004611af9565b6107ba565b61023461088d565b61029f610a30565b61029f609f5481565b60995461032690600160401b90046001600160a01b031681565b6040516001600160a01b03909116815260200161028d565b61029f61034c366004611b14565b610bcc565b60655460ff165b604051901515815260200161028d565b61029f609e5481565b61029f61037f366004611ac7565b609b6020526000908152604090205481565b609854610326906001600160a01b031681565b610234610c63565b6103586103ba366004611ac7565b609c6020526000908152604090205460ff1681565b610234610c97565b60a154610326906001600160a01b031681565b6033546001600160a01b0316610326565b610358610cc9565b61029f610411366004611b3c565b610d10565b6098546102c090600160a01b90046001600160401b031681565b61029f609a5481565b61029f611103565b61023461044f366004611af9565b611124565b60995461035890600160e01b900460ff1681565b609754610326906001600160a01b031681565b610234610489366004611bc7565b6111fc565b61029f609d5481565b6102346104a5366004611ac7565b6113e1565b6102346104b8366004611b14565b61147c565b6102346104cb366004611b14565b611505565b61029f6104de366004611c50565b60a26020526000908152604090205481565b6033546001600160a01b031633146105235760405162461bcd60e51b815260040161051a90611c6d565b60405180910390fd5b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a0823190602401602060405180830381865afa15801561056a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061058e9190611ca2565b6097549091506001600160a01b03838116911614156105c9576000609f54609e546105b99190611cd1565b90506105c58183611cd1565b9150505b6000811161060c5760405162461bcd60e51b815260206004820152601060248201526f06e6f7468696e6720746f2073776565760841b604482015260640161051a565b6106206001600160a01b0383163383611584565b816001600160a01b03167f1b94d65e3a03a98b13e90142a41884547fdd622b7f14a4daf94f6338e2e85cf08260405161065b91815260200190565b60405180910390a25050565b6033546001600160a01b031633146106915760405162461bcd60e51b815260040161051a90611c6d565b60a180546001600160a01b0319166001600160a01b0383169081179091556040517f650070ede2ab0ad22a57e15b88d668804b8f7c361a1ee8560093705f4d78abdd90600090a250565b6033546001600160a01b031633146107055760405162461bcd60e51b815260040161051a90611c6d565b6001600160a01b03811661072b5760405162461bcd60e51b815260040161051a90611ce8565b6099805468010000000000000000600160e01b031916600160401b6001600160a01b038416908102919091179091556040517f22fcd0f303ce9972cac865bf07f264510ba86521618196591c01ad233f97826690600090a250565b6033546001600160a01b031633146107b05760405162461bcd60e51b815260040161051a90611c6d565b6107b86115ec565b565b6033546001600160a01b031633146107e45760405162461bcd60e51b815260040161051a90611c6d565b6000816001600160401b03161161080d5760405162461bcd60e51b815260040161051a90611d34565b609954600160e01b900460ff16156108375760405162461bcd60e51b815260040161051a90611d81565b6099805467ffffffffffffffff19166001600160401b0383169081179091556040519081527f63d2e06731cd563c7ce4ee2e4227ead624e21cfb8bde59079d343e63ec3baf5f906020015b60405180910390a150565b6033546001600160a01b031633146108b75760405162461bcd60e51b815260040161051a90611c6d565b609954600160e01b900460ff16156108e15760405162461bcd60e51b815260040161051a90611d81565b6108e9610cc9565b6109355760405162461bcd60e51b815260206004820152601760248201527f546f6b656e53616c653a206e6f742066696e6973686564000000000000000000604482015260640161051a565b609e546097546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015610980573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a49190611ca2565b10156109f25760405162461bcd60e51b815260206004820152601d60248201527f546f6b656e53616c653a206e6f7420656e6f7567682062616c616e6365000000604482015260640161051a565b6099805460ff60e01b1916600160e01b1790556040517f6823b073d48d6e3a7d385eeb601452d680e74bb46afe3255a7d778f3a9b1768190600090a1565b6000610a3e60655460ff1690565b15610a5b5760405162461bcd60e51b815260040161051a90611db8565b609954600160e01b900460ff16610aa95760405162461bcd60e51b81526020600482015260126024820152711cd85b19481b9bdd08199a5b985b1a5e995960721b604482015260640161051a565b336000908152609c602052604090205460ff1615610afb5760405162461bcd60e51b815260206004820152600f60248201526e185b1c9958591e4818db185a5b5959608a1b604482015260640161051a565b50336000908152609b602052604090205480610b4c5760405162461bcd60e51b815260206004820152601060248201526f6e6f7468696e6720746f20636c61696d60801b604482015260640161051a565b336000908152609c60205260408120805460ff19166001179055609f8054839290610b78908490611de2565b9091555050609754610b94906001600160a01b03163383611584565b60405181815233907f47cee97cb7acd717b3c0aa1435d004cd5b3c8c57d70dbceb4e4458bbd60e39d49060200160405180910390a290565b609a546097546040805163313ce56760e01b81529051600093926001600160a01b03169163313ce5679160048083019260209291908290030181865afa158015610c1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3e9190611dfa565b610c4990600a611efb565b610c539084611f0a565b610c5d9190611f29565b92915050565b6033546001600160a01b03163314610c8d5760405162461bcd60e51b815260040161051a90611c6d565b6107b8600061167f565b6033546001600160a01b03163314610cc15760405162461bcd60e51b815260040161051a90611c6d565b6107b86116d1565b609954609854600091610cf0916001600160401b0391821691600160a01b90910416611f4b565b6001600160401b031642101580610d0b575060a054609d5410155b905090565b6000610d1e60655460ff1690565b15610d3b5760405162461bcd60e51b815260040161051a90611db8565b60985442600160a01b9091046001600160401b03161115610d975760405162461bcd60e51b8152602060048201526016602482015275151bdad95b94d85b194e881b9bdd081cdd185c9d195960521b604482015260640161051a565b609954609854610dba916001600160401b0390811691600160a01b900416611f4b565b6001600160401b03164210610e115760405162461bcd60e51b815260206004820152601860248201527f546f6b656e53616c653a20616c726561647920656e6465640000000000000000604482015260640161051a565b60008511610e615760405162461bcd60e51b815260206004820152601c60248201527f5f746f6b656e496e416d6f756e742073686f756c64206265203e203000000000604482015260640161051a565b60a05485609d54610e729190611de2565b1115610eb85760405162461bcd60e51b81526020600482015260156024820152741d1bdd185b08185b5bdd5b9d08195e18d959591959605a1b604482015260640161051a565b60a1546001600160a01b03168015610f7857604051631849250160e21b81526001600160a01b03821690636124940490610efa90339088908890600401611f76565b602060405180830381865afa158015610f17573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f3b9190611fc3565b610f785760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08185d5d1a1bdc9a5e995960921b604482015260640161051a565b336000908152609b60205260409020548015610ff75733600090815260a3602052604090205460ff878116911614610ff25760405162461bcd60e51b815260206004820152601c60248201527f63616e277420766f746520666f72206d756c7469706c652064616f7300000000604482015260640161051a565b611014565b33600090815260a360205260409020805460ff191660ff88161790555b61101d87610bcc565b92506110298382611de2565b336000908152609b602090815260408083209390935560ff8916825260a29052908120805485929061105c908490611de2565b9250508190555086609d60008282546110759190611de2565b9250508190555082609e600082825461108e9190611de2565b90915550506099546098546110b9916001600160a01b03918216913391600160401b9004168a611729565b604080518881526020810185905260ff88169133917f1ec0c95078c890035e941915909bcfe875eca2b01352f0caaf74680fe1d297ce910160405180910390a35050949350505050565b600060a054609d54101561112157609d5460a054610d0b9190611cd1565b90565b6033546001600160a01b0316331461114e5760405162461bcd60e51b815260040161051a90611c6d565b42816001600160401b031610156111775760405162461bcd60e51b815260040161051a90611fe5565b609954600160e01b900460ff16156111a15760405162461bcd60e51b815260040161051a90611d81565b6098805467ffffffffffffffff60a01b1916600160a01b6001600160401b038416908102919091179091556040519081527fe91b422c48d1f63476e86148f126e887ed21d449f2881a51c364f3519e73a89490602001610882565b600054610100900460ff166112175760005460ff161561121b565b303b155b61127e5760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161051a565b600054610100900460ff161580156112a0576000805461ffff19166101011790555b42876001600160401b031610156112c95760405162461bcd60e51b815260040161051a90611fe5565b6000866001600160401b0316116112f25760405162461bcd60e51b815260040161051a90611d34565b600085116113125760405162461bcd60e51b815260040161051a90612031565b6001600160a01b0384166113385760405162461bcd60e51b815260040161051a90611ce8565b611340611767565b61134861179e565b609780546001600160a01b03808c166001600160a01b031992831617909255609880546001600160401b03808c16600160a01b026001600160e01b03199283168e8716171790925560998054609a8b9055898616600160401b029216928b169290921717905560a180549286169290911691909117905560a082905580156113d6576000805461ff00191690555b505050505050505050565b6033546001600160a01b0316331461140b5760405162461bcd60e51b815260040161051a90611c6d565b6001600160a01b0381166114705760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161051a565b6114798161167f565b50565b6033546001600160a01b031633146114a65760405162461bcd60e51b815260040161051a90611c6d565b609954600160e01b900460ff16156114d05760405162461bcd60e51b815260040161051a90611d81565b60a08190556040518181527fc03e813ac3c72b419d55e3347033254b7730e1c13579c72e3b0258faa1c228a790602001610882565b6033546001600160a01b0316331461152f5760405162461bcd60e51b815260040161051a90611c6d565b6000811161154f5760405162461bcd60e51b815260040161051a90612031565b609a8190556040518181527f1547cf4f4e088a233f379adf2a2ca21d8007a1a0273ac91fa1ec95d0c8e8414b90602001610882565b6040516001600160a01b0383166024820152604481018290526115e790849063a9059cbb60e01b906064015b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526117d5565b505050565b60655460ff166116355760405162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604482015260640161051a565b6065805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b60655460ff16156116f45760405162461bcd60e51b815260040161051a90611db8565b6065805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586116623390565b6040516001600160a01b03808516602483015283166044820152606481018290526117619085906323b872dd60e01b906084016115b0565b50505050565b600054610100900460ff1661178e5760405162461bcd60e51b815260040161051a90612076565b6117966118a7565b6107b86118ce565b600054610100900460ff166117c55760405162461bcd60e51b815260040161051a90612076565b6117cd6118a7565b6107b86118fe565b600061182a826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166119319092919063ffffffff16565b8051909150156115e757808060200190518101906118489190611fc3565b6115e75760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161051a565b600054610100900460ff166107b85760405162461bcd60e51b815260040161051a90612076565b600054610100900460ff166118f55760405162461bcd60e51b815260040161051a90612076565b6107b83361167f565b600054610100900460ff166119255760405162461bcd60e51b815260040161051a90612076565b6065805460ff19169055565b6060611940848460008561194a565b90505b9392505050565b6060824710156119ab5760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b606482015260840161051a565b843b6119f95760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161051a565b600080866001600160a01b03168587604051611a1591906120ed565b60006040518083038185875af1925050503d8060008114611a52576040519150601f19603f3d011682016040523d82523d6000602084013e611a57565b606091505b5091509150611a67828286611a72565b979650505050505050565b60608315611a81575081611943565b825115611a915782518084602001fd5b8160405162461bcd60e51b815260040161051a9190612109565b80356001600160a01b0381168114611ac257600080fd5b919050565b600060208284031215611ad957600080fd5b61194382611aab565b80356001600160401b0381168114611ac257600080fd5b600060208284031215611b0b57600080fd5b61194382611ae2565b600060208284031215611b2657600080fd5b5035919050565b60ff8116811461147957600080fd5b60008060008060608587031215611b5257600080fd5b843593506020850135611b6481611b2d565b925060408501356001600160401b0380821115611b8057600080fd5b818701915087601f830112611b9457600080fd5b813581811115611ba357600080fd5b8860208260051b8501011115611bb857600080fd5b95989497505060200194505050565b600080600080600080600080610100898b031215611be457600080fd5b611bed89611aab565b9750611bfb60208a01611aab565b9650611c0960408a01611ae2565b9550611c1760608a01611ae2565b945060808901359350611c2c60a08a01611aab565b9250611c3a60c08a01611aab565b915060e089013590509295985092959890939650565b600060208284031215611c6257600080fd5b813561194381611b2d565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b600060208284031215611cb457600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b600082821015611ce357611ce3611cbb565b500390565b6020808252602c908201527f546f6b656e53616c653a2073616c6520726563697069656e742073686f756c6460408201526b206e6f74206265207a65726f60a01b606082015260800190565b6020808252602d908201527f546f6b656e53616c653a207468652073616c65206475726174696f6e206d757360408201526c74206e6f74206265207a65726f60981b606082015260800190565b6020808252601c908201527f546f6b656e53616c653a20616c72656164792066696e616c697a656400000000604082015260600190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b60008219821115611df557611df5611cbb565b500190565b600060208284031215611e0c57600080fd5b815161194381611b2d565b600181815b80851115611e52578160001904821115611e3857611e38611cbb565b80851615611e4557918102915b93841c9390800290611e1c565b509250929050565b600082611e6957506001610c5d565b81611e7657506000610c5d565b8160018114611e8c5760028114611e9657611eb2565b6001915050610c5d565b60ff841115611ea757611ea7611cbb565b50506001821b610c5d565b5060208310610133831016604e8410600b8410161715611ed5575081810a610c5d565b611edf8383611e17565b8060001904821115611ef357611ef3611cbb565b029392505050565b600061194360ff841683611e5a565b6000816000190483118215151615611f2457611f24611cbb565b500290565b600082611f4657634e487b7160e01b600052601260045260246000fd5b500490565b60006001600160401b03808316818516808303821115611f6d57611f6d611cbb565b01949350505050565b6001600160a01b0384168152604060208201819052810182905260006001600160fb1b03831115611fa657600080fd5b8260051b8085606085013760009201606001918252509392505050565b600060208284031215611fd557600080fd5b8151801515811461194357600080fd5b6020808252602c908201527f546f6b656e53616c653a2073746172742064617465206d6179206e6f7420626560408201526b081a5b881d1a19481c185cdd60a21b606082015260800190565b60208082526025908201527f546f6b656e53616c653a20746865207072696365206d757374206e6f74206265604082015264207a65726f60d81b606082015260800190565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b60005b838110156120dc5781810151838201526020016120c4565b838111156117615750506000910152565b600082516120ff8184602087016120c1565b9190910192915050565b60208152600082518060208401526121288160408501602087016120c1565b601f01601f1916919091016040019291505056fea2646970667358221220a90e8fc5572029fc72b9e835b5bea533a3ea1bf04a666e9c3b6caa466f0f34fc64736f6c634300080b0033
```

These are the byte code differences between the two versions

| PC.Orig      | Operation.Orig                  | Gas.Orig | PC.New       | Operation.New                   | Gas.New |
| -            | -                               | :-:      | -            | -                               | :-:     |
| 3779(0x0ec3) | SUB(0x3)                        | 3        | 3779(0x0ec3) | SUB(0x3)                        | 3       |
| 3780(0x0ec4) | AND(0x16)                       | 3        | 3780(0x0ec4) | AND(0x16)                       | 3       |
|              |                                 |          | 3781(0x0ec5) | DUP1(0x80)                      | 3       |
| 3781(0x0ec5) | ISZERO(0x15)                    | 3        | 3782(0x0ec6) | ISZERO(0x15)                    | 3       |
| 3782(0x0ec6) | PUSH2(0x61) ["0x0f","0x7b"]     | 3        | 3783(0x0ec7) | PUSH2(0x61) ["0x0f","0x78"]     | 3       |
| 3785(0x0ec9) | JUMPI(0x57)                     | 10       | 3786(0x0eca) | JUMPI(0x57)                     | 10      |
| 3786(0x0eca) | PUSH1(0x60) ["0xa1"]            | 3        | 3787(0x0ecb) | PUSH1(0x60) ["0x40"]            | 3       |
| 3788(0x0ecc) | SLOAD(0x54)                     | 800      |              |                                 |         |
| 3789(0x0ecd) | PUSH1(0x60) ["0x40"]            | 3        |              |                                 |         |
| 3791(0x0ecf) | MLOAD(0x51)                     | 3        | 3789(0x0ecd) | MLOAD(0x51)                     | 3       |
| 3792(0x0ed0) | PUSH4(0x63) ["0x18","0x49",...  | 3        | 3790(0x0ece) | PUSH4(0x63) ["0x18","0x49",...  | 3       |
| 3797(0x0ed5) | PUSH1(0x60) ["0xe2"]            | 3        | 3795(0x0ed3) | PUSH1(0x60) ["0xe2"]            | 3       |
| |            |             ...                 |          |              |              ...                |         | 
| 4349(0x10fd) | POP(0x50)                       | 2        | 4346(0x10fa) | POP(0x50)                       | 2       |
|              |                                 |          | 4347(0x10fb) | POP(0x50)                       | 2       |
| 4350(0x10fe) | SWAP5(0x94)                     | 3        | 4348(0x10fc) | SWAP5(0x94)                     | 3       |
| 4351(0x10ff) | SWAP4(0x93)                     | 3        | 4349(0x10fd) | SWAP4(0x93)                     | 3       |
| 4352(0x1100) | POP(0x50)                       | 2        | 4350(0x10fe) | POP(0x50)                       | 2       |
| 4353(0x1101) | POP(0x50)                       | 2        | 4351(0x10ff) | POP(0x50)                       | 2       |
| 4354(0x1102) | POP(0x50)                       | 2        | 4352(0x1100) | POP(0x50)                       | 2       |
| 4355(0x1103) | POP(0x50)                       | 2        | 4353(0x1101) | POP(0x50)                       | 2       |
| 4356(0x1104) | JUMP(0x56)                      | 8        | 4354(0x1102) | JUMP(0x56)                      | 8       |
|              |                                 |          |              |                                 |         |
|              | Total.Orig:                     | 114820*  |              | Total.New:                      | 114019* |

The suggested change provides a savings of 801* gas

\* There have been recent changes to the gas cost of `SLOAD`, including changes to the amount, and the cost of subsequent reads. Therefore, the table above will not be correct. See forge results below for exact, correct, values.


```
diff forgeResults.orig forgeResults.new
5c5
< [32m[PASS][0m testBuyAfterTokenInLimitUpdated() (gas: 324150)
---
> [32m[PASS][0m testBuyAfterTokenInLimitUpdated() (gas: 323948)
8c8
< [32m[PASS][0m testBuyFailsIfLimitExceeded() (gas: 290925)
---
> [32m[PASS][0m testBuyFailsIfLimitExceeded() (gas: 290824)
10c10
< [32m[PASS][0m testBuyFailsIfNotInGuestlist() (gas: 15392)
---
> [32m[PASS][0m testBuyFailsIfNotInGuestlist() (gas: 15289)
12,16c12,16
< [32m[PASS][0m testBuyMultipleBuyers() (gas: 324089)
< [32m[PASS][0m testBuyOnce() (gas: 219681)
< [32m[PASS][0m testBuyTwice() (gas: 318143)
< [32m[PASS][0m testBuyTwiceFailsForDifferentDaos() (gas: 226480)
< [32m[PASS][0m testBuyWhenNoGuestlist() (gas: 200536)
---
> [32m[PASS][0m testBuyMultipleBuyers() (gas: 324099)
> [32m[PASS][0m testBuyOnce() (gas: 219580)
> [32m[PASS][0m testBuyTwice() (gas: 317941)
> [32m[PASS][0m testBuyTwiceFailsForDifferentDaos() (gas: 226276)
> [32m[PASS][0m testBuyWhenNoGuestlist() (gas: 200541)
18,19c18,19
< [32m[PASS][0m testClaim() (gas: 368861)
< [32m[PASS][0m testClaimAfterMultipleBuys() (gas: 467216)
---
> [32m[PASS][0m testClaim() (gas: 368760)
> [32m[PASS][0m testClaimAfterMultipleBuys() (gas: 467014)
21c21
< [32m[PASS][0m testClaimFailsIfCalledAgain() (gas: 371463)
---
> [32m[PASS][0m testClaimFailsIfCalledAgain() (gas: 371362)
24c24
< [32m[PASS][0m testClaimMultipleBuyers() (gas: 538522)
---
> [32m[PASS][0m testClaimMultipleBuyers() (gas: 538532)
26c26
< [32m[PASS][0m testFinalize() (gas: 301754)
---
> [32m[PASS][0m testFinalize() (gas: 301653)
29c29
< [32m[PASS][0m testFinalizeFailsIfNotEnoughTokenIn() (gas: 226257)
---
> [32m[PASS][0m testFinalizeFailsIfNotEnoughTokenIn() (gas: 226156)
36,37c36,37
< [32m[PASS][0m testSaleEndedAfterLimit() (gas: 221010)
< [32m[PASS][0m testSaleRecipientChangedDuringSale() (gas: 342108)
---
> [32m[PASS][0m testSaleEndedAfterLimit() (gas: 220909)
> [32m[PASS][0m testSaleRecipientChangedDuringSale() (gas: 341906)
44,46c44,46
< [32m[PASS][0m testSweepTokenOut() (gas: 330925)
< [32m[PASS][0m testTokenInLimitLeft(uint256) (runs: 256, μ: 221304, ~: 221305)
< [32m[PASS][0m testTokenOutPriceDoubledDuringSale() (gas: 320103)
---
> [32m[PASS][0m testSweepTokenOut() (gas: 330824)
> [32m[PASS][0m testTokenInLimitLeft(uint256) (runs: 256, μ: 221203, ~: 221204)
> [32m[PASS][0m testTokenOutPriceDoubledDuringSale() (gas: 319901)
75c75
< │ 1714599                       ┆ 8596            ┆        ┆        ┆        ┆         │
---
> │ 1714199                       ┆ 8594            ┆        ┆        ┆        ┆         │
81c81
< │ buy                           ┆ 851             ┆ 55606  ┆ 93149  ┆ 95131  ┆ 32      │
---
> │ buy                           ┆ 851             ┆ 55552  ┆ 93153  ┆ 95050  ┆ 32      │
```


## Tools Used
Hardhat
Forge
npx @remix-project/remix-lib

## Recommended Mitigation Steps
Cache the result of storage reads in a stack variable for future reads


# [G-02] - Pre-calculate repeatedly-checked offsets
## Impact
Reading from storage is expensive, so it saves gas when only one variable has to be read versus multiple. If there is a calculation which requires multiple storage reads, the calculation should be optimized to pre-calculate as much as possible, and store the intermediate result in storage.

## Examples

### 1. [TokenSaleUpgradeable.sol:L150-153](https://github.com/code-423n4/2022-02-badger-citadel/blob/84596551d62f243d13fcb2d486346dde08002f7b/contracts/TokenSaleUpgradeable.sol#L150-L153)
```solidity
        require(
            block.timestamp < saleStart + saleDuration,
            "TokenSale: already ended"
        );
```

This is the diff of the original version of `contracts/TokenSaleUpgradeable.sol` and a new, optimized version
```solidity
25a26,27
>     /// time when tokens can no longer be purchaced
>     uint64 internal saleFinish;
126a129
>         saleFinish = _saleStart + _saleDuration;
151c154
<             block.timestamp < saleStart + saleDuration,
---
>             block.timestamp < saleFinish,
278a282
>         saleFinish = _saleStart + saleDuration;
294a299
>         saleFinish = saleStart + _saleDuration;
```

These are the results after the change
```
diff forgeResults.orig forgeResults.new
5,10c5,10
< [32m[PASS][0m testBuyAfterTokenInLimitUpdated() (gas: 324150)
< [32m[PASS][0m testBuyFailsAfterEnd() (gas: 7771)
< [32m[PASS][0m testBuyFailsBeforeStart() (gas: 10304)
< [32m[PASS][0m testBuyFailsIfLimitExceeded() (gas: 290925)
< [32m[PASS][0m testBuyFailsIfMoreThanLimit() (gas: 82652)
< [32m[PASS][0m testBuyFailsIfNotInGuestlist() (gas: 15392)
---
> [32m[PASS][0m testBuyAfterTokenInLimitUpdated() (gas: 323626)
> [32m[PASS][0m testBuyFailsAfterEnd() (gas: 7526)
> [32m[PASS][0m testBuyFailsBeforeStart() (gas: 10799)
> [32m[PASS][0m testBuyFailsIfLimitExceeded() (gas: 290418)
> [32m[PASS][0m testBuyFailsIfMoreThanLimit() (gas: 82407)
> [32m[PASS][0m testBuyFailsIfNotInGuestlist() (gas: 15147)
12,19c12,19
< [32m[PASS][0m testBuyMultipleBuyers() (gas: 324089)
< [32m[PASS][0m testBuyOnce() (gas: 219681)
< [32m[PASS][0m testBuyTwice() (gas: 318143)
< [32m[PASS][0m testBuyTwiceFailsForDifferentDaos() (gas: 226480)
< [32m[PASS][0m testBuyWhenNoGuestlist() (gas: 200536)
< [32m[PASS][0m testBuyZero() (gas: 6216)
< [32m[PASS][0m testClaim() (gas: 368861)
< [32m[PASS][0m testClaimAfterMultipleBuys() (gas: 467216)
---
> [32m[PASS][0m testBuyMultipleBuyers() (gas: 323565)
> [32m[PASS][0m testBuyOnce() (gas: 219419)
> [32m[PASS][0m testBuyTwice() (gas: 317619)
> [32m[PASS][0m testBuyTwiceFailsForDifferentDaos() (gas: 225973)
> [32m[PASS][0m testBuyWhenNoGuestlist() (gas: 200274)
> [32m[PASS][0m testBuyZero() (gas: 5971)
> [32m[PASS][0m testClaim() (gas: 368599)
> [32m[PASS][0m testClaimAfterMultipleBuys() (gas: 466692)
21c21
< [32m[PASS][0m testClaimFailsIfCalledAgain() (gas: 371463)
---
> [32m[PASS][0m testClaimFailsIfCalledAgain() (gas: 371201)
24,26c24,26
< [32m[PASS][0m testClaimMultipleBuyers() (gas: 538522)
< [32m[PASS][0m testExtendSaleDuration() (gas: 15922)
< [32m[PASS][0m testFinalize() (gas: 301754)
---
> [32m[PASS][0m testClaimMultipleBuyers() (gas: 537998)
> [32m[PASS][0m testExtendSaleDuration() (gas: 16440)
> [32m[PASS][0m testFinalize() (gas: 301492)
29c29
< [32m[PASS][0m testFinalizeFailsIfNotEnoughTokenIn() (gas: 226257)
---
> [32m[PASS][0m testFinalizeFailsIfNotEnoughTokenIn() (gas: 225995)
36,40c36,40
< [32m[PASS][0m testSaleEndedAfterLimit() (gas: 221010)
< [32m[PASS][0m testSaleRecipientChangedDuringSale() (gas: 342108)
< [32m[PASS][0m testSetSaleDuration() (gas: 9491)
< [32m[PASS][0m testSetSaleRecipient() (gas: 9593)
< [32m[PASS][0m testSetSaleStart() (gas: 9644)
---
> [32m[PASS][0m testSaleEndedAfterLimit() (gas: 220748)
> [32m[PASS][0m testSaleRecipientChangedDuringSale() (gas: 341561)
> [32m[PASS][0m testSetSaleDuration() (gas: 10009)
> [32m[PASS][0m testSetSaleRecipient() (gas: 9553)
> [32m[PASS][0m testSetSaleStart() (gas: 10139)
44,46c44,46
< [32m[PASS][0m testSweepTokenOut() (gas: 330925)
< [32m[PASS][0m testTokenInLimitLeft(uint256) (runs: 256, μ: 221304, ~: 221305)
< [32m[PASS][0m testTokenOutPriceDoubledDuringSale() (gas: 320103)
---
> [32m[PASS][0m testSweepTokenOut() (gas: 330663)
> [32m[PASS][0m testTokenInLimitLeft(uint256) (runs: 256, μ: 221042, ~: 221043)
> [32m[PASS][0m testTokenOutPriceDoubledDuringSale() (gas: 319579)
75c75
< │ 1714599                       ┆ 8596            ┆        ┆        ┆        ┆         │
---
> │ 1745434                       ┆ 8750            ┆        ┆        ┆        ┆         │
81c81
< │ buy                           ┆ 851             ┆ 55606  ┆ 93149  ┆ 95131  ┆ 32      │
---
> │ buy                           ┆ 851             ┆ 55403  ┆ 92940  ┆ 94921  ┆ 32      │
99c99
< │ initialize                    ┆ 1359            ┆ 179527 ┆ 183671 ┆ 183671 ┆ 44      │
---
> │ initialize                    ┆ 1359            ┆ 201576 ┆ 206233 ┆ 206233 ┆ 44      │
111c111
< │ saleRecipient                 ┆ 444             ┆ 444    ┆ 444    ┆ 444    ┆ 1       │
---
> │ saleRecipient                 ┆ 427             ┆ 427    ┆ 427    ┆ 427    ┆ 1       │
117c117
< │ setSaleDuration               ┆ 679             ┆ 1592   ┆ 2049   ┆ 2049   ┆ 3       │
---
> │ setSaleDuration               ┆ 679             ┆ 1937   ┆ 2567   ┆ 2567   ┆ 3       │
119c119
< │ setSaleRecipient              ┆ 658             ┆ 1552   ┆ 1999   ┆ 1999   ┆ 3       │
---
> │ setSaleRecipient              ┆ 658             ┆ 1536   ┆ 1976   ┆ 1976   ┆ 3       │
121c121
< │ setSaleStart                  ┆ 612             ┆ 1553   ┆ 2024   ┆ 2024   ┆ 3       │
---
> │ setSaleStart                  ┆ 612             ┆ 1883   ┆ 2519   ┆ 2519   ┆ 3       │
148c148
< │ 659571                               ┆ 4313            ┆     ┆        ┆     ┆         │
---
> │ 682133                               ┆ 4313            ┆     ┆        ┆     ┆         │
```


### 2. [TokenSaleUpgradeable.sol:L241-243](https://github.com/code-423n4/2022-02-badger-citadel/blob/84596551d62f243d13fcb2d486346dde08002f7b/contracts/TokenSaleUpgradeable.sol#L241-243)
```solidity
        hasEnded_ =
            (block.timestamp >= saleStart + saleDuration) ||
            (totalTokenIn >= tokenInLimit);
```

This is the diff of the original version of `contracts/TokenSaleUpgradeable.sol` and a new, optimized version
```solidity
25a26,27
>     /// time when tokens can no longer be purchaced
>     uint64 internal saleFinish;
126a129
>         saleFinish = _saleStart + _saleDuration;
242c245
<             (block.timestamp >= saleStart + saleDuration) ||
---
>             (block.timestamp >= saleFinish) ||
278a282
>         saleFinish = _saleStart + saleDuration;
294a299
>         saleFinish = saleStart + _saleDuration;
```

These are the results after the change
```
diff forgeResults.orig forgeResults.new
5c5
< [32m[PASS][0m testBuyAfterTokenInLimitUpdated() (gas: 324150)
---
> [32m[PASS][0m testBuyAfterTokenInLimitUpdated() (gas: 324116)
7,8c7,8
< [32m[PASS][0m testBuyFailsBeforeStart() (gas: 10304)
< [32m[PASS][0m testBuyFailsIfLimitExceeded() (gas: 290925)
---
> [32m[PASS][0m testBuyFailsBeforeStart() (gas: 10799)
> [32m[PASS][0m testBuyFailsIfLimitExceeded() (gas: 290908)
12,16c12,16
< [32m[PASS][0m testBuyMultipleBuyers() (gas: 324089)
< [32m[PASS][0m testBuyOnce() (gas: 219681)
< [32m[PASS][0m testBuyTwice() (gas: 318143)
< [32m[PASS][0m testBuyTwiceFailsForDifferentDaos() (gas: 226480)
< [32m[PASS][0m testBuyWhenNoGuestlist() (gas: 200536)
---
> [32m[PASS][0m testBuyMultipleBuyers() (gas: 324055)
> [32m[PASS][0m testBuyOnce() (gas: 219664)
> [32m[PASS][0m testBuyTwice() (gas: 318109)
> [32m[PASS][0m testBuyTwiceFailsForDifferentDaos() (gas: 226463)
> [32m[PASS][0m testBuyWhenNoGuestlist() (gas: 200519)
18,19c18,19
< [32m[PASS][0m testClaim() (gas: 368861)
< [32m[PASS][0m testClaimAfterMultipleBuys() (gas: 467216)
---
> [32m[PASS][0m testClaim() (gas: 368596)
> [32m[PASS][0m testClaimAfterMultipleBuys() (gas: 466934)
21,22c21,22
< [32m[PASS][0m testClaimFailsIfCalledAgain() (gas: 371463)
< [32m[PASS][0m testClaimFailsWhenNothingToClaim() (gas: 93860)
---
> [32m[PASS][0m testClaimFailsIfCalledAgain() (gas: 371198)
> [32m[PASS][0m testClaimFailsWhenNothingToClaim() (gas: 93612)
24,29c24,29
< [32m[PASS][0m testClaimMultipleBuyers() (gas: 538522)
< [32m[PASS][0m testExtendSaleDuration() (gas: 15922)
< [32m[PASS][0m testFinalize() (gas: 301754)
< [32m[PASS][0m testFinalizeFailsBeforeSaleEnds() (gas: 8526)
< [32m[PASS][0m testFinalizeFailsIfCalledAgain() (gas: 89215)
< [32m[PASS][0m testFinalizeFailsIfNotEnoughTokenIn() (gas: 226257)
---
> [32m[PASS][0m testClaimMultipleBuyers() (gas: 538240)
> [32m[PASS][0m testExtendSaleDuration() (gas: 15696)
> [32m[PASS][0m testFinalize() (gas: 301489)
> [32m[PASS][0m testFinalizeFailsBeforeSaleEnds() (gas: 8278)
> [32m[PASS][0m testFinalizeFailsIfCalledAgain() (gas: 88967)
> [32m[PASS][0m testFinalizeFailsIfNotEnoughTokenIn() (gas: 225992)
35,40c35,40
< [32m[PASS][0m testSaleEndedAfterDuration() (gas: 9653)
< [32m[PASS][0m testSaleEndedAfterLimit() (gas: 221010)
< [32m[PASS][0m testSaleRecipientChangedDuringSale() (gas: 342108)
< [32m[PASS][0m testSetSaleDuration() (gas: 9491)
< [32m[PASS][0m testSetSaleRecipient() (gas: 9593)
< [32m[PASS][0m testSetSaleStart() (gas: 9644)
---
> [32m[PASS][0m testSaleEndedAfterDuration() (gas: 9157)
> [32m[PASS][0m testSaleEndedAfterLimit() (gas: 220745)
> [32m[PASS][0m testSaleRecipientChangedDuringSale() (gas: 342051)
> [32m[PASS][0m testSetSaleDuration() (gas: 10009)
> [32m[PASS][0m testSetSaleRecipient() (gas: 9553)
> [32m[PASS][0m testSetSaleStart() (gas: 10139)
44,46c44,46
< [32m[PASS][0m testSweepTokenOut() (gas: 330925)
< [32m[PASS][0m testTokenInLimitLeft(uint256) (runs: 256, μ: 221304, ~: 221305)
< [32m[PASS][0m testTokenOutPriceDoubledDuringSale() (gas: 320103)
---
> [32m[PASS][0m testSweepTokenOut() (gas: 330908)
> [32m[PASS][0m testTokenInLimitLeft(uint256) (runs: 256, μ: 221287, ~: 221288)
> [32m[PASS][0m testTokenOutPriceDoubledDuringSale() (gas: 320069)
75c75
< │ 1714599                       ┆ 8596            ┆        ┆        ┆        ┆         │
---
> │ 1745234                       ┆ 8749            ┆        ┆        ┆        ┆         │
81c81
< │ buy                           ┆ 851             ┆ 55606  ┆ 93149  ┆ 95131  ┆ 32      │
---
> │ buy                           ┆ 851             ┆ 55596  ┆ 93136  ┆ 95117  ┆ 32      │
89c89
< │ finalize                      ┆ 543             ┆ 3180   ┆ 3164   ┆ 5164   ┆ 11      │
---
> │ finalize                      ┆ 543             ┆ 2977   ┆ 2916   ┆ 4916   ┆ 11      │
99c99
< │ initialize                    ┆ 1359            ┆ 179527 ┆ 183671 ┆ 183671 ┆ 44      │
---
> │ initialize                    ┆ 1359            ┆ 201576 ┆ 206233 ┆ 206233 ┆ 44      │
109c109
< │ saleEnded                     ┆ 677             ┆ 1450   ┆ 784    ┆ 2891   ┆ 6       │
---
> │ saleEnded                     ┆ 429             ┆ 1202   ┆ 536    ┆ 2643   ┆ 6       │
111c111
< │ saleRecipient                 ┆ 444             ┆ 444    ┆ 444    ┆ 444    ┆ 1       │
---
> │ saleRecipient                 ┆ 427             ┆ 427    ┆ 427    ┆ 427    ┆ 1       │
117c117
< │ setSaleDuration               ┆ 679             ┆ 1592   ┆ 2049   ┆ 2049   ┆ 3       │
---
> │ setSaleDuration               ┆ 679             ┆ 1937   ┆ 2567   ┆ 2567   ┆ 3       │
119c119
< │ setSaleRecipient              ┆ 658             ┆ 1552   ┆ 1999   ┆ 1999   ┆ 3       │
---
> │ setSaleRecipient              ┆ 658             ┆ 1536   ┆ 1976   ┆ 1976   ┆ 3       │
121c121
< │ setSaleStart                  ┆ 612             ┆ 1553   ┆ 2024   ┆ 2024   ┆ 3       │
---
> │ setSaleStart                  ┆ 612             ┆ 1883   ┆ 2519   ┆ 2519   ┆ 3       │
148c148
< │ 659571                               ┆ 4313            ┆     ┆        ┆     ┆         │
---
> │ 682133                               ┆ 4313            ┆     ┆        ┆     ┆         │
```


## Tools Used
Forge

## Recommended Mitigation Steps
Pre-calculate the end timestamp, and reference that rather than adding `saleStart` and `saleDuration` in multiple places. Note that due to packing, the variable is sensitive to the order in which it is defined in the contract, as well as its visibility. Also note that while I've split the separate instances, in reality you'd apply both of them and get a larger ammortization benefit


# [G-03] - Use `unchecked` for operations not expected to overflow
## Impact
If it is not possible for an operation to overflow, it should be wrapped in `unchecked {}` to save the gas that would have been used to check for an overflow.

## Examples

### 1. [TokenSaleUpgradeable.sol:L150-153](https://github.com/code-423n4/2022-02-badger-citadel/blob/84596551d62f243d13fcb2d486346dde08002f7b/contracts/TokenSaleUpgradeable.sol#L150-L153)
```solidity
        require(
            block.timestamp < saleStart + saleDuration,
            "TokenSale: already ended"
        );
```

This is the diff of the original version of `contracts/TokenSaleUpgradeable.sol` and a new, optimized version
```solidity
150,151c150,151
<         require(
<             block.timestamp < saleStart + saleDuration,
---
>         unchecked { require(
>             block.timestamp < uint256(saleStart + saleDuration),
153c153
<         );
---
>         );}
```
These are the original byte code, followed by the byte code compiled from the new version
```
608060405234801561001057600080fd5b506004361061021c5760003560e01c806373b2e80e11610125578063b3a891c9116100ad578063e9a2f2e01161007c578063e9a2f2e01461048e578063f2fde38b14610497578063f49af3fa146104aa578063fd7e60a9146104bd578063fee839c6146104d057600080fd5b8063b3a891c914610441578063b3f05b9714610454578063d0202d3b14610468578063dacec66e1461047b57600080fd5b80639b8906ae116100f45780639b8906ae146103fb578063a1d9eecf14610403578063ab0bcc4114610416578063abf017e914610430578063afb8a52e1461043957600080fd5b806373b2e80e146103ac5780638456cb59146103cf5780638b234215146103d75780638da5cb5b146103ea57600080fd5b80634e71d92d116101a85780635c975abb116101775780635c975abb14610351578063618426fc1461036857806368c91d8f146103715780636daf390b14610391578063715018a6146103a457600080fd5b80634e71d92d146102fb578063564f0848146103035780635b019b761461030c5780635c1952171461033e57600080fd5b806324f3dd2f116101ef57806324f3dd2f146102965780633711d9fb146102ad5780633f4ba83a146102d857806346afbc1b146102e05780634bb278f3146102f357600080fd5b806301681a62146102215780630d4ec845146102365780631c908d9814610249578063240877101461025c575b600080fd5b61023461022f366004611ac9565b6104f0565b005b610234610244366004611ac9565b610667565b610234610257366004611ac9565b6106db565b61027f61026a366004611ac9565b60a36020526000908152604090205460ff1681565b60405160ff90911681526020015b60405180910390f35b61029f60a05481565b60405190815260200161028d565b6099546102c0906001600160401b031681565b6040516001600160401b03909116815260200161028d565b610234610786565b6102346102ee366004611afb565b6107ba565b61023461088d565b61029f610a30565b61029f609f5481565b60995461032690600160401b90046001600160a01b031681565b6040516001600160a01b03909116815260200161028d565b61029f61034c366004611b16565b610bcc565b60655460ff165b604051901515815260200161028d565b61029f609e5481565b61029f61037f366004611ac9565b609b6020526000908152604090205481565b609854610326906001600160a01b031681565b610234610c63565b6103586103ba366004611ac9565b609c6020526000908152604090205460ff1681565b610234610c97565b60a154610326906001600160a01b031681565b6033546001600160a01b0316610326565b610358610cc9565b61029f610411366004611b3e565b610d10565b6098546102c090600160a01b90046001600160401b031681565b61029f609a5481565b61029f611105565b61023461044f366004611afb565b611126565b60995461035890600160e01b900460ff1681565b609754610326906001600160a01b031681565b610234610489366004611bc9565b6111fe565b61029f609d5481565b6102346104a5366004611ac9565b6113e3565b6102346104b8366004611b16565b61147e565b6102346104cb366004611b16565b611507565b61029f6104de366004611c52565b60a26020526000908152604090205481565b6033546001600160a01b031633146105235760405162461bcd60e51b815260040161051a90611c6f565b60405180910390fd5b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a0823190602401602060405180830381865afa15801561056a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061058e9190611ca4565b6097549091506001600160a01b03838116911614156105c9576000609f54609e546105b99190611cd3565b90506105c58183611cd3565b9150505b6000811161060c5760405162461bcd60e51b815260206004820152601060248201526f06e6f7468696e6720746f2073776565760841b604482015260640161051a565b6106206001600160a01b0383163383611586565b816001600160a01b03167f1b94d65e3a03a98b13e90142a41884547fdd622b7f14a4daf94f6338e2e85cf08260405161065b91815260200190565b60405180910390a25050565b6033546001600160a01b031633146106915760405162461bcd60e51b815260040161051a90611c6f565b60a180546001600160a01b0319166001600160a01b0383169081179091556040517f650070ede2ab0ad22a57e15b88d668804b8f7c361a1ee8560093705f4d78abdd90600090a250565b6033546001600160a01b031633146107055760405162461bcd60e51b815260040161051a90611c6f565b6001600160a01b03811661072b5760405162461bcd60e51b815260040161051a90611cea565b6099805468010000000000000000600160e01b031916600160401b6001600160a01b038416908102919091179091556040517f22fcd0f303ce9972cac865bf07f264510ba86521618196591c01ad233f97826690600090a250565b6033546001600160a01b031633146107b05760405162461bcd60e51b815260040161051a90611c6f565b6107b86115ee565b565b6033546001600160a01b031633146107e45760405162461bcd60e51b815260040161051a90611c6f565b6000816001600160401b03161161080d5760405162461bcd60e51b815260040161051a90611d36565b609954600160e01b900460ff16156108375760405162461bcd60e51b815260040161051a90611d83565b6099805467ffffffffffffffff19166001600160401b0383169081179091556040519081527f63d2e06731cd563c7ce4ee2e4227ead624e21cfb8bde59079d343e63ec3baf5f906020015b60405180910390a150565b6033546001600160a01b031633146108b75760405162461bcd60e51b815260040161051a90611c6f565b609954600160e01b900460ff16156108e15760405162461bcd60e51b815260040161051a90611d83565b6108e9610cc9565b6109355760405162461bcd60e51b815260206004820152601760248201527f546f6b656e53616c653a206e6f742066696e6973686564000000000000000000604482015260640161051a565b609e546097546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015610980573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a49190611ca4565b10156109f25760405162461bcd60e51b815260206004820152601d60248201527f546f6b656e53616c653a206e6f7420656e6f7567682062616c616e6365000000604482015260640161051a565b6099805460ff60e01b1916600160e01b1790556040517f6823b073d48d6e3a7d385eeb601452d680e74bb46afe3255a7d778f3a9b1768190600090a1565b6000610a3e60655460ff1690565b15610a5b5760405162461bcd60e51b815260040161051a90611dba565b609954600160e01b900460ff16610aa95760405162461bcd60e51b81526020600482015260126024820152711cd85b19481b9bdd08199a5b985b1a5e995960721b604482015260640161051a565b336000908152609c602052604090205460ff1615610afb5760405162461bcd60e51b815260206004820152600f60248201526e185b1c9958591e4818db185a5b5959608a1b604482015260640161051a565b50336000908152609b602052604090205480610b4c5760405162461bcd60e51b815260206004820152601060248201526f6e6f7468696e6720746f20636c61696d60801b604482015260640161051a565b336000908152609c60205260408120805460ff19166001179055609f8054839290610b78908490611de4565b9091555050609754610b94906001600160a01b03163383611586565b60405181815233907f47cee97cb7acd717b3c0aa1435d004cd5b3c8c57d70dbceb4e4458bbd60e39d49060200160405180910390a290565b609a546097546040805163313ce56760e01b81529051600093926001600160a01b03169163313ce5679160048083019260209291908290030181865afa158015610c1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3e9190611dfc565b610c4990600a611efd565b610c539084611f0c565b610c5d9190611f2b565b92915050565b6033546001600160a01b03163314610c8d5760405162461bcd60e51b815260040161051a90611c6f565b6107b86000611681565b6033546001600160a01b03163314610cc15760405162461bcd60e51b815260040161051a90611c6f565b6107b86116d3565b609954609854600091610cf0916001600160401b0391821691600160a01b90910416611f4d565b6001600160401b031642101580610d0b575060a054609d5410155b905090565b6000610d1e60655460ff1690565b15610d3b5760405162461bcd60e51b815260040161051a90611dba565b60985442600160a01b9091046001600160401b03161115610d975760405162461bcd60e51b8152602060048201526016602482015275151bdad95b94d85b194e881b9bdd081cdd185c9d195960521b604482015260640161051a565b609954609854610dba916001600160401b0390811691600160a01b900416611f4d565b6001600160401b03164210610e115760405162461bcd60e51b815260206004820152601860248201527f546f6b656e53616c653a20616c726561647920656e6465640000000000000000604482015260640161051a565b60008511610e615760405162461bcd60e51b815260206004820152601c60248201527f5f746f6b656e496e416d6f756e742073686f756c64206265203e203000000000604482015260640161051a565b60a05485609d54610e729190611de4565b1115610eb85760405162461bcd60e51b81526020600482015260156024820152741d1bdd185b08185b5bdd5b9d08195e18d959591959605a1b604482015260640161051a565b60a1546001600160a01b031615610f7b5760a154604051631849250160e21b81526001600160a01b0390911690636124940490610efd90339087908790600401611f78565b602060405180830381865afa158015610f1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f3e9190611fc5565b610f7b5760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08185d5d1a1bdc9a5e995960921b604482015260640161051a565b336000908152609b60205260409020548015610ffa5733600090815260a3602052604090205460ff868116911614610ff55760405162461bcd60e51b815260206004820152601c60248201527f63616e277420766f746520666f72206d756c7469706c652064616f7300000000604482015260640161051a565b611017565b33600090815260a360205260409020805460ff191660ff87161790555b61102086610bcc565b915061102c8282611de4565b336000908152609b602090815260408083209390935560ff8816825260a29052908120805484929061105f908490611de4565b9250508190555085609d60008282546110789190611de4565b9250508190555081609e60008282546110919190611de4565b90915550506099546098546110bc916001600160a01b03918216913391600160401b9004168961172b565b604080518781526020810184905260ff87169133917f1ec0c95078c890035e941915909bcfe875eca2b01352f0caaf74680fe1d297ce910160405180910390a350949350505050565b600060a054609d54101561112357609d5460a054610d0b9190611cd3565b90565b6033546001600160a01b031633146111505760405162461bcd60e51b815260040161051a90611c6f565b42816001600160401b031610156111795760405162461bcd60e51b815260040161051a90611fe7565b609954600160e01b900460ff16156111a35760405162461bcd60e51b815260040161051a90611d83565b6098805467ffffffffffffffff60a01b1916600160a01b6001600160401b038416908102919091179091556040519081527fe91b422c48d1f63476e86148f126e887ed21d449f2881a51c364f3519e73a89490602001610882565b600054610100900460ff166112195760005460ff161561121d565b303b155b6112805760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161051a565b600054610100900460ff161580156112a2576000805461ffff19166101011790555b42876001600160401b031610156112cb5760405162461bcd60e51b815260040161051a90611fe7565b6000866001600160401b0316116112f45760405162461bcd60e51b815260040161051a90611d36565b600085116113145760405162461bcd60e51b815260040161051a90612033565b6001600160a01b03841661133a5760405162461bcd60e51b815260040161051a90611cea565b611342611769565b61134a6117a0565b609780546001600160a01b03808c166001600160a01b031992831617909255609880546001600160401b03808c16600160a01b026001600160e01b03199283168e8716171790925560998054609a8b9055898616600160401b029216928b169290921717905560a180549286169290911691909117905560a082905580156113d8576000805461ff00191690555b505050505050505050565b6033546001600160a01b0316331461140d5760405162461bcd60e51b815260040161051a90611c6f565b6001600160a01b0381166114725760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161051a565b61147b81611681565b50565b6033546001600160a01b031633146114a85760405162461bcd60e51b815260040161051a90611c6f565b609954600160e01b900460ff16156114d25760405162461bcd60e51b815260040161051a90611d83565b60a08190556040518181527fc03e813ac3c72b419d55e3347033254b7730e1c13579c72e3b0258faa1c228a790602001610882565b6033546001600160a01b031633146115315760405162461bcd60e51b815260040161051a90611c6f565b600081116115515760405162461bcd60e51b815260040161051a90612033565b609a8190556040518181527f1547cf4f4e088a233f379adf2a2ca21d8007a1a0273ac91fa1ec95d0c8e8414b90602001610882565b6040516001600160a01b0383166024820152604481018290526115e990849063a9059cbb60e01b906064015b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526117d7565b505050565b60655460ff166116375760405162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604482015260640161051a565b6065805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b60655460ff16156116f65760405162461bcd60e51b815260040161051a90611dba565b6065805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586116643390565b6040516001600160a01b03808516602483015283166044820152606481018290526117639085906323b872dd60e01b906084016115b2565b50505050565b600054610100900460ff166117905760405162461bcd60e51b815260040161051a90612078565b6117986118a9565b6107b86118d0565b600054610100900460ff166117c75760405162461bcd60e51b815260040161051a90612078565b6117cf6118a9565b6107b8611900565b600061182c826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166119339092919063ffffffff16565b8051909150156115e9578080602001905181019061184a9190611fc5565b6115e95760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161051a565b600054610100900460ff166107b85760405162461bcd60e51b815260040161051a90612078565b600054610100900460ff166118f75760405162461bcd60e51b815260040161051a90612078565b6107b833611681565b600054610100900460ff166119275760405162461bcd60e51b815260040161051a90612078565b6065805460ff19169055565b6060611942848460008561194c565b90505b9392505050565b6060824710156119ad5760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b606482015260840161051a565b843b6119fb5760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161051a565b600080866001600160a01b03168587604051611a1791906120ef565b60006040518083038185875af1925050503d8060008114611a54576040519150601f19603f3d011682016040523d82523d6000602084013e611a59565b606091505b5091509150611a69828286611a74565b979650505050505050565b60608315611a83575081611945565b825115611a935782518084602001fd5b8160405162461bcd60e51b815260040161051a919061210b565b80356001600160a01b0381168114611ac457600080fd5b919050565b600060208284031215611adb57600080fd5b61194582611aad565b80356001600160401b0381168114611ac457600080fd5b600060208284031215611b0d57600080fd5b61194582611ae4565b600060208284031215611b2857600080fd5b5035919050565b60ff8116811461147b57600080fd5b60008060008060608587031215611b5457600080fd5b843593506020850135611b6681611b2f565b925060408501356001600160401b0380821115611b8257600080fd5b818701915087601f830112611b9657600080fd5b813581811115611ba557600080fd5b8860208260051b8501011115611bba57600080fd5b95989497505060200194505050565b600080600080600080600080610100898b031215611be657600080fd5b611bef89611aad565b9750611bfd60208a01611aad565b9650611c0b60408a01611ae4565b9550611c1960608a01611ae4565b945060808901359350611c2e60a08a01611aad565b9250611c3c60c08a01611aad565b915060e089013590509295985092959890939650565b600060208284031215611c6457600080fd5b813561194581611b2f565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b600060208284031215611cb657600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b600082821015611ce557611ce5611cbd565b500390565b6020808252602c908201527f546f6b656e53616c653a2073616c6520726563697069656e742073686f756c6460408201526b206e6f74206265207a65726f60a01b606082015260800190565b6020808252602d908201527f546f6b656e53616c653a207468652073616c65206475726174696f6e206d757360408201526c74206e6f74206265207a65726f60981b606082015260800190565b6020808252601c908201527f546f6b656e53616c653a20616c72656164792066696e616c697a656400000000604082015260600190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b60008219821115611df757611df7611cbd565b500190565b600060208284031215611e0e57600080fd5b815161194581611b2f565b600181815b80851115611e54578160001904821115611e3a57611e3a611cbd565b80851615611e4757918102915b93841c9390800290611e1e565b509250929050565b600082611e6b57506001610c5d565b81611e7857506000610c5d565b8160018114611e8e5760028114611e9857611eb4565b6001915050610c5d565b60ff841115611ea957611ea9611cbd565b50506001821b610c5d565b5060208310610133831016604e8410600b8410161715611ed7575081810a610c5d565b611ee18383611e19565b8060001904821115611ef557611ef5611cbd565b029392505050565b600061194560ff841683611e5c565b6000816000190483118215151615611f2657611f26611cbd565b500290565b600082611f4857634e487b7160e01b600052601260045260246000fd5b500490565b60006001600160401b03808316818516808303821115611f6f57611f6f611cbd565b01949350505050565b6001600160a01b0384168152604060208201819052810182905260006001600160fb1b03831115611fa857600080fd5b8260051b8085606085013760009201606001918252509392505050565b600060208284031215611fd757600080fd5b8151801515811461194557600080fd5b6020808252602c908201527f546f6b656e53616c653a2073746172742064617465206d6179206e6f7420626560408201526b081a5b881d1a19481c185cdd60a21b606082015260800190565b60208082526025908201527f546f6b656e53616c653a20746865207072696365206d757374206e6f74206265604082015264207a65726f60d81b606082015260800190565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b60005b838110156120de5781810151838201526020016120c6565b838111156117635750506000910152565b600082516121018184602087016120c3565b9190910192915050565b602081526000825180602084015261212a8160408501602087016120c3565b601f01601f1916919091016040019291505056fea26469706673582212203187f9de1bc94f6ba8ca6ffb7e2438ccb59c8790bd234e8f23ce26e6bff8088664736f6c634300080b0033
```
```
608060405234801561001057600080fd5b506004361061021c5760003560e01c806373b2e80e11610125578063b3a891c9116100ad578063e9a2f2e01161007c578063e9a2f2e01461048e578063f2fde38b14610497578063f49af3fa146104aa578063fd7e60a9146104bd578063fee839c6146104d057600080fd5b8063b3a891c914610441578063b3f05b9714610454578063d0202d3b14610468578063dacec66e1461047b57600080fd5b80639b8906ae116100f45780639b8906ae146103fb578063a1d9eecf14610403578063ab0bcc4114610416578063abf017e914610430578063afb8a52e1461043957600080fd5b806373b2e80e146103ac5780638456cb59146103cf5780638b234215146103d75780638da5cb5b146103ea57600080fd5b80634e71d92d116101a85780635c975abb116101775780635c975abb14610351578063618426fc1461036857806368c91d8f146103715780636daf390b14610391578063715018a6146103a457600080fd5b80634e71d92d146102fb578063564f0848146103035780635b019b761461030c5780635c1952171461033e57600080fd5b806324f3dd2f116101ef57806324f3dd2f146102965780633711d9fb146102ad5780633f4ba83a146102d857806346afbc1b146102e05780634bb278f3146102f357600080fd5b806301681a62146102215780630d4ec845146102365780631c908d9814610249578063240877101461025c575b600080fd5b61023461022f366004611aba565b6104f0565b005b610234610244366004611aba565b610667565b610234610257366004611aba565b6106db565b61027f61026a366004611aba565b60a36020526000908152604090205460ff1681565b60405160ff90911681526020015b60405180910390f35b61029f60a05481565b60405190815260200161028d565b6099546102c0906001600160401b031681565b6040516001600160401b03909116815260200161028d565b610234610786565b6102346102ee366004611aec565b6107ba565b61023461088d565b61029f610a30565b61029f609f5481565b60995461032690600160401b90046001600160a01b031681565b6040516001600160a01b03909116815260200161028d565b61029f61034c366004611b07565b610bcc565b60655460ff165b604051901515815260200161028d565b61029f609e5481565b61029f61037f366004611aba565b609b6020526000908152604090205481565b609854610326906001600160a01b031681565b610234610c63565b6103586103ba366004611aba565b609c6020526000908152604090205460ff1681565b610234610c97565b60a154610326906001600160a01b031681565b6033546001600160a01b0316610326565b610358610cc9565b61029f610411366004611b2f565b610d10565b6098546102c090600160a01b90046001600160401b031681565b61029f609a5481565b61029f6110f6565b61023461044f366004611aec565b611117565b60995461035890600160e01b900460ff1681565b609754610326906001600160a01b031681565b610234610489366004611bba565b6111ef565b61029f609d5481565b6102346104a5366004611aba565b6113d4565b6102346104b8366004611b07565b61146f565b6102346104cb366004611b07565b6114f8565b61029f6104de366004611c43565b60a26020526000908152604090205481565b6033546001600160a01b031633146105235760405162461bcd60e51b815260040161051a90611c60565b60405180910390fd5b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a0823190602401602060405180830381865afa15801561056a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061058e9190611c95565b6097549091506001600160a01b03838116911614156105c9576000609f54609e546105b99190611cc4565b90506105c58183611cc4565b9150505b6000811161060c5760405162461bcd60e51b815260206004820152601060248201526f06e6f7468696e6720746f2073776565760841b604482015260640161051a565b6106206001600160a01b0383163383611577565b816001600160a01b03167f1b94d65e3a03a98b13e90142a41884547fdd622b7f14a4daf94f6338e2e85cf08260405161065b91815260200190565b60405180910390a25050565b6033546001600160a01b031633146106915760405162461bcd60e51b815260040161051a90611c60565b60a180546001600160a01b0319166001600160a01b0383169081179091556040517f650070ede2ab0ad22a57e15b88d668804b8f7c361a1ee8560093705f4d78abdd90600090a250565b6033546001600160a01b031633146107055760405162461bcd60e51b815260040161051a90611c60565b6001600160a01b03811661072b5760405162461bcd60e51b815260040161051a90611cdb565b6099805468010000000000000000600160e01b031916600160401b6001600160a01b038416908102919091179091556040517f22fcd0f303ce9972cac865bf07f264510ba86521618196591c01ad233f97826690600090a250565b6033546001600160a01b031633146107b05760405162461bcd60e51b815260040161051a90611c60565b6107b86115df565b565b6033546001600160a01b031633146107e45760405162461bcd60e51b815260040161051a90611c60565b6000816001600160401b03161161080d5760405162461bcd60e51b815260040161051a90611d27565b609954600160e01b900460ff16156108375760405162461bcd60e51b815260040161051a90611d74565b6099805467ffffffffffffffff19166001600160401b0383169081179091556040519081527f63d2e06731cd563c7ce4ee2e4227ead624e21cfb8bde59079d343e63ec3baf5f906020015b60405180910390a150565b6033546001600160a01b031633146108b75760405162461bcd60e51b815260040161051a90611c60565b609954600160e01b900460ff16156108e15760405162461bcd60e51b815260040161051a90611d74565b6108e9610cc9565b6109355760405162461bcd60e51b815260206004820152601760248201527f546f6b656e53616c653a206e6f742066696e6973686564000000000000000000604482015260640161051a565b609e546097546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015610980573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a49190611c95565b10156109f25760405162461bcd60e51b815260206004820152601d60248201527f546f6b656e53616c653a206e6f7420656e6f7567682062616c616e6365000000604482015260640161051a565b6099805460ff60e01b1916600160e01b1790556040517f6823b073d48d6e3a7d385eeb601452d680e74bb46afe3255a7d778f3a9b1768190600090a1565b6000610a3e60655460ff1690565b15610a5b5760405162461bcd60e51b815260040161051a90611dab565b609954600160e01b900460ff16610aa95760405162461bcd60e51b81526020600482015260126024820152711cd85b19481b9bdd08199a5b985b1a5e995960721b604482015260640161051a565b336000908152609c602052604090205460ff1615610afb5760405162461bcd60e51b815260206004820152600f60248201526e185b1c9958591e4818db185a5b5959608a1b604482015260640161051a565b50336000908152609b602052604090205480610b4c5760405162461bcd60e51b815260206004820152601060248201526f6e6f7468696e6720746f20636c61696d60801b604482015260640161051a565b336000908152609c60205260408120805460ff19166001179055609f8054839290610b78908490611dd5565b9091555050609754610b94906001600160a01b03163383611577565b60405181815233907f47cee97cb7acd717b3c0aa1435d004cd5b3c8c57d70dbceb4e4458bbd60e39d49060200160405180910390a290565b609a546097546040805163313ce56760e01b81529051600093926001600160a01b03169163313ce5679160048083019260209291908290030181865afa158015610c1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3e9190611ded565b610c4990600a611eee565b610c539084611efd565b610c5d9190611f1c565b92915050565b6033546001600160a01b03163314610c8d5760405162461bcd60e51b815260040161051a90611c60565b6107b86000611672565b6033546001600160a01b03163314610cc15760405162461bcd60e51b815260040161051a90611c60565b6107b86116c4565b609954609854600091610cf0916001600160401b0391821691600160a01b90910416611f3e565b6001600160401b031642101580610d0b575060a054609d5410155b905090565b6000610d1e60655460ff1690565b15610d3b5760405162461bcd60e51b815260040161051a90611dab565b60985442600160a01b9091046001600160401b03161115610d975760405162461bcd60e51b8152602060048201526016602482015275151bdad95b94d85b194e881b9bdd081cdd185c9d195960521b604482015260640161051a565b6099546098546001600160401b03918216600160a01b909104821601164210610e025760405162461bcd60e51b815260206004820152601860248201527f546f6b656e53616c653a20616c726561647920656e6465640000000000000000604482015260640161051a565b60008511610e525760405162461bcd60e51b815260206004820152601c60248201527f5f746f6b656e496e416d6f756e742073686f756c64206265203e203000000000604482015260640161051a565b60a05485609d54610e639190611dd5565b1115610ea95760405162461bcd60e51b81526020600482015260156024820152741d1bdd185b08185b5bdd5b9d08195e18d959591959605a1b604482015260640161051a565b60a1546001600160a01b031615610f6c5760a154604051631849250160e21b81526001600160a01b0390911690636124940490610eee90339087908790600401611f69565b602060405180830381865afa158015610f0b573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f2f9190611fb6565b610f6c5760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08185d5d1a1bdc9a5e995960921b604482015260640161051a565b336000908152609b60205260409020548015610feb5733600090815260a3602052604090205460ff868116911614610fe65760405162461bcd60e51b815260206004820152601c60248201527f63616e277420766f746520666f72206d756c7469706c652064616f7300000000604482015260640161051a565b611008565b33600090815260a360205260409020805460ff191660ff87161790555b61101186610bcc565b915061101d8282611dd5565b336000908152609b602090815260408083209390935560ff8816825260a290529081208054849290611050908490611dd5565b9250508190555085609d60008282546110699190611dd5565b9250508190555081609e60008282546110829190611dd5565b90915550506099546098546110ad916001600160a01b03918216913391600160401b9004168961171c565b604080518781526020810184905260ff87169133917f1ec0c95078c890035e941915909bcfe875eca2b01352f0caaf74680fe1d297ce910160405180910390a350949350505050565b600060a054609d54101561111457609d5460a054610d0b9190611cc4565b90565b6033546001600160a01b031633146111415760405162461bcd60e51b815260040161051a90611c60565b42816001600160401b0316101561116a5760405162461bcd60e51b815260040161051a90611fd8565b609954600160e01b900460ff16156111945760405162461bcd60e51b815260040161051a90611d74565b6098805467ffffffffffffffff60a01b1916600160a01b6001600160401b038416908102919091179091556040519081527fe91b422c48d1f63476e86148f126e887ed21d449f2881a51c364f3519e73a89490602001610882565b600054610100900460ff1661120a5760005460ff161561120e565b303b155b6112715760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161051a565b600054610100900460ff16158015611293576000805461ffff19166101011790555b42876001600160401b031610156112bc5760405162461bcd60e51b815260040161051a90611fd8565b6000866001600160401b0316116112e55760405162461bcd60e51b815260040161051a90611d27565b600085116113055760405162461bcd60e51b815260040161051a90612024565b6001600160a01b03841661132b5760405162461bcd60e51b815260040161051a90611cdb565b61133361175a565b61133b611791565b609780546001600160a01b03808c166001600160a01b031992831617909255609880546001600160401b03808c16600160a01b026001600160e01b03199283168e8716171790925560998054609a8b9055898616600160401b029216928b169290921717905560a180549286169290911691909117905560a082905580156113c9576000805461ff00191690555b505050505050505050565b6033546001600160a01b031633146113fe5760405162461bcd60e51b815260040161051a90611c60565b6001600160a01b0381166114635760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161051a565b61146c81611672565b50565b6033546001600160a01b031633146114995760405162461bcd60e51b815260040161051a90611c60565b609954600160e01b900460ff16156114c35760405162461bcd60e51b815260040161051a90611d74565b60a08190556040518181527fc03e813ac3c72b419d55e3347033254b7730e1c13579c72e3b0258faa1c228a790602001610882565b6033546001600160a01b031633146115225760405162461bcd60e51b815260040161051a90611c60565b600081116115425760405162461bcd60e51b815260040161051a90612024565b609a8190556040518181527f1547cf4f4e088a233f379adf2a2ca21d8007a1a0273ac91fa1ec95d0c8e8414b90602001610882565b6040516001600160a01b0383166024820152604481018290526115da90849063a9059cbb60e01b906064015b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526117c8565b505050565b60655460ff166116285760405162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604482015260640161051a565b6065805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b60655460ff16156116e75760405162461bcd60e51b815260040161051a90611dab565b6065805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586116553390565b6040516001600160a01b03808516602483015283166044820152606481018290526117549085906323b872dd60e01b906084016115a3565b50505050565b600054610100900460ff166117815760405162461bcd60e51b815260040161051a90612069565b61178961189a565b6107b86118c1565b600054610100900460ff166117b85760405162461bcd60e51b815260040161051a90612069565b6117c061189a565b6107b86118f1565b600061181d826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166119249092919063ffffffff16565b8051909150156115da578080602001905181019061183b9190611fb6565b6115da5760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161051a565b600054610100900460ff166107b85760405162461bcd60e51b815260040161051a90612069565b600054610100900460ff166118e85760405162461bcd60e51b815260040161051a90612069565b6107b833611672565b600054610100900460ff166119185760405162461bcd60e51b815260040161051a90612069565b6065805460ff19169055565b6060611933848460008561193d565b90505b9392505050565b60608247101561199e5760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b606482015260840161051a565b843b6119ec5760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161051a565b600080866001600160a01b03168587604051611a0891906120e0565b60006040518083038185875af1925050503d8060008114611a45576040519150601f19603f3d011682016040523d82523d6000602084013e611a4a565b606091505b5091509150611a5a828286611a65565b979650505050505050565b60608315611a74575081611936565b825115611a845782518084602001fd5b8160405162461bcd60e51b815260040161051a91906120fc565b80356001600160a01b0381168114611ab557600080fd5b919050565b600060208284031215611acc57600080fd5b61193682611a9e565b80356001600160401b0381168114611ab557600080fd5b600060208284031215611afe57600080fd5b61193682611ad5565b600060208284031215611b1957600080fd5b5035919050565b60ff8116811461146c57600080fd5b60008060008060608587031215611b4557600080fd5b843593506020850135611b5781611b20565b925060408501356001600160401b0380821115611b7357600080fd5b818701915087601f830112611b8757600080fd5b813581811115611b9657600080fd5b8860208260051b8501011115611bab57600080fd5b95989497505060200194505050565b600080600080600080600080610100898b031215611bd757600080fd5b611be089611a9e565b9750611bee60208a01611a9e565b9650611bfc60408a01611ad5565b9550611c0a60608a01611ad5565b945060808901359350611c1f60a08a01611a9e565b9250611c2d60c08a01611a9e565b915060e089013590509295985092959890939650565b600060208284031215611c5557600080fd5b813561193681611b20565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b600060208284031215611ca757600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b600082821015611cd657611cd6611cae565b500390565b6020808252602c908201527f546f6b656e53616c653a2073616c6520726563697069656e742073686f756c6460408201526b206e6f74206265207a65726f60a01b606082015260800190565b6020808252602d908201527f546f6b656e53616c653a207468652073616c65206475726174696f6e206d757360408201526c74206e6f74206265207a65726f60981b606082015260800190565b6020808252601c908201527f546f6b656e53616c653a20616c72656164792066696e616c697a656400000000604082015260600190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b60008219821115611de857611de8611cae565b500190565b600060208284031215611dff57600080fd5b815161193681611b20565b600181815b80851115611e45578160001904821115611e2b57611e2b611cae565b80851615611e3857918102915b93841c9390800290611e0f565b509250929050565b600082611e5c57506001610c5d565b81611e6957506000610c5d565b8160018114611e7f5760028114611e8957611ea5565b6001915050610c5d565b60ff841115611e9a57611e9a611cae565b50506001821b610c5d565b5060208310610133831016604e8410600b8410161715611ec8575081810a610c5d565b611ed28383611e0a565b8060001904821115611ee657611ee6611cae565b029392505050565b600061193660ff841683611e4d565b6000816000190483118215151615611f1757611f17611cae565b500290565b600082611f3957634e487b7160e01b600052601260045260246000fd5b500490565b60006001600160401b03808316818516808303821115611f6057611f60611cae565b01949350505050565b6001600160a01b0384168152604060208201819052810182905260006001600160fb1b03831115611f9957600080fd5b8260051b8085606085013760009201606001918252509392505050565b600060208284031215611fc857600080fd5b8151801515811461193657600080fd5b6020808252602c908201527f546f6b656e53616c653a2073746172742064617465206d6179206e6f7420626560408201526b081a5b881d1a19481c185cdd60a21b606082015260800190565b60208082526025908201527f546f6b656e53616c653a20746865207072696365206d757374206e6f74206265604082015264207a65726f60d81b606082015260800190565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b60005b838110156120cf5781810151838201526020016120b7565b838111156117545750506000910152565b600082516120f28184602087016120b4565b9190910192915050565b602081526000825180602084015261211b8160408501602087016120b4565b601f01601f1916919091016040019291505056fea26469706673582212207f5f0fcd8d33161605824c34ac256dfd7e82a11bfe9eca896c2fcfea8804770264736f6c634300080b0033
```

These are the byte code differences between the two versions

| PC.Orig      | Operation.Orig              | Gas.Orig | PC.New       | Operation.New               | Gas.New |
| -            | -                           | :-:      | -            | -                           | :-:     |
| 3483(0x0d9b) | PUSH1(0x60) ["0x98"]        | 3        | 3483(0x0d9b) | PUSH1(0x60) ["0x98"]        | 3       |
| 3485(0x0d9d) | SLOAD(0x54)                 | 800*     | 3485(0x0d9d) | SLOAD(0x54)                 | 800     |
| 3486(0x0d9e) | PUSH2(0x61) ["0x0d","0xba"] | 3        |              |                             |         |
| 3489(0x0da1) | SWAP2(0x91)                 | 3        |              |                             |         |
| 3490(0x0da2) | PUSH1(0x60) ["0x01"]        | 3        | 3486(0x0d9e) | PUSH1(0x60) ["0x01"]        | 3       |
| 3492(0x0da4) | PUSH1(0x60) ["0x01"]        | 3        | 3488(0x0da0) | PUSH1(0x60) ["0x01"]        | 3       |
| 3494(0x0da6) | PUSH1(0x60) ["0x40"]        | 3        | 3490(0x0da2) | PUSH1(0x60) ["0x40"]        | 3       |
| 3496(0x0da8) | SHL(0x1b)                   | 3        | 3492(0x0da4) | SHL(0x1b)                   | 3       |
| 3497(0x0da9) | SUB(0x3)                    | 3        | 3493(0x0da5) | SUB(0x3)                    | 3       |
|              |                             |          | 3494(0x0da6) | SWAP2(0x91)                 | 3       |
|              |                             |          | 3495(0x0da7) | DUP3(0x82)                  | 3       |
| 3498(0x0daa) | SWAP1(0x90)                 | 3        |              |                             |         |
| 3499(0x0dab) | DUP2(0x81)                  | 3        |              |                             |         |
| 3500(0x0dac) | AND(0x16)                   | 3        | 3496(0x0da8) | AND(0x16)                   | 3       |
| 3501(0x0dad) | SWAP2(0x91)                 | 3        |              |                             |         |
| 3502(0x0dae) | PUSH1(0x60) ["0x01"]        | 3        | 3497(0x0da9) | PUSH1(0x60) ["0x01"]        | 3       |
| 3504(0x0db0) | PUSH1(0x60) ["0xa0"]        | 3        | 3499(0x0dab) | PUSH1(0x60) ["0xa0"]        | 3       |
| 3506(0x0db2) | SHL(0x1b)                   | 3        | 3501(0x0dad) | SHL(0x1b)                   | 3       |
| 3507(0x0db3) | SWAP1(0x90)                 | 3        | 3502(0x0dae) | SWAP1(0x90)                 | 3       |
|              |                             |          | 3503(0x0daf) | SWAP2(0x91)                 | 3       |
| 3508(0x0db4) | DIV(0x4)                    | 5        | 3504(0x0db0) | DIV(0x4)                    | 5       |
|              |                             |          | 3505(0x0db1) | DUP3(0x82)                  | 3       |
| 3509(0x0db5) | AND(0x16)                   | 3        | 3506(0x0db2) | AND(0x16)                   | 3       |
|              |                             |          | 3507(0x0db3) | ADD(0x1)                    | 3       |
| 3510(0x0db6) | PUSH2(0x61) ["0x1f","0x4d"] | 3        |              |                             |         |
| 3513(0x0db9) | JUMP(0x56)                  | 8        |              |                             |         |
| 3514(0x0dba) | JUMPDEST(0x5b)@0x0dba       | 1        |              |                             |         |
| 3515(0x0dbb) | PUSH1(0x60) ["0x01"]        | 3        |              |                             |         |
| 3517(0x0dbd) | PUSH1(0x60) ["0x01"]        | 3        |              |                             |         |
| 3519(0x0dbf) | PUSH1(0x60) ["0x40"]        | 3        |              |                             |         |
| 3521(0x0dc1) | SHL(0x1b)                   | 3        |              |                             |         |
| 3522(0x0dc2) | SUB(0x3)                    | 3        |              |                             |         |
| 3523(0x0dc3) | AND(0x16)                   | 3        | 3508(0x0db4) | AND(0x16)                   | 3       |
| 3524(0x0dc4) | TIMESTAMP(0x42)             | 2        | 3509(0x0db5) | TIMESTAMP(0x42)             | 2       |
| 3525(0x0dc5) | LT(0x10)                    | 3        | 3510(0x0db6) | LT(0x10)                    | 3       |
| 3526(0x0dc6) | PUSH2(0x61) ["0x0e","0x11"] | 3        | 3511(0x0db7) | PUSH2(0x61) ["0x0e","0x02"] | 3       |
| 3529(0x0dc9) | JUMPI(0x57)                 | 10       | 3514(0x0dba) | JUMPI(0x57)                 | 10      |
|              |                             |          |              |                             |         |
|              | Total.Orig:                 | 904      |              | Total.New:                  | 877     |

The suggested change provides a savings of 27* gas

```
diff forgeResults.orig forgeResults.new
5,6c5,6
< [32m[PASS][0m testBuyAfterTokenInLimitUpdated() (gas: 324150)
< [32m[PASS][0m testBuyFailsAfterEnd() (gas: 7771)
---
> [32m[PASS][0m testBuyAfterTokenInLimitUpdated() (gas: 323908)
> [32m[PASS][0m testBuyFailsAfterEnd() (gas: 7650)
8,10c8,10
< [32m[PASS][0m testBuyFailsIfLimitExceeded() (gas: 290925)
< [32m[PASS][0m testBuyFailsIfMoreThanLimit() (gas: 82652)
< [32m[PASS][0m testBuyFailsIfNotInGuestlist() (gas: 15392)
---
> [32m[PASS][0m testBuyFailsIfLimitExceeded() (gas: 290683)
> [32m[PASS][0m testBuyFailsIfMoreThanLimit() (gas: 82531)
> [32m[PASS][0m testBuyFailsIfNotInGuestlist() (gas: 15271)
12,19c12,19
< [32m[PASS][0m testBuyMultipleBuyers() (gas: 324089)
< [32m[PASS][0m testBuyOnce() (gas: 219681)
< [32m[PASS][0m testBuyTwice() (gas: 318143)
< [32m[PASS][0m testBuyTwiceFailsForDifferentDaos() (gas: 226480)
< [32m[PASS][0m testBuyWhenNoGuestlist() (gas: 200536)
< [32m[PASS][0m testBuyZero() (gas: 6216)
< [32m[PASS][0m testClaim() (gas: 368861)
< [32m[PASS][0m testClaimAfterMultipleBuys() (gas: 467216)
---
> [32m[PASS][0m testBuyMultipleBuyers() (gas: 323847)
> [32m[PASS][0m testBuyOnce() (gas: 219560)
> [32m[PASS][0m testBuyTwice() (gas: 317901)
> [32m[PASS][0m testBuyTwiceFailsForDifferentDaos() (gas: 226238)
> [32m[PASS][0m testBuyWhenNoGuestlist() (gas: 200415)
> [32m[PASS][0m testBuyZero() (gas: 6095)
> [32m[PASS][0m testClaim() (gas: 368740)
> [32m[PASS][0m testClaimAfterMultipleBuys() (gas: 466974)
21c21
< [32m[PASS][0m testClaimFailsIfCalledAgain() (gas: 371463)
---
> [32m[PASS][0m testClaimFailsIfCalledAgain() (gas: 371342)
24c24
< [32m[PASS][0m testClaimMultipleBuyers() (gas: 538522)
---
> [32m[PASS][0m testClaimMultipleBuyers() (gas: 538280)
26c26
< [32m[PASS][0m testFinalize() (gas: 301754)
---
> [32m[PASS][0m testFinalize() (gas: 301633)
29c29
< [32m[PASS][0m testFinalizeFailsIfNotEnoughTokenIn() (gas: 226257)
---
> [32m[PASS][0m testFinalizeFailsIfNotEnoughTokenIn() (gas: 226136)
36,37c36,37
< [32m[PASS][0m testSaleEndedAfterLimit() (gas: 221010)
< [32m[PASS][0m testSaleRecipientChangedDuringSale() (gas: 342108)
---
> [32m[PASS][0m testSaleEndedAfterLimit() (gas: 220889)
> [32m[PASS][0m testSaleRecipientChangedDuringSale() (gas: 341866)
44,46c44,46
< [32m[PASS][0m testSweepTokenOut() (gas: 330925)
< [32m[PASS][0m testTokenInLimitLeft(uint256) (runs: 256, μ: 221304, ~: 221305)
< [32m[PASS][0m testTokenOutPriceDoubledDuringSale() (gas: 320103)
---
> [32m[PASS][0m testSweepTokenOut() (gas: 330804)
> [32m[PASS][0m testTokenInLimitLeft(uint256) (runs: 256, μ: 221183, ~: 221184)
> [32m[PASS][0m testTokenOutPriceDoubledDuringSale() (gas: 319861)
75c75
< │ 1714599                       ┆ 8596            ┆        ┆        ┆        ┆         │
---
> │ 1711599                       ┆ 8581            ┆        ┆        ┆        ┆         │
81c81
< │ buy                           ┆ 851             ┆ 55606  ┆ 93149  ┆ 95131  ┆ 32      │
---
> │ buy                           ┆ 851             ┆ 55510  ┆ 93052  ┆ 95034  ┆ 32      │
```

### 2. [TokenSaleUpgradeable.sol:L241-243](https://github.com/code-423n4/2022-02-badger-citadel/blob/84596551d62f243d13fcb2d486346dde08002f7b/contracts/TokenSaleUpgradeable.sol#L241-243)
```solidity
        hasEnded_ =
            (block.timestamp >= saleStart + saleDuration) ||
            (totalTokenIn >= tokenInLimit);
```

This is the diff of the original version of `contracts/TokenSaleUpgradeable.sol` and a new, optimized version
```solidity
241,243c241,243
<         hasEnded_ =
<             (block.timestamp >= saleStart + saleDuration) ||
<             (totalTokenIn >= tokenInLimit);
---
>         unchecked { hasEnded_ =
>             (block.timestamp >= uint256(saleStart + saleDuration)) ||
>             (totalTokenIn >= tokenInLimit);}
```
These are the original byte code, followed by the byte code compiled from the new version
```
608060405234801561001057600080fd5b506004361061021c5760003560e01c806373b2e80e11610125578063b3a891c9116100ad578063e9a2f2e01161007c578063e9a2f2e01461048e578063f2fde38b14610497578063f49af3fa146104aa578063fd7e60a9146104bd578063fee839c6146104d057600080fd5b8063b3a891c914610441578063b3f05b9714610454578063d0202d3b14610468578063dacec66e1461047b57600080fd5b80639b8906ae116100f45780639b8906ae146103fb578063a1d9eecf14610403578063ab0bcc4114610416578063abf017e914610430578063afb8a52e1461043957600080fd5b806373b2e80e146103ac5780638456cb59146103cf5780638b234215146103d75780638da5cb5b146103ea57600080fd5b80634e71d92d116101a85780635c975abb116101775780635c975abb14610351578063618426fc1461036857806368c91d8f146103715780636daf390b14610391578063715018a6146103a457600080fd5b80634e71d92d146102fb578063564f0848146103035780635b019b761461030c5780635c1952171461033e57600080fd5b806324f3dd2f116101ef57806324f3dd2f146102965780633711d9fb146102ad5780633f4ba83a146102d857806346afbc1b146102e05780634bb278f3146102f357600080fd5b806301681a62146102215780630d4ec845146102365780631c908d9814610249578063240877101461025c575b600080fd5b61023461022f366004611ac9565b6104f0565b005b610234610244366004611ac9565b610667565b610234610257366004611ac9565b6106db565b61027f61026a366004611ac9565b60a36020526000908152604090205460ff1681565b60405160ff90911681526020015b60405180910390f35b61029f60a05481565b60405190815260200161028d565b6099546102c0906001600160401b031681565b6040516001600160401b03909116815260200161028d565b610234610786565b6102346102ee366004611afb565b6107ba565b61023461088d565b61029f610a30565b61029f609f5481565b60995461032690600160401b90046001600160a01b031681565b6040516001600160a01b03909116815260200161028d565b61029f61034c366004611b16565b610bcc565b60655460ff165b604051901515815260200161028d565b61029f609e5481565b61029f61037f366004611ac9565b609b6020526000908152604090205481565b609854610326906001600160a01b031681565b610234610c63565b6103586103ba366004611ac9565b609c6020526000908152604090205460ff1681565b610234610c97565b60a154610326906001600160a01b031681565b6033546001600160a01b0316610326565b610358610cc9565b61029f610411366004611b3e565b610d10565b6098546102c090600160a01b90046001600160401b031681565b61029f609a5481565b61029f611105565b61023461044f366004611afb565b611126565b60995461035890600160e01b900460ff1681565b609754610326906001600160a01b031681565b610234610489366004611bc9565b6111fe565b61029f609d5481565b6102346104a5366004611ac9565b6113e3565b6102346104b8366004611b16565b61147e565b6102346104cb366004611b16565b611507565b61029f6104de366004611c52565b60a26020526000908152604090205481565b6033546001600160a01b031633146105235760405162461bcd60e51b815260040161051a90611c6f565b60405180910390fd5b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a0823190602401602060405180830381865afa15801561056a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061058e9190611ca4565b6097549091506001600160a01b03838116911614156105c9576000609f54609e546105b99190611cd3565b90506105c58183611cd3565b9150505b6000811161060c5760405162461bcd60e51b815260206004820152601060248201526f06e6f7468696e6720746f2073776565760841b604482015260640161051a565b6106206001600160a01b0383163383611586565b816001600160a01b03167f1b94d65e3a03a98b13e90142a41884547fdd622b7f14a4daf94f6338e2e85cf08260405161065b91815260200190565b60405180910390a25050565b6033546001600160a01b031633146106915760405162461bcd60e51b815260040161051a90611c6f565b60a180546001600160a01b0319166001600160a01b0383169081179091556040517f650070ede2ab0ad22a57e15b88d668804b8f7c361a1ee8560093705f4d78abdd90600090a250565b6033546001600160a01b031633146107055760405162461bcd60e51b815260040161051a90611c6f565b6001600160a01b03811661072b5760405162461bcd60e51b815260040161051a90611cea565b6099805468010000000000000000600160e01b031916600160401b6001600160a01b038416908102919091179091556040517f22fcd0f303ce9972cac865bf07f264510ba86521618196591c01ad233f97826690600090a250565b6033546001600160a01b031633146107b05760405162461bcd60e51b815260040161051a90611c6f565b6107b86115ee565b565b6033546001600160a01b031633146107e45760405162461bcd60e51b815260040161051a90611c6f565b6000816001600160401b03161161080d5760405162461bcd60e51b815260040161051a90611d36565b609954600160e01b900460ff16156108375760405162461bcd60e51b815260040161051a90611d83565b6099805467ffffffffffffffff19166001600160401b0383169081179091556040519081527f63d2e06731cd563c7ce4ee2e4227ead624e21cfb8bde59079d343e63ec3baf5f906020015b60405180910390a150565b6033546001600160a01b031633146108b75760405162461bcd60e51b815260040161051a90611c6f565b609954600160e01b900460ff16156108e15760405162461bcd60e51b815260040161051a90611d83565b6108e9610cc9565b6109355760405162461bcd60e51b815260206004820152601760248201527f546f6b656e53616c653a206e6f742066696e6973686564000000000000000000604482015260640161051a565b609e546097546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015610980573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a49190611ca4565b10156109f25760405162461bcd60e51b815260206004820152601d60248201527f546f6b656e53616c653a206e6f7420656e6f7567682062616c616e6365000000604482015260640161051a565b6099805460ff60e01b1916600160e01b1790556040517f6823b073d48d6e3a7d385eeb601452d680e74bb46afe3255a7d778f3a9b1768190600090a1565b6000610a3e60655460ff1690565b15610a5b5760405162461bcd60e51b815260040161051a90611dba565b609954600160e01b900460ff16610aa95760405162461bcd60e51b81526020600482015260126024820152711cd85b19481b9bdd08199a5b985b1a5e995960721b604482015260640161051a565b336000908152609c602052604090205460ff1615610afb5760405162461bcd60e51b815260206004820152600f60248201526e185b1c9958591e4818db185a5b5959608a1b604482015260640161051a565b50336000908152609b602052604090205480610b4c5760405162461bcd60e51b815260206004820152601060248201526f6e6f7468696e6720746f20636c61696d60801b604482015260640161051a565b336000908152609c60205260408120805460ff19166001179055609f8054839290610b78908490611de4565b9091555050609754610b94906001600160a01b03163383611586565b60405181815233907f47cee97cb7acd717b3c0aa1435d004cd5b3c8c57d70dbceb4e4458bbd60e39d49060200160405180910390a290565b609a546097546040805163313ce56760e01b81529051600093926001600160a01b03169163313ce5679160048083019260209291908290030181865afa158015610c1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3e9190611dfc565b610c4990600a611efd565b610c539084611f0c565b610c5d9190611f2b565b92915050565b6033546001600160a01b03163314610c8d5760405162461bcd60e51b815260040161051a90611c6f565b6107b86000611681565b6033546001600160a01b03163314610cc15760405162461bcd60e51b815260040161051a90611c6f565b6107b86116d3565b609954609854600091610cf0916001600160401b0391821691600160a01b90910416611f4d565b6001600160401b031642101580610d0b575060a054609d5410155b905090565b6000610d1e60655460ff1690565b15610d3b5760405162461bcd60e51b815260040161051a90611dba565b60985442600160a01b9091046001600160401b03161115610d975760405162461bcd60e51b8152602060048201526016602482015275151bdad95b94d85b194e881b9bdd081cdd185c9d195960521b604482015260640161051a565b609954609854610dba916001600160401b0390811691600160a01b900416611f4d565b6001600160401b03164210610e115760405162461bcd60e51b815260206004820152601860248201527f546f6b656e53616c653a20616c726561647920656e6465640000000000000000604482015260640161051a565b60008511610e615760405162461bcd60e51b815260206004820152601c60248201527f5f746f6b656e496e416d6f756e742073686f756c64206265203e203000000000604482015260640161051a565b60a05485609d54610e729190611de4565b1115610eb85760405162461bcd60e51b81526020600482015260156024820152741d1bdd185b08185b5bdd5b9d08195e18d959591959605a1b604482015260640161051a565b60a1546001600160a01b031615610f7b5760a154604051631849250160e21b81526001600160a01b0390911690636124940490610efd90339087908790600401611f78565b602060405180830381865afa158015610f1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f3e9190611fc5565b610f7b5760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08185d5d1a1bdc9a5e995960921b604482015260640161051a565b336000908152609b60205260409020548015610ffa5733600090815260a3602052604090205460ff868116911614610ff55760405162461bcd60e51b815260206004820152601c60248201527f63616e277420766f746520666f72206d756c7469706c652064616f7300000000604482015260640161051a565b611017565b33600090815260a360205260409020805460ff191660ff87161790555b61102086610bcc565b915061102c8282611de4565b336000908152609b602090815260408083209390935560ff8816825260a29052908120805484929061105f908490611de4565b9250508190555085609d60008282546110789190611de4565b9250508190555081609e60008282546110919190611de4565b90915550506099546098546110bc916001600160a01b03918216913391600160401b9004168961172b565b604080518781526020810184905260ff87169133917f1ec0c95078c890035e941915909bcfe875eca2b01352f0caaf74680fe1d297ce910160405180910390a350949350505050565b600060a054609d54101561112357609d5460a054610d0b9190611cd3565b90565b6033546001600160a01b031633146111505760405162461bcd60e51b815260040161051a90611c6f565b42816001600160401b031610156111795760405162461bcd60e51b815260040161051a90611fe7565b609954600160e01b900460ff16156111a35760405162461bcd60e51b815260040161051a90611d83565b6098805467ffffffffffffffff60a01b1916600160a01b6001600160401b038416908102919091179091556040519081527fe91b422c48d1f63476e86148f126e887ed21d449f2881a51c364f3519e73a89490602001610882565b600054610100900460ff166112195760005460ff161561121d565b303b155b6112805760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161051a565b600054610100900460ff161580156112a2576000805461ffff19166101011790555b42876001600160401b031610156112cb5760405162461bcd60e51b815260040161051a90611fe7565b6000866001600160401b0316116112f45760405162461bcd60e51b815260040161051a90611d36565b600085116113145760405162461bcd60e51b815260040161051a90612033565b6001600160a01b03841661133a5760405162461bcd60e51b815260040161051a90611cea565b611342611769565b61134a6117a0565b609780546001600160a01b03808c166001600160a01b031992831617909255609880546001600160401b03808c16600160a01b026001600160e01b03199283168e8716171790925560998054609a8b9055898616600160401b029216928b169290921717905560a180549286169290911691909117905560a082905580156113d8576000805461ff00191690555b505050505050505050565b6033546001600160a01b0316331461140d5760405162461bcd60e51b815260040161051a90611c6f565b6001600160a01b0381166114725760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161051a565b61147b81611681565b50565b6033546001600160a01b031633146114a85760405162461bcd60e51b815260040161051a90611c6f565b609954600160e01b900460ff16156114d25760405162461bcd60e51b815260040161051a90611d83565b60a08190556040518181527fc03e813ac3c72b419d55e3347033254b7730e1c13579c72e3b0258faa1c228a790602001610882565b6033546001600160a01b031633146115315760405162461bcd60e51b815260040161051a90611c6f565b600081116115515760405162461bcd60e51b815260040161051a90612033565b609a8190556040518181527f1547cf4f4e088a233f379adf2a2ca21d8007a1a0273ac91fa1ec95d0c8e8414b90602001610882565b6040516001600160a01b0383166024820152604481018290526115e990849063a9059cbb60e01b906064015b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526117d7565b505050565b60655460ff166116375760405162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604482015260640161051a565b6065805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b60655460ff16156116f65760405162461bcd60e51b815260040161051a90611dba565b6065805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586116643390565b6040516001600160a01b03808516602483015283166044820152606481018290526117639085906323b872dd60e01b906084016115b2565b50505050565b600054610100900460ff166117905760405162461bcd60e51b815260040161051a90612078565b6117986118a9565b6107b86118d0565b600054610100900460ff166117c75760405162461bcd60e51b815260040161051a90612078565b6117cf6118a9565b6107b8611900565b600061182c826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166119339092919063ffffffff16565b8051909150156115e9578080602001905181019061184a9190611fc5565b6115e95760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161051a565b600054610100900460ff166107b85760405162461bcd60e51b815260040161051a90612078565b600054610100900460ff166118f75760405162461bcd60e51b815260040161051a90612078565b6107b833611681565b600054610100900460ff166119275760405162461bcd60e51b815260040161051a90612078565b6065805460ff19169055565b6060611942848460008561194c565b90505b9392505050565b6060824710156119ad5760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b606482015260840161051a565b843b6119fb5760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161051a565b600080866001600160a01b03168587604051611a1791906120ef565b60006040518083038185875af1925050503d8060008114611a54576040519150601f19603f3d011682016040523d82523d6000602084013e611a59565b606091505b5091509150611a69828286611a74565b979650505050505050565b60608315611a83575081611945565b825115611a935782518084602001fd5b8160405162461bcd60e51b815260040161051a919061210b565b80356001600160a01b0381168114611ac457600080fd5b919050565b600060208284031215611adb57600080fd5b61194582611aad565b80356001600160401b0381168114611ac457600080fd5b600060208284031215611b0d57600080fd5b61194582611ae4565b600060208284031215611b2857600080fd5b5035919050565b60ff8116811461147b57600080fd5b60008060008060608587031215611b5457600080fd5b843593506020850135611b6681611b2f565b925060408501356001600160401b0380821115611b8257600080fd5b818701915087601f830112611b9657600080fd5b813581811115611ba557600080fd5b8860208260051b8501011115611bba57600080fd5b95989497505060200194505050565b600080600080600080600080610100898b031215611be657600080fd5b611bef89611aad565b9750611bfd60208a01611aad565b9650611c0b60408a01611ae4565b9550611c1960608a01611ae4565b945060808901359350611c2e60a08a01611aad565b9250611c3c60c08a01611aad565b915060e089013590509295985092959890939650565b600060208284031215611c6457600080fd5b813561194581611b2f565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b600060208284031215611cb657600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b600082821015611ce557611ce5611cbd565b500390565b6020808252602c908201527f546f6b656e53616c653a2073616c6520726563697069656e742073686f756c6460408201526b206e6f74206265207a65726f60a01b606082015260800190565b6020808252602d908201527f546f6b656e53616c653a207468652073616c65206475726174696f6e206d757360408201526c74206e6f74206265207a65726f60981b606082015260800190565b6020808252601c908201527f546f6b656e53616c653a20616c72656164792066696e616c697a656400000000604082015260600190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b60008219821115611df757611df7611cbd565b500190565b600060208284031215611e0e57600080fd5b815161194581611b2f565b600181815b80851115611e54578160001904821115611e3a57611e3a611cbd565b80851615611e4757918102915b93841c9390800290611e1e565b509250929050565b600082611e6b57506001610c5d565b81611e7857506000610c5d565b8160018114611e8e5760028114611e9857611eb4565b6001915050610c5d565b60ff841115611ea957611ea9611cbd565b50506001821b610c5d565b5060208310610133831016604e8410600b8410161715611ed7575081810a610c5d565b611ee18383611e19565b8060001904821115611ef557611ef5611cbd565b029392505050565b600061194560ff841683611e5c565b6000816000190483118215151615611f2657611f26611cbd565b500290565b600082611f4857634e487b7160e01b600052601260045260246000fd5b500490565b60006001600160401b03808316818516808303821115611f6f57611f6f611cbd565b01949350505050565b6001600160a01b0384168152604060208201819052810182905260006001600160fb1b03831115611fa857600080fd5b8260051b8085606085013760009201606001918252509392505050565b600060208284031215611fd757600080fd5b8151801515811461194557600080fd5b6020808252602c908201527f546f6b656e53616c653a2073746172742064617465206d6179206e6f7420626560408201526b081a5b881d1a19481c185cdd60a21b606082015260800190565b60208082526025908201527f546f6b656e53616c653a20746865207072696365206d757374206e6f74206265604082015264207a65726f60d81b606082015260800190565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b60005b838110156120de5781810151838201526020016120c6565b838111156117635750506000910152565b600082516121018184602087016120c3565b9190910192915050565b602081526000825180602084015261212a8160408501602087016120c3565b601f01601f1916919091016040019291505056fea26469706673582212203187f9de1bc94f6ba8ca6ffb7e2438ccb59c8790bd234e8f23ce26e6bff8088664736f6c634300080b0033
```
```
608060405234801561001057600080fd5b506004361061021c5760003560e01c806373b2e80e11610125578063b3a891c9116100ad578063e9a2f2e01161007c578063e9a2f2e01461048e578063f2fde38b14610497578063f49af3fa146104aa578063fd7e60a9146104bd578063fee839c6146104d057600080fd5b8063b3a891c914610441578063b3f05b9714610454578063d0202d3b14610468578063dacec66e1461047b57600080fd5b80639b8906ae116100f45780639b8906ae146103fb578063a1d9eecf14610403578063ab0bcc4114610416578063abf017e914610430578063afb8a52e1461043957600080fd5b806373b2e80e146103ac5780638456cb59146103cf5780638b234215146103d75780638da5cb5b146103ea57600080fd5b80634e71d92d116101a85780635c975abb116101775780635c975abb14610351578063618426fc1461036857806368c91d8f146103715780636daf390b14610391578063715018a6146103a457600080fd5b80634e71d92d146102fb578063564f0848146103035780635b019b761461030c5780635c1952171461033e57600080fd5b806324f3dd2f116101ef57806324f3dd2f146102965780633711d9fb146102ad5780633f4ba83a146102d857806346afbc1b146102e05780634bb278f3146102f357600080fd5b806301681a62146102215780630d4ec845146102365780631c908d9814610249578063240877101461025c575b600080fd5b61023461022f366004611abc565b6104f0565b005b610234610244366004611abc565b610667565b610234610257366004611abc565b6106db565b61027f61026a366004611abc565b60a36020526000908152604090205460ff1681565b60405160ff90911681526020015b60405180910390f35b61029f60a05481565b60405190815260200161028d565b6099546102c0906001600160401b031681565b6040516001600160401b03909116815260200161028d565b610234610786565b6102346102ee366004611aee565b6107ba565b61023461088d565b61029f610a30565b61029f609f5481565b60995461032690600160401b90046001600160a01b031681565b6040516001600160a01b03909116815260200161028d565b61029f61034c366004611b09565b610bcc565b60655460ff165b604051901515815260200161028d565b61029f609e5481565b61029f61037f366004611abc565b609b6020526000908152604090205481565b609854610326906001600160a01b031681565b610234610c63565b6103586103ba366004611abc565b609c6020526000908152604090205460ff1681565b610234610c97565b60a154610326906001600160a01b031681565b6033546001600160a01b0316610326565b610358610cc9565b61029f610411366004611b31565b610d03565b6098546102c090600160a01b90046001600160401b031681565b61029f609a5481565b61029f6110f8565b61023461044f366004611aee565b611119565b60995461035890600160e01b900460ff1681565b609754610326906001600160a01b031681565b610234610489366004611bbc565b6111f1565b61029f609d5481565b6102346104a5366004611abc565b6113d6565b6102346104b8366004611b09565b611471565b6102346104cb366004611b09565b6114fa565b61029f6104de366004611c45565b60a26020526000908152604090205481565b6033546001600160a01b031633146105235760405162461bcd60e51b815260040161051a90611c62565b60405180910390fd5b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a0823190602401602060405180830381865afa15801561056a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061058e9190611c97565b6097549091506001600160a01b03838116911614156105c9576000609f54609e546105b99190611cc6565b90506105c58183611cc6565b9150505b6000811161060c5760405162461bcd60e51b815260206004820152601060248201526f06e6f7468696e6720746f2073776565760841b604482015260640161051a565b6106206001600160a01b0383163383611579565b816001600160a01b03167f1b94d65e3a03a98b13e90142a41884547fdd622b7f14a4daf94f6338e2e85cf08260405161065b91815260200190565b60405180910390a25050565b6033546001600160a01b031633146106915760405162461bcd60e51b815260040161051a90611c62565b60a180546001600160a01b0319166001600160a01b0383169081179091556040517f650070ede2ab0ad22a57e15b88d668804b8f7c361a1ee8560093705f4d78abdd90600090a250565b6033546001600160a01b031633146107055760405162461bcd60e51b815260040161051a90611c62565b6001600160a01b03811661072b5760405162461bcd60e51b815260040161051a90611cdd565b6099805468010000000000000000600160e01b031916600160401b6001600160a01b038416908102919091179091556040517f22fcd0f303ce9972cac865bf07f264510ba86521618196591c01ad233f97826690600090a250565b6033546001600160a01b031633146107b05760405162461bcd60e51b815260040161051a90611c62565b6107b86115e1565b565b6033546001600160a01b031633146107e45760405162461bcd60e51b815260040161051a90611c62565b6000816001600160401b03161161080d5760405162461bcd60e51b815260040161051a90611d29565b609954600160e01b900460ff16156108375760405162461bcd60e51b815260040161051a90611d76565b6099805467ffffffffffffffff19166001600160401b0383169081179091556040519081527f63d2e06731cd563c7ce4ee2e4227ead624e21cfb8bde59079d343e63ec3baf5f906020015b60405180910390a150565b6033546001600160a01b031633146108b75760405162461bcd60e51b815260040161051a90611c62565b609954600160e01b900460ff16156108e15760405162461bcd60e51b815260040161051a90611d76565b6108e9610cc9565b6109355760405162461bcd60e51b815260206004820152601760248201527f546f6b656e53616c653a206e6f742066696e6973686564000000000000000000604482015260640161051a565b609e546097546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015610980573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a49190611c97565b10156109f25760405162461bcd60e51b815260206004820152601d60248201527f546f6b656e53616c653a206e6f7420656e6f7567682062616c616e6365000000604482015260640161051a565b6099805460ff60e01b1916600160e01b1790556040517f6823b073d48d6e3a7d385eeb601452d680e74bb46afe3255a7d778f3a9b1768190600090a1565b6000610a3e60655460ff1690565b15610a5b5760405162461bcd60e51b815260040161051a90611dad565b609954600160e01b900460ff16610aa95760405162461bcd60e51b81526020600482015260126024820152711cd85b19481b9bdd08199a5b985b1a5e995960721b604482015260640161051a565b336000908152609c602052604090205460ff1615610afb5760405162461bcd60e51b815260206004820152600f60248201526e185b1c9958591e4818db185a5b5959608a1b604482015260640161051a565b50336000908152609b602052604090205480610b4c5760405162461bcd60e51b815260206004820152601060248201526f6e6f7468696e6720746f20636c61696d60801b604482015260640161051a565b336000908152609c60205260408120805460ff19166001179055609f8054839290610b78908490611dd7565b9091555050609754610b94906001600160a01b03163383611579565b60405181815233907f47cee97cb7acd717b3c0aa1435d004cd5b3c8c57d70dbceb4e4458bbd60e39d49060200160405180910390a290565b609a546097546040805163313ce56760e01b81529051600093926001600160a01b03169163313ce5679160048083019260209291908290030181865afa158015610c1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3e9190611def565b610c4990600a611ef0565b610c539084611eff565b610c5d9190611f1e565b92915050565b6033546001600160a01b03163314610c8d5760405162461bcd60e51b815260040161051a90611c62565b6107b86000611674565b6033546001600160a01b03163314610cc15760405162461bcd60e51b815260040161051a90611c62565b6107b86116c6565b6099546098546000916001600160401b03908116600160a01b9092048116919091011642101580610cfe575060a054609d5410155b905090565b6000610d1160655460ff1690565b15610d2e5760405162461bcd60e51b815260040161051a90611dad565b60985442600160a01b9091046001600160401b03161115610d8a5760405162461bcd60e51b8152602060048201526016602482015275151bdad95b94d85b194e881b9bdd081cdd185c9d195960521b604482015260640161051a565b609954609854610dad916001600160401b0390811691600160a01b900416611f40565b6001600160401b03164210610e045760405162461bcd60e51b815260206004820152601860248201527f546f6b656e53616c653a20616c726561647920656e6465640000000000000000604482015260640161051a565b60008511610e545760405162461bcd60e51b815260206004820152601c60248201527f5f746f6b656e496e416d6f756e742073686f756c64206265203e203000000000604482015260640161051a565b60a05485609d54610e659190611dd7565b1115610eab5760405162461bcd60e51b81526020600482015260156024820152741d1bdd185b08185b5bdd5b9d08195e18d959591959605a1b604482015260640161051a565b60a1546001600160a01b031615610f6e5760a154604051631849250160e21b81526001600160a01b0390911690636124940490610ef090339087908790600401611f6b565b602060405180830381865afa158015610f0d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f319190611fb8565b610f6e5760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08185d5d1a1bdc9a5e995960921b604482015260640161051a565b336000908152609b60205260409020548015610fed5733600090815260a3602052604090205460ff868116911614610fe85760405162461bcd60e51b815260206004820152601c60248201527f63616e277420766f746520666f72206d756c7469706c652064616f7300000000604482015260640161051a565b61100a565b33600090815260a360205260409020805460ff191660ff87161790555b61101386610bcc565b915061101f8282611dd7565b336000908152609b602090815260408083209390935560ff8816825260a290529081208054849290611052908490611dd7565b9250508190555085609d600082825461106b9190611dd7565b9250508190555081609e60008282546110849190611dd7565b90915550506099546098546110af916001600160a01b03918216913391600160401b9004168961171e565b604080518781526020810184905260ff87169133917f1ec0c95078c890035e941915909bcfe875eca2b01352f0caaf74680fe1d297ce910160405180910390a350949350505050565b600060a054609d54101561111657609d5460a054610cfe9190611cc6565b90565b6033546001600160a01b031633146111435760405162461bcd60e51b815260040161051a90611c62565b42816001600160401b0316101561116c5760405162461bcd60e51b815260040161051a90611fda565b609954600160e01b900460ff16156111965760405162461bcd60e51b815260040161051a90611d76565b6098805467ffffffffffffffff60a01b1916600160a01b6001600160401b038416908102919091179091556040519081527fe91b422c48d1f63476e86148f126e887ed21d449f2881a51c364f3519e73a89490602001610882565b600054610100900460ff1661120c5760005460ff1615611210565b303b155b6112735760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161051a565b600054610100900460ff16158015611295576000805461ffff19166101011790555b42876001600160401b031610156112be5760405162461bcd60e51b815260040161051a90611fda565b6000866001600160401b0316116112e75760405162461bcd60e51b815260040161051a90611d29565b600085116113075760405162461bcd60e51b815260040161051a90612026565b6001600160a01b03841661132d5760405162461bcd60e51b815260040161051a90611cdd565b61133561175c565b61133d611793565b609780546001600160a01b03808c166001600160a01b031992831617909255609880546001600160401b03808c16600160a01b026001600160e01b03199283168e8716171790925560998054609a8b9055898616600160401b029216928b169290921717905560a180549286169290911691909117905560a082905580156113cb576000805461ff00191690555b505050505050505050565b6033546001600160a01b031633146114005760405162461bcd60e51b815260040161051a90611c62565b6001600160a01b0381166114655760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161051a565b61146e81611674565b50565b6033546001600160a01b0316331461149b5760405162461bcd60e51b815260040161051a90611c62565b609954600160e01b900460ff16156114c55760405162461bcd60e51b815260040161051a90611d76565b60a08190556040518181527fc03e813ac3c72b419d55e3347033254b7730e1c13579c72e3b0258faa1c228a790602001610882565b6033546001600160a01b031633146115245760405162461bcd60e51b815260040161051a90611c62565b600081116115445760405162461bcd60e51b815260040161051a90612026565b609a8190556040518181527f1547cf4f4e088a233f379adf2a2ca21d8007a1a0273ac91fa1ec95d0c8e8414b90602001610882565b6040516001600160a01b0383166024820152604481018290526115dc90849063a9059cbb60e01b906064015b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526117ca565b505050565b60655460ff1661162a5760405162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604482015260640161051a565b6065805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b60655460ff16156116e95760405162461bcd60e51b815260040161051a90611dad565b6065805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586116573390565b6040516001600160a01b03808516602483015283166044820152606481018290526117569085906323b872dd60e01b906084016115a5565b50505050565b600054610100900460ff166117835760405162461bcd60e51b815260040161051a9061206b565b61178b61189c565b6107b86118c3565b600054610100900460ff166117ba5760405162461bcd60e51b815260040161051a9061206b565b6117c261189c565b6107b86118f3565b600061181f826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166119269092919063ffffffff16565b8051909150156115dc578080602001905181019061183d9190611fb8565b6115dc5760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161051a565b600054610100900460ff166107b85760405162461bcd60e51b815260040161051a9061206b565b600054610100900460ff166118ea5760405162461bcd60e51b815260040161051a9061206b565b6107b833611674565b600054610100900460ff1661191a5760405162461bcd60e51b815260040161051a9061206b565b6065805460ff19169055565b6060611935848460008561193f565b90505b9392505050565b6060824710156119a05760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b606482015260840161051a565b843b6119ee5760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161051a565b600080866001600160a01b03168587604051611a0a91906120e2565b60006040518083038185875af1925050503d8060008114611a47576040519150601f19603f3d011682016040523d82523d6000602084013e611a4c565b606091505b5091509150611a5c828286611a67565b979650505050505050565b60608315611a76575081611938565b825115611a865782518084602001fd5b8160405162461bcd60e51b815260040161051a91906120fe565b80356001600160a01b0381168114611ab757600080fd5b919050565b600060208284031215611ace57600080fd5b61193882611aa0565b80356001600160401b0381168114611ab757600080fd5b600060208284031215611b0057600080fd5b61193882611ad7565b600060208284031215611b1b57600080fd5b5035919050565b60ff8116811461146e57600080fd5b60008060008060608587031215611b4757600080fd5b843593506020850135611b5981611b22565b925060408501356001600160401b0380821115611b7557600080fd5b818701915087601f830112611b8957600080fd5b813581811115611b9857600080fd5b8860208260051b8501011115611bad57600080fd5b95989497505060200194505050565b600080600080600080600080610100898b031215611bd957600080fd5b611be289611aa0565b9750611bf060208a01611aa0565b9650611bfe60408a01611ad7565b9550611c0c60608a01611ad7565b945060808901359350611c2160a08a01611aa0565b9250611c2f60c08a01611aa0565b915060e089013590509295985092959890939650565b600060208284031215611c5757600080fd5b813561193881611b22565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b600060208284031215611ca957600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b600082821015611cd857611cd8611cb0565b500390565b6020808252602c908201527f546f6b656e53616c653a2073616c6520726563697069656e742073686f756c6460408201526b206e6f74206265207a65726f60a01b606082015260800190565b6020808252602d908201527f546f6b656e53616c653a207468652073616c65206475726174696f6e206d757360408201526c74206e6f74206265207a65726f60981b606082015260800190565b6020808252601c908201527f546f6b656e53616c653a20616c72656164792066696e616c697a656400000000604082015260600190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b60008219821115611dea57611dea611cb0565b500190565b600060208284031215611e0157600080fd5b815161193881611b22565b600181815b80851115611e47578160001904821115611e2d57611e2d611cb0565b80851615611e3a57918102915b93841c9390800290611e11565b509250929050565b600082611e5e57506001610c5d565b81611e6b57506000610c5d565b8160018114611e815760028114611e8b57611ea7565b6001915050610c5d565b60ff841115611e9c57611e9c611cb0565b50506001821b610c5d565b5060208310610133831016604e8410600b8410161715611eca575081810a610c5d565b611ed48383611e0c565b8060001904821115611ee857611ee8611cb0565b029392505050565b600061193860ff841683611e4f565b6000816000190483118215151615611f1957611f19611cb0565b500290565b600082611f3b57634e487b7160e01b600052601260045260246000fd5b500490565b60006001600160401b03808316818516808303821115611f6257611f62611cb0565b01949350505050565b6001600160a01b0384168152604060208201819052810182905260006001600160fb1b03831115611f9b57600080fd5b8260051b8085606085013760009201606001918252509392505050565b600060208284031215611fca57600080fd5b8151801515811461193857600080fd5b6020808252602c908201527f546f6b656e53616c653a2073746172742064617465206d6179206e6f7420626560408201526b081a5b881d1a19481c185cdd60a21b606082015260800190565b60208082526025908201527f546f6b656e53616c653a20746865207072696365206d757374206e6f74206265604082015264207a65726f60d81b606082015260800190565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b60005b838110156120d15781810151838201526020016120b9565b838111156117565750506000910152565b600082516120f48184602087016120b6565b9190910192915050565b602081526000825180602084015261211d8160408501602087016120b6565b601f01601f1916919091016040019291505056fea2646970667358221220d872b744f233982e13fd122763c6d5d14df18582d33db5f53d909b7393234d9364736f6c634300080b0033
```

These are the byte code differences between the two versions

| PC.Orig      | Operation.Orig              | Gas.Orig | PC.New       | Operation.New               | Gas.New |
| -            | -                           | :-:      | -            | -                           | :-:     |
| 3280(0x0cd0) | PUSH1(0x60) ["0x00"]        | 3        | 3280(0x0cd0) | PUSH1(0x60) ["0x00"]        | 3       |
| 3282(0x0cd2) | SWAP2(0x91)                 | 3        | 3282(0x0cd2) | SWAP2(0x91)                 | 3       |
| 3283(0x0cd3) | PUSH2(0x61) ["0x0c","0xf0"] | 3        |              |                             |         |
| 3286(0x0cd6) | SWAP2(0x91)                 | 3        |              |                             |         |
| 3287(0x0cd7) | PUSH1(0x60) ["0x01"]        | 3        | 3283(0x0cd3) | PUSH1(0x60) ["0x01"]        | 3       |
| 3289(0x0cd9) | PUSH1(0x60) ["0x01"]        | 3        | 3285(0x0cd5) | PUSH1(0x60) ["0x01"]        | 3       |
| 3291(0x0cdb) | PUSH1(0x60) ["0x40"]        | 3        | 3287(0x0cd7) | PUSH1(0x60) ["0x40"]        | 3       |
| 3293(0x0cdd) | SHL(0x1b)                   | 3        | 3289(0x0cd9) | SHL(0x1b)                   | 3       |
| 3294(0x0cde) | SUB(0x3)                    | 3        | 3290(0x0cda) | SUB(0x3)                    | 3       |
|              |                             |          | 3291(0x0cdb) | SWAP1(0x90)                 | 3       |
|              |                             |          | 3292(0x0cdc) | DUP2(0x81)                  | 3       |
| 3295(0x0cdf) | SWAP2(0x91)                 | 3        |              |                             |         |
| 3296(0x0ce0) | DUP3(0x82)                  | 3        |              |                             |         |
| 3297(0x0ce1) | AND(0x16)                   | 3        | 3293(0x0cdd) | AND(0x16)                   | 3       |
| 3298(0x0ce2) | SWAP2(0x91)                 | 3        |              |                             |         |
| 3299(0x0ce3) | PUSH1(0x60) ["0x01"]        | 3        | 3294(0x0cde) | PUSH1(0x60) ["0x01"]        | 3       |
| 3301(0x0ce5) | PUSH1(0x60) ["0xa0"]        | 3        | 3296(0x0ce0) | PUSH1(0x60) ["0xa0"]        | 3       |
| 3303(0x0ce7) | SHL(0x1b)                   | 3        | 3298(0x0ce2) | SHL(0x1b)                   | 3       |
| 3304(0x0ce8) | SWAP1(0x90)                 | 3        | 3299(0x0ce3) | SWAP1(0x90)                 | 3       |
|              |                             |          | 3300(0x0ce4) | SWAP3(0x92)                 | 3       |
| 3305(0x0ce9) | SWAP2(0x91)                 | 3        |              |                             |         |
| 3306(0x0cea) | DIV(0x4)                    | 5        | 3301(0x0ce5) | DIV(0x4)                    | 5       |
|              |                             |          | 3302(0x0ce6) | DUP2(0x81)                  | 3       |
| 3307(0x0ceb) | AND(0x16)                   | 3        | 3303(0x0ce7) | AND(0x16)                   | 3       |
|              |                             |          | 3304(0x0ce8) | SWAP2(0x91)                 | 3       |
|              |                             |          | 3305(0x0ce9) | SWAP1(0x90)                 | 3       |
|              |                             |          | 3306(0x0cea) | SWAP2(0x91)                 | 3       |
|              |                             |          | 3307(0x0ceb) | ADD(0x1)                    | 3       |
| 3308(0x0cec) | PUSH2(0x61) ["0x1f","0x4d"] | 3        |              |                             |         |
| 3311(0x0cef) | JUMP(0x56)                  | 8        |              |                             |         |
| 3312(0x0cf0) | JUMPDEST(0x5b)@0x0cf0       | 1        |              |                             |         |
| 3313(0x0cf1) | PUSH1(0x60) ["0x01"]        | 3        |              |                             |         |
| 3315(0x0cf3) | PUSH1(0x60) ["0x01"]        | 3        |              |                             |         |
| 3317(0x0cf5) | PUSH1(0x60) ["0x40"]        | 3        |              |                             |         |
| 3319(0x0cf7) | SHL(0x1b)                   | 3        |              |                             |         |
| 3320(0x0cf8) | SUB(0x3)                    | 3        |              |                             |         |
| 3321(0x0cf9) | AND(0x16)                   | 3        | 3308(0x0cec) | AND(0x16)                   | 3       |
| 3322(0x0cfa) | TIMESTAMP(0x42)             | 2        | 3309(0x0ced) | TIMESTAMP(0x42)             | 2       |
| 3323(0x0cfb) | LT(0x10)                    | 3        | 3310(0x0cee) | LT(0x10)                    | 3       |
| 3324(0x0cfc) | ISZERO(0x15)                | 3        | 3311(0x0cef) | ISZERO(0x15)                | 3       |
| 3325(0x0cfd) | DUP1(0x80)                  | 3        | 3312(0x0cf0) | DUP1(0x80)                  | 3       |
| 3326(0x0cfe) | PUSH2(0x61) ["0x0d","0x0b"] | 3        | 3313(0x0cf1) | PUSH2(0x61) ["0x0c","0xfe"] | 3       |
| 3329(0x0d01) | JUMPI(0x57)                 | 10       | 3316(0x0cf4) | JUMPI(0x57)                 | 10      |
|              |                             |          |              |                             |         |
|              | Total.Orig:                 | 116      |              | Total.New:                  | 95      |

The suggested change provides a savings of 21 gas

```
diff forgeResults.orig forgeResults.new
18,19c18,19
< [32m[PASS][0m testClaim() (gas: 368861)
< [32m[PASS][0m testClaimAfterMultipleBuys() (gas: 467216)
---
> [32m[PASS][0m testClaim() (gas: 368746)
> [32m[PASS][0m testClaimAfterMultipleBuys() (gas: 467101)
21,22c21,22
< [32m[PASS][0m testClaimFailsIfCalledAgain() (gas: 371463)
< [32m[PASS][0m testClaimFailsWhenNothingToClaim() (gas: 93860)
---
> [32m[PASS][0m testClaimFailsIfCalledAgain() (gas: 371348)
> [32m[PASS][0m testClaimFailsWhenNothingToClaim() (gas: 93745)
24,29c24,29
< [32m[PASS][0m testClaimMultipleBuyers() (gas: 538522)
< [32m[PASS][0m testExtendSaleDuration() (gas: 15922)
< [32m[PASS][0m testFinalize() (gas: 301754)
< [32m[PASS][0m testFinalizeFailsBeforeSaleEnds() (gas: 8526)
< [32m[PASS][0m testFinalizeFailsIfCalledAgain() (gas: 89215)
< [32m[PASS][0m testFinalizeFailsIfNotEnoughTokenIn() (gas: 226257)
---
> [32m[PASS][0m testClaimMultipleBuyers() (gas: 538407)
> [32m[PASS][0m testExtendSaleDuration() (gas: 15577)
> [32m[PASS][0m testFinalize() (gas: 301639)
> [32m[PASS][0m testFinalizeFailsBeforeSaleEnds() (gas: 8411)
> [32m[PASS][0m testFinalizeFailsIfCalledAgain() (gas: 89100)
> [32m[PASS][0m testFinalizeFailsIfNotEnoughTokenIn() (gas: 226142)
35,36c35,36
< [32m[PASS][0m testSaleEndedAfterDuration() (gas: 9653)
< [32m[PASS][0m testSaleEndedAfterLimit() (gas: 221010)
---
> [32m[PASS][0m testSaleEndedAfterDuration() (gas: 9423)
> [32m[PASS][0m testSaleEndedAfterLimit() (gas: 220895)
75c75
< │ 1714599                       ┆ 8596            ┆        ┆        ┆        ┆         │
---
> │ 1711999                       ┆ 8583            ┆        ┆        ┆        ┆         │
89c89
< │ finalize                      ┆ 543             ┆ 3180   ┆ 3164   ┆ 5164   ┆ 11      │
---
> │ finalize                      ┆ 543             ┆ 3086   ┆ 3049   ┆ 5049   ┆ 11      │
109c109
< │ saleEnded                     ┆ 677             ┆ 1450   ┆ 784    ┆ 2891   ┆ 6       │
---
> │ saleEnded                     ┆ 562             ┆ 1335   ┆ 669    ┆ 2776   ┆ 6       │
```


## Tools Used
Hardhat
Forge
npx @remix-project/remix-lib

## Recommended Mitigation Steps
Add `unchecked { }` and casts to operations that cannot overflow


# [G-04] - Pull tokens rather than pushing them
## Impact
It wastes gas to push tokens to `saleRecipient` every time there is a buy.


## Examples

### 1. [TokenSaleUpgradeable.sol:L183](https://github.com/code-423n4/2022-02-badger-citadel/blob/84596551d62f243d13fcb2d486346dde08002f7b/contracts/TokenSaleUpgradeable.sol#L183)
```solidity
        tokenIn.safeTransferFrom(msg.sender, saleRecipient, _tokenInAmount);
```

## Tools Used
Code inspection

## Recommended Mitigation Steps
Create a new function or modify `sweep()` to send the current balance of the contract to `saleRecipient`


